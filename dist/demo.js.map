{"version":3,"file":"demo.js","mappings":"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","sources":["webpack://FabricLayersReact/webpack/universalModuleDefinition","webpack://FabricLayersReact/./src/components/Map/Map.tsx","webpack://FabricLayersReact/./src/components/Map/index.ts","webpack://FabricLayersReact/./src/components/demo/GridDemo.tsx","webpack://FabricLayersReact/./src/components/demo/index.ts","webpack://FabricLayersReact/./src/context/MapContext.tsx","webpack://FabricLayersReact/external umd {\"commonjs\":\"@emotion/styled\",\"commonjs2\":\"@emotion/styled\",\"amd\":\"@emotion/styled\",\"root\":\"emotionStyled\"}","webpack://FabricLayersReact/external umd {\"commonjs\":\"fabric-layers\",\"commonjs2\":\"fabric-layers\",\"amd\":\"fabric-layers\",\"root\":\"FabricLayers\"}","webpack://FabricLayersReact/external umd {\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\",\"root\":\"React\"}","webpack://FabricLayersReact/webpack/bootstrap","webpack://FabricLayersReact/./src/demo.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@emotion/styled\"), require(\"fabric-layers\"), require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@emotion/styled\", \"fabric-layers\", \"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"FabricLayersReact\"] = factory(require(\"@emotion/styled\"), require(\"fabric-layers\"), require(\"react\"));\n\telse\n\t\troot[\"FabricLayersReact\"] = factory(root[\"emotionStyled\"], root[\"FabricLayers\"], root[\"React\"]);\n})(this, (__WEBPACK_EXTERNAL_MODULE__emotion_styled__, __WEBPACK_EXTERNAL_MODULE_fabric_layers__, __WEBPACK_EXTERNAL_MODULE_react__) => {\nreturn ","import React, { useEffect, useRef, useState } from 'react';\nimport { Map as FabricMap } from 'fabric-layers';\nimport { MapContext } from '../../context/MapContext';\nimport type { Map as CoreMap } from 'fabric-layers';\n\nexport interface MapProps {\n  width?: number | string;\n  height?: number | string;\n  initialMode?: string;\n  defaultMode?: string;\n  onReady?: (map: CoreMap) => void;\n  children?: React.ReactNode;\n  onModeChange?: (mode: string) => void;\n}\n\nexport const Map: React.FC<MapProps> = ({\n  width = '100%',\n  height = '100%',\n  initialMode = 'default',\n  defaultMode,\n  onReady,\n  children,\n  onModeChange,\n}) => {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [map, setMapInstance] = useState<CoreMap | null>(null);\n\n  useEffect(() => {\n    if (!containerRef.current) return;\n\n    const mapInstance = new FabricMap(containerRef.current);\n    setMapInstance(mapInstance);\n    \n    if (onReady) {\n      onReady(mapInstance);\n    }\n\n    // Register default mode if needed\n    const mode = defaultMode || initialMode;\n    if (mode !== 'default') {\n      mapInstance.registerMode(mode, {});\n      mapInstance.setMode(mode);\n    }\n\n    return () => {\n      if (mapInstance) {\n        mapInstance.dispose();\n      }\n    };\n  }, [initialMode, defaultMode, onReady]);\n\n  useEffect(() => {\n    if (!map || !onModeChange) return;\n\n    const handleModeChange = (mode: string) => {\n      onModeChange(mode);\n    };\n\n    map.registerEventListener('modeChange', handleModeChange);\n\n    return () => {\n      map.unregisterEventListener('modeChange', handleModeChange);\n    };\n  }, [map, onModeChange]);\n\n  return (\n    <MapContext.Provider value={{ map, setMap: setMapInstance }}>\n      <div ref={containerRef} style={{ width, height }}>\n        {map && children}\n      </div>\n    </MapContext.Provider>\n  );\n};\n\nexport default Map;","import { Map } from './Map';\nexport { Map };","import React, { useState, useCallback } from 'react';\nimport { Map } from '../Map';\nimport styled from '@emotion/styled';\n\nconst DemoContainer = styled.div`\n  margin: 0;\n  padding: 20px;\n  font-family: Arial, sans-serif;\n`;\n\nconst CanvasContainer = styled.div`\n  border: 1px solid #ccc;\n  margin: 20px 0;\n  width: 800px;\n  height: 600px;\n  background: #f8f9fa;\n`;\n\nconst Controls = styled.div`\n  margin: 20px 0;\n  padding: 15px;\n  background: #f5f5f5;\n  border-radius: 4px;\n`;\n\nconst Button = styled.button`\n  padding: 8px 16px;\n  margin-right: 10px;\n  cursor: pointer;\n`;\n\nconst Label = styled.label`\n  margin-right: 10px;\n`;\n\nconst Input = styled.input`\n  width: 70px;\n`;\n\nconst MonospaceText = styled.span`\n  font-family: monospace;\n  margin-left: 20px;\n`;\n\nexport const GridDemo: React.FC = () => {\n  const [coordinates, setCoordinates] = useState({ x: 0, y: 0 });\n  const [zoom, setZoom] = useState(1);\n  const [minZoom, setMinZoom] = useState(0.05);\n  const [maxZoom, setMaxZoom] = useState(20);\n  const [mapInstance, setMapInstance] = useState<any>(null);\n\n  const handleMapReady = useCallback((map: any) => {\n    setMapInstance(map);\n\n    map.on('mouse:move', (e: any) => {\n      if (e && e.pointer) {\n        setCoordinates({\n          x: e.pointer.x,\n          y: e.pointer.y\n        });\n      }\n    });\n\n    map.on('mouse:out', () => {\n      setCoordinates({ x: 0, y: 0 });\n    });\n\n    map.on('update', () => {\n      setZoom(map.zoom || 1);\n    });\n\n    // Debug events\n    map.on('mouse:down', (e: any) => {\n      if (e && e.pointer) {\n        console.log('mouse:down', e.pointer);\n      }\n    });\n\n    map.on('mouse:up', (e: any) => {\n      if (e && e.pointer) {\n        console.log('mouse:up', e.pointer);\n      }\n    });\n\n    map.on('mouse:dblclick', (e: any) => {\n      if (e && e.pointer) {\n        console.log('mouse:dblclick', e.pointer);\n      }\n    });\n  }, []);\n\n  const handleMinZoomChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = parseFloat(e.target.value);\n    if (!isNaN(value) && value > 0) {\n      setMinZoom(value);\n      if (mapInstance) {\n        mapInstance.minZoom = value;\n        if (mapInstance.zoom < value) {\n          mapInstance.setZoom(value);\n        }\n      }\n    }\n  }, [mapInstance]);\n\n  const handleMaxZoomChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = parseFloat(e.target.value);\n    if (!isNaN(value) && value > minZoom) {\n      setMaxZoom(value);\n      if (mapInstance) {\n        mapInstance.maxZoom = value;\n        if (mapInstance.zoom > value) {\n          mapInstance.setZoom(value);\n        }\n      }\n    }\n  }, [mapInstance, minZoom]);\n\n  const handleResetView = useCallback(() => {\n    if (mapInstance && mapInstance.reset) {\n      mapInstance.reset();\n    }\n  }, [mapInstance]);\n\n  return (\n    <DemoContainer>\n      <h1>fabric-layers Grid Demo</h1>\n      \n      <Controls>\n        <Label>\n          Min Zoom:\n          <Input\n            type=\"number\"\n            step=\"0.01\"\n            value={minZoom}\n            onChange={handleMinZoomChange}\n          />\n        </Label>\n        \n        <Label>\n          Max Zoom:\n          <Input\n            type=\"number\"\n            step=\"0.01\"\n            value={maxZoom}\n            onChange={handleMaxZoomChange}\n          />\n        </Label>\n        \n        <Button onClick={handleResetView}>\n          Reset View\n        </Button>\n        \n        <MonospaceText>\n          X: {coordinates.x.toFixed(1)}, Y: {coordinates.y.toFixed(1)}\n        </MonospaceText>\n        \n        <MonospaceText>\n          Zoom: {zoom.toFixed(2)}x\n        </MonospaceText>\n      </Controls>\n\n      <CanvasContainer>\n        <Map\n          width={800}\n          height={600}\n          onReady={handleMapReady}\n          defaultMode=\"GRAB\"\n        />\n      </CanvasContainer>\n    </DemoContainer>\n  );\n};\n\nexport default GridDemo;","import { GridDemo } from './GridDemo';\nexport { GridDemo };","import React, { createContext } from 'react';\nimport type { MapContextType } from '../types';\n\nexport const MapContext = createContext<MapContextType>({\n  map: null,\n  setMap: () => {},\n});\n\nexport const useMap = () => {\n  const context = React.useContext(MapContext);\n  if (!context) {\n    throw new Error('useMap must be used within a MapProvider');\n  }\n  return context;\n};","module.exports = __WEBPACK_EXTERNAL_MODULE__emotion_styled__;","module.exports = __WEBPACK_EXTERNAL_MODULE_fabric_layers__;","module.exports = __WEBPACK_EXTERNAL_MODULE_react__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import { Map } from './components/Map/Map';\nimport { GridDemo } from './components/demo';\n\nexport default {\n  Map,\n  GridDemo\n};"],"names":[],"sourceRoot":""}