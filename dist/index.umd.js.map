{"version":3,"file":"index.umd.js","sources":["../node_modules/rollup-plugin-node-globals/src/global.js","../node_modules/process-es6/browser.js","../src/grid/Grid.js","../src/geometry/Point.js","../src/layer/Group.js","../src/layer/Layer.js","../src/core/Constants.js","../src/layer/CanvasLayer.js","../src/layer/vector/Line.js","../src/layer/Connector.js","../src/layer/Tooltip.js","../src/layer/marker/Marker.js","../src/layer/marker/Icon.js","../src/layer/vector/Polyline.js","../src/layer/vector/Circle.js","../src/layer/vector/Rect.js","../src/layer/marker/MarkerGroup.js","../src/paint/ArrowHead.js","../src/paint/Arrow.js","../src/paint/Canvas.js","../src/lib/ev-pos.js","../src/lib/impetus.js","../src/lib/mouse-event-offset.js","../src/lib/touch-pinch.js","../src/lib/raf.js","../src/lib/MagicScroll.js","../src/lib/panzoom.js","../src/map/ModesMixin.js","../src/measurement/Measurement.js","../src/lib/mix.js","../src/map/Map.js","../src/image/ImageLayer.js","../src/index.js"],"sourcesContent":["export default (typeof global !== \"undefined\" ? global :\n            typeof self !== \"undefined\" ? self :\n            typeof window !== \"undefined\" ? window : {});\n","// shim for using process in browser\n// based off https://github.com/defunctzombie/node-process/blob/master/browser.js\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\nvar cachedSetTimeout = defaultSetTimout;\nvar cachedClearTimeout = defaultClearTimeout;\nif (typeof global.setTimeout === 'function') {\n    cachedSetTimeout = setTimeout;\n}\nif (typeof global.clearTimeout === 'function') {\n    cachedClearTimeout = clearTimeout;\n}\n\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\nexport function nextTick(fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n}\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nexport var title = 'browser';\nexport var platform = 'browser';\nexport var browser = true;\nexport var env = {};\nexport var argv = [];\nexport var version = ''; // empty string to avoid regexp issues\nexport var versions = {};\nexport var release = {};\nexport var config = {};\n\nfunction noop() {}\n\nexport var on = noop;\nexport var addListener = noop;\nexport var once = noop;\nexport var off = noop;\nexport var removeListener = noop;\nexport var removeAllListeners = noop;\nexport var emit = noop;\n\nexport function binding(name) {\n    throw new Error('process.binding is not supported');\n}\n\nexport function cwd () { return '/' }\nexport function chdir (dir) {\n    throw new Error('process.chdir is not supported');\n};\nexport function umask() { return 0; }\n\n// from https://github.com/kumavis/browser-process-hrtime/blob/master/index.js\nvar performance = global.performance || {}\nvar performanceNow =\n  performance.now        ||\n  performance.mozNow     ||\n  performance.msNow      ||\n  performance.oNow       ||\n  performance.webkitNow  ||\n  function(){ return (new Date()).getTime() }\n\n// generate timestamp or delta\n// see http://nodejs.org/api/process.html#process_process_hrtime\nexport function hrtime(previousTimestamp){\n  var clocktime = performanceNow.call(performance)*1e-3\n  var seconds = Math.floor(clocktime)\n  var nanoseconds = Math.floor((clocktime%1)*1e9)\n  if (previousTimestamp) {\n    seconds = seconds - previousTimestamp[0]\n    nanoseconds = nanoseconds - previousTimestamp[1]\n    if (nanoseconds<0) {\n      seconds--\n      nanoseconds += 1e9\n    }\n  }\n  return [seconds,nanoseconds]\n}\n\nvar startTime = new Date();\nexport function uptime() {\n  var currentTime = new Date();\n  var dif = currentTime - startTime;\n  return dif / 1000;\n}\n\nexport default {\n  nextTick: nextTick,\n  title: title,\n  browser: browser,\n  env: env,\n  argv: argv,\n  version: version,\n  versions: versions,\n  on: on,\n  addListener: addListener,\n  once: once,\n  off: off,\n  removeListener: removeListener,\n  removeAllListeners: removeAllListeners,\n  emit: emit,\n  binding: binding,\n  cwd: cwd,\n  chdir: chdir,\n  umask: umask,\n  hrtime: hrtime,\n  platform: platform,\n  release: release,\n  config: config,\n  uptime: uptime\n};\n","// Import dependencies from fabric-layers core library\nimport { Grid as CoreGrid, gridStyle, Axis, Point } from 'fabric-layers';\nimport { alpha, clamp, almost, len, parseUnit, toPx, isObj } from 'fabric-layers';\n\n/**\n * Grid - React extension of the core Grid class\n *\n * Handles drawing grid lines, labels, and axes based on the current\n * coordinate plane state and viewport with React integration.\n *\n * @class\n * @extends {CoreGrid}\n */\nclass Grid extends CoreGrid {\n  /**\n   * Create a new grid\n   *\n   * @param {HTMLCanvasElement} canvas - Canvas element to draw the grid on\n   * @param {Object} opts - Grid configuration options\n   * @param {string} [opts.color='#cccccc'] - Grid line color\n   * @param {number} [opts.opacity=0.5] - Grid line opacity\n   * @param {string} [opts.axisColor='#999999'] - Axis line color\n   * @param {number} [opts.spacing=10] - Grid line spacing\n   * @param {boolean} [opts.showLabels=true] - Whether to show grid labels\n   * @param {boolean} [opts.visible=true] - Whether the grid is visible\n   */\n  constructor(canvas, opts) {\n    super(opts);\n    this.canvas = canvas;\n    this.context = this.canvas.getContext('2d');\n    this.state = {};\n    this.setDefaults();\n    this.update(opts);\n  }\n\n  /**\n   * Render the grid to the canvas\n   *\n   * @returns {Grid} This grid instance for chaining\n   */\n  render() {\n    this.draw();\n    return this;\n  }\n\n  getCenterCoords() {\n    let state = this.state.x;\n    let [width, height] = state.shape;\n    let [pt, pr, pb, pl] = state.padding;\n    let axisCoords = state.opposite.coordinate.getCoords(\n      [state.coordinate.axisOrigin],\n      state.opposite\n    );\n    const y = pt + axisCoords[1] * (height - pt - pb);\n    state = this.state.y;\n    [width, height] = state.shape;\n    [pt, pr, pb, pl] = state.padding;\n    axisCoords = state.opposite.coordinate.getCoords([state.coordinate.axisOrigin], state.opposite);\n    const x = pl + axisCoords[0] * (width - pr - pl);\n    return { x, y };\n  }\n\n  setSize(width, height) {\n    this.setWidth(width);\n    this.setHeight(height);\n  }\n\n  setWidth(width) {\n    this.canvas.width = width;\n  }\n\n  setHeight(height) {\n    this.canvas.height = height;\n  }\n\n  // re-evaluate lines, calc options for renderer\n  update(opts) {\n    if (!opts) opts = {};\n    const shape = [this.canvas.width, this.canvas.height];\n\n    // recalc state\n    this.state.x = this.calcCoordinate(this.axisX, shape, this);\n    this.state.y = this.calcCoordinate(this.axisY, shape, this);\n    this.state.x.opposite = this.state.y;\n    this.state.y.opposite = this.state.x;\n    this.emit('update', opts);\n    return this;\n  }\n\n  // re-evaluate lines, calc options for renderer\n  update2(center) {\n    const shape = [this.canvas.width, this.canvas.height];\n    Object.assign(this.center, center);\n    // recalc state\n    this.state.x = this.calcCoordinate(this.axisX, shape, this);\n    this.state.y = this.calcCoordinate(this.axisY, shape, this);\n    this.state.x.opposite = this.state.y;\n    this.state.y.opposite = this.state.x;\n    this.emit('update', center);\n\n    this.axisX.offset = center.x;\n    this.axisX.zoom = 1 / center.zoom;\n\n    this.axisY.offset = center.y;\n    this.axisY.zoom = 1 / center.zoom;\n  }\n\n  // get state object with calculated params, ready for rendering\n  calcCoordinate(coord, shape) {\n    const state = {\n      coordinate: coord,\n      shape,\n      grid: this\n    };\n    // calculate real offset/range\n    state.range = coord.getRange(state);\n    state.offset = clamp(\n      coord.offset - state.range * clamp(0.5, 0, 1),\n      Math.max(coord.min, -Number.MAX_VALUE + 1),\n      Math.min(coord.max, Number.MAX_VALUE) - state.range\n    );\n\n    state.zoom = coord.zoom;\n    // calc style\n    state.axisColor = typeof coord.axisColor === 'number'\n      ? alpha(coord.color, coord.axisColor)\n      : coord.axisColor || coord.color;\n\n    state.axisWidth = coord.axisWidth || coord.lineWidth;\n    state.lineWidth = coord.lineWidth;\n    state.tickAlign = coord.tickAlign;\n    state.labelColor = state.color;\n    // get padding\n    if (typeof coord.padding === 'number') {\n      state.padding = Array(4).fill(coord.padding);\n    } else if (coord.padding instanceof Function) {\n      state.padding = coord.padding(state);\n    } else {\n      state.padding = coord.padding;\n    }\n    // calc font\n    if (typeof coord.fontSize === 'number') {\n      state.fontSize = coord.fontSize;\n    } else {\n      const units = parseUnit(coord.fontSize);\n      state.fontSize = units[0] * toPx(units[1]);\n    }\n    state.fontFamily = coord.fontFamily || 'sans-serif';\n    // get lines stops, including joined list of values\n    let lines;\n    if (coord.lines instanceof Function) {\n      lines = coord.lines(state);\n    } else {\n      lines = coord.lines || [];\n    }\n    state.lines = lines;\n    // calc colors\n    if (coord.lineColor instanceof Function) {\n      state.lineColors = coord.lineColor(state);\n    } else if (Array.isArray(coord.lineColor)) {\n      state.lineColors = coord.lineColor;\n    } else {\n      let color = alpha(coord.color, coord.lineColor);\n      if (typeof coord.lineColor !== 'number') {\n        color = coord.lineColor === false || coord.lineColor == null ? null : coord.color;\n      }\n      state.lineColors = Array(lines.length).fill(color);\n    }\n    // calc ticks\n    let ticks;\n    if (coord.ticks instanceof Function) {\n      ticks = coord.ticks(state);\n    } else if (Array.isArray(coord.ticks)) {\n      ticks = coord.ticks;\n    } else {\n      const tick = coord.ticks === true || coord.ticks === true\n        ? state.axisWidth * 2 : coord.ticks || 0;\n      ticks = Array(lines.length).fill(tick);\n    }\n    state.ticks = ticks;\n    // calc labels\n    let labels;\n    if (coord.labels === true) labels = state.lines;\n    else if (coord.labels instanceof Function) {\n      labels = coord.labels(state);\n    } else if (Array.isArray(coord.labels)) {\n      labels = coord.labels;\n    } else if (isObj(coord.labels)) {\n      labels = coord.labels;\n    } else {\n      labels = Array(state.lines.length).fill(null);\n    }\n    state.labels = labels;\n    // convert hashmap ticks/labels to lines + colors\n    if (isObj(ticks)) {\n      state.ticks = Array(lines.length).fill(0);\n    }\n    if (isObj(labels)) {\n      state.labels = Array(lines.length).fill(null);\n    }\n    if (isObj(ticks)) {\n      // eslint-disable-next-line guard-for-in\n      Object.keys(ticks).forEach((value, tick) => {\n        state.ticks.push(tick);\n        state.lines.push(parseFloat(value));\n        state.lineColors.push(null);\n        state.labels.push(null);\n      });\n    }\n\n    if (isObj(labels)) {\n      Object.keys(labels).forEach((label, value) => {\n        state.labels.push(label);\n        state.lines.push(parseFloat(value));\n        state.lineColors.push(null);\n        state.ticks.push(null);\n      });\n    }\n\n    return state;\n  }\n\n  setDefaults() {\n    this.pixelRatio = window.devicePixelRatio;\n    this.autostart = true;\n    this.interactions = true;\n\n    this.defaults = Object.assign(\n      {\n        type: 'linear',\n        name: '',\n        units: '',\n        state: {},\n\n        // visible range params\n        minZoom: -Infinity,\n        maxZoom: Infinity,\n        min: -Infinity,\n        max: Infinity,\n        offset: 0,\n        origin: 0.5,\n        center: {\n          x: 0,\n          y: 0,\n          zoom: 1\n        },\n        zoom: 1,\n        zoomEnabled: true,\n        panEnabled: true,\n\n        // labels\n        labels: true,\n        fontSize: '11pt',\n        fontFamily: 'sans-serif',\n        padding: 0,\n        color: 'rgb(0,0,0,1)',\n\n        // lines params\n        lines: true,\n        tick: 8,\n        tickAlign: 0.5,\n        lineWidth: 1,\n        distance: 13,\n        style: 'lines',\n        lineColor: 0.4,\n\n        // axis params\n        axis: true,\n        axisOrigin: 0,\n        axisWidth: 2,\n        axisColor: 0.8,\n\n        // stub methods\n        // return coords for the values, redefined by axes\n        getCoords: () => [0, 0, 0, 0],\n\n        // return 0..1 ratio based on value/offset/range, redefined by axes\n        getRatio: () => 0,\n\n        // default label formatter\n        format: v => v\n      },\n      gridStyle,\n      this._options\n    );\n\n    this.axisX = new Axis('x', this.defaults);\n    this.axisY = new Axis('y', this.defaults);\n\n    this.axisX = Object.assign({}, this.defaults, {\n      orientation: 'x',\n      offset: this.center.x,\n      getCoords: (values, state) => {\n        const coords = [];\n        if (!values) return coords;\n        for (let i = 0; i < values.length; i += 1) {\n          const t = state.coordinate.getRatio(values[i], state);\n          coords.push(t);\n          coords.push(0);\n          coords.push(t);\n          coords.push(1);\n        }\n        return coords;\n      },\n      getRange: state => state.shape[0] * state.coordinate.zoom,\n      // FIXME: handle infinity case here\n      getRatio: (value, state) => (value - state.offset) / state.range\n    });\n    this.axisY = Object.assign({}, this.defaults, {\n      orientation: 'y',\n      offset: this.center.y,\n      getCoords: (values, state) => {\n        const coords = [];\n        if (!values) return coords;\n        for (let i = 0; i < values.length; i += 1) {\n          const t = state.coordinate.getRatio(values[i], state);\n          coords.push(0);\n          coords.push(t);\n          coords.push(1);\n          coords.push(t);\n        }\n        return coords;\n      },\n      getRange: state => state.shape[1] * state.coordinate.zoom,\n      getRatio: (value, state) => 1 - (value - state.offset) / state.range\n    });\n\n    Object.assign(this, this.defaults);\n    Object.assign(this, this._options);\n\n    this.center = new Point(this.center);\n  }\n\n  // draw grid to the canvas\n  draw() {\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    this.drawLines(this.state.x);\n    this.drawLines(this.state.y);\n    return this;\n  }\n\n  // lines instance draw\n  drawLines(state) {\n    // draw lines and sublines\n    if (!state || !state.coordinate) return;\n\n    const ctx = this.context;\n    const [width, height] = state.shape;\n    const left = 0;\n    const top = 0;\n    const [pt, pr, pb, pl] = state.padding;\n\n    let axisRatio = state.opposite.coordinate.getRatio(state.coordinate.axisOrigin, state.opposite);\n    axisRatio = clamp(axisRatio, 0, 1);\n    const coords = state.coordinate.getCoords(state.lines, state);\n    // draw state.lines\n    ctx.lineWidth = 1; // state.lineWidth/2.;\n    for (let i = 0, j = 0; i < coords.length; i += 4, j += 1) {\n      const color = state.lineColors[j];\n      if (!color) continue;\n      ctx.strokeStyle = color;\n      ctx.beginPath();\n      const x1 = left + pl + coords[i] * (width - pr - pl);\n      const y1 = top + pt + coords[i + 1] * (height - pb - pt);\n      const x2 = left + pl + coords[i + 2] * (width - pr - pl);\n      const y2 = top + pt + coords[i + 3] * (height - pb - pt);\n      ctx.moveTo(x1, y1);\n      ctx.lineTo(x2, y2);\n      ctx.stroke();\n      ctx.closePath();\n    }\n    const normals = [];\n    for (let i = 0; i < coords.length; i += 4) {\n      const x1 = coords[i];\n      const y1 = coords[i + 1];\n      const x2 = coords[i + 2];\n      const y2 = coords[i + 3];\n      const xDif = x2 - x1;\n      const yDif = y2 - y1;\n      const dist = len(xDif, yDif);\n      normals.push(xDif / dist);\n      normals.push(yDif / dist);\n    }\n    // calc state.labels/tick coords\n    const tickCoords = [];\n    state.labelCoords = [];\n    const ticks = state.ticks;\n    for (let i = 0, j = 0, k = 0; i < normals.length; k += 1, i += 2, j += 4) {\n      const x1 = coords[j];\n      const y1 = coords[j + 1];\n      const x2 = coords[j + 2];\n      const y2 = coords[j + 3];\n      const xDif = (x2 - x1) * axisRatio;\n      const yDif = (y2 - y1) * axisRatio;\n      const tick = [\n        (normals[i] * ticks[k]) / (width - pl - pr),\n        (normals[i + 1] * ticks[k]) / (height - pt - pb)\n      ];\n      tickCoords.push(normals[i] * (xDif + tick[0] * state.tickAlign) + x1);\n      tickCoords.push(normals[i + 1] * (yDif + tick[1] * state.tickAlign) + y1);\n      tickCoords.push(normals[i] * (xDif - tick[0] * (1 - state.tickAlign)) + x1);\n      tickCoords.push(normals[i + 1] * (yDif - tick[1] * (1 - state.tickAlign)) + y1);\n      state.labelCoords.push(normals[i] * xDif + x1);\n      state.labelCoords.push(normals[i + 1] * yDif + y1);\n    }\n    // draw ticks\n    if (ticks.length) {\n      ctx.lineWidth = state.axisWidth / 2;\n      ctx.beginPath();\n      for (let i = 0, j = 0; i < tickCoords.length; i += 4, j += 1) {\n        if (almost(state.lines[j], state.opposite.coordinate.axisOrigin)) continue;\n        const x1 = left + pl + tickCoords[i] * (width - pl - pr);\n        const y1 = top + pt + tickCoords[i + 1] * (height - pt - pb);\n        const x2 = left + pl + tickCoords[i + 2] * (width - pl - pr);\n        const y2 = top + pt + tickCoords[i + 3] * (height - pt - pb);\n        ctx.moveTo(x1, y1);\n        ctx.lineTo(x2, y2);\n      }\n      ctx.strokeStyle = state.axisColor;\n      ctx.stroke();\n      ctx.closePath();\n    }\n    // draw axis\n    if (state.coordinate.axis && state.axisColor) {\n      const axisCoords = state.opposite.coordinate.getCoords(\n        [state.coordinate.axisOrigin],\n        state.opposite\n      );\n      ctx.lineWidth = state.axisWidth / 2;\n      const x1 = left + pl + clamp(axisCoords[0], 0, 1) * (width - pr - pl);\n      const y1 = top + pt + clamp(axisCoords[1], 0, 1) * (height - pt - pb);\n      const x2 = left + pl + clamp(axisCoords[2], 0, 1) * (width - pr - pl);\n      const y2 = top + pt + clamp(axisCoords[3], 0, 1) * (height - pt - pb);\n      ctx.beginPath();\n      ctx.moveTo(x1, y1);\n      ctx.lineTo(x2, y2);\n      ctx.strokeStyle = state.axisColor;\n      ctx.stroke();\n      ctx.closePath();\n    }\n    // draw state.labels\n    this.drawLabels(state);\n  }\n\n  drawLabels(state) {\n    if (state.labels) {\n      const ctx = this.context;\n      const [width, height] = state.shape;\n      const [pt, pr, pb, pl] = state.padding;\n\n      ctx.font = `300 ${state.fontSize}px ${state.fontFamily}`;\n      ctx.fillStyle = state.labelColor;\n      ctx.textBaseline = 'top';\n      const textHeight = state.fontSize;\n      const indent = state.axisWidth + 1.5;\n      const textOffset = state.tickAlign < 0.5\n        ? -textHeight - state.axisWidth * 2 : state.axisWidth * 2;\n      const isOpp = state.coordinate.orientation === 'y' && !state.opposite.disabled;\n      for (let i = 0; i < state.labels.length; i += 1) {\n        let label = state.labels[i];\n        if (label == null) continue;\n\n        if (isOpp && almost(state.lines[i], state.opposite.coordinate.axisOrigin)) continue;\n\n        const textWidth = ctx.measureText(label).width;\n\n        let textLeft = state.labelCoords[i * 2] * (width - pl - pr) + indent + pl;\n\n        if (state.coordinate.orientation === 'y') {\n          textLeft = clamp(textLeft, indent, width - textWidth - 1 - state.axisWidth);\n          label *= -1;\n        }\n\n        let textTop = state.labelCoords[i * 2 + 1] * (height - pt - pb) + textOffset + pt;\n        if (state.coordinate.orientation === 'x') {\n          textTop = clamp(textTop, 0, height - textHeight - textOffset);\n        }\n        ctx.fillText(label, textLeft, textTop);\n      }\n    }\n  }\n}\n\nexport default Grid;\n","// Re-export Point class and factory function from fabric-layers for backward compatibility\nimport { Point as CorePoint, point as createPoint } from 'fabric-layers';\n\n// Extend the Point class to maintain any custom methods from the React version\nexport class Point extends CorePoint {\n  copy(point) {\n    this.x = point.x;\n    this.y = point.y;\n    return this;\n  }\n\n  getArray() {\n    return [this.x, this.y];\n  }\n}\n\n// Re-export the point factory function\nexport const point = (...params) => new Point(...params);\n","import { Group as CoreGroup, Point } from 'fabric-layers';\n\n/**\n * Group - React extension of the core Group class\n * \n * Provides grouping functionality for fabric objects with React integration\n */\nexport class Group extends CoreGroup {\n  constructor(objects, options) {\n    options = options || {};\n    super(objects, options);\n  }\n\n  getBounds() {\n    const coords = [];\n    coords.push(new Point(this.left - this.width / 2.0, this.top - this.height / 2.0));\n    coords.push(new Point(this.left + this.width / 2.0, this.top + this.height / 2.0));\n    return coords;\n  }\n}\n\nexport const group = (objects, options) => new Group(objects, options);\n\nexport default Group;\n","import { Layer as CoreLayer } from 'fabric-layers';\n\n/**\n * Layer - React extension of the core Layer class\n *\n * Provides the fundamental properties and methods for manipulating layers\n * within a coordinate plane or canvas, with React-specific enhancements.\n *\n * @class\n * @extends {CoreLayer}\n */\nexport class Layer extends CoreLayer {\n  /**\n   * Create a new layer\n   *\n   * @param {Object} options - Layer configuration options\n   * @param {string} [options.label=null] - Display label for the layer\n   * @param {boolean} [options.draggable=false] - Whether the layer can be dragged\n   * @param {number} [options.zIndex=1] - Z-index for layer stacking order\n   * @param {number} [options.opacity=1] - Layer opacity (0-1)\n   * @param {boolean} [options.keepOnZoom=false] - Whether to maintain size when zooming\n   * @param {boolean} [options.clickable=false] - Whether the layer responds to clicks\n   * @param {string} [options.hoverCursor] - Cursor to display on hover\n   * @param {string} [options.moveCursor='move'] - Cursor to display when moving\n   * @param {string} [options.id] - Unique identifier for the layer\n   * @param {string} [options.class] - CSS class name for the layer\n   */\n  constructor(options) {\n    super(options);\n    this.label = this.label !== undefined ? this.label : null;\n    this.draggable = this.draggable || false;\n    this.zIndex = this.zIndex || 1;\n    this.opacity = this.opacity || 1;\n    this.keepOnZoom = this.keepOnZoom || false;\n    this.clickable = this.clickable || false;\n\n    this.hoverCursor = this.hoverCursor || this.clickable ? 'pointer' : 'default';\n    this.moveCursor = this.moveCursor || 'move';\n\n    // this.class = this.class || this.constructor.name.toLowerCase();\n\n    this.style = {\n      zIndex: this.zIndex,\n      class: this.class,\n      parent: this,\n      keepOnZoom: this.keepOnZoom,\n      id: this.id,\n      hasControls: false,\n      hasBorders: false,\n      lockMovementX: !this.draggable,\n      lockMovementY: !this.draggable,\n      draggable: this.draggable,\n      clickable: this.clickable,\n      evented: this.clickable,\n      selectable: this.draggable,\n      hoverCursor: this.hoverCursor,\n      moveCursor: this.moveCursor\n    };\n  }\n\n  setOptions(options) {\n    if (!this.shape) return;\n    Object.keys(options).forEach(key => {\n      this.shape.set(key, options[key]);\n    });\n    if (this.shape.canvas) {\n      this.shape.canvas.renderAll();\n    }\n  }\n\n  addTo(map) {\n    if (!map) {\n      if (this._map) {\n        this._map.removeLayer(this);\n      }\n      return;\n    }\n    this._map = map;\n    this._map.addLayer(this);\n  }\n}\n\nexport const layer = options => new Layer(options);\n\nexport default Layer;\n","// Import core constants from fabric-layers\nimport { Modes, MAP, Point } from 'fabric-layers';\n\n// Re-export for backward compatibility\nexport { Modes, MAP };\n\n\nexport const MARKER = {\n  position: new Point(),\n  minZoom: 1,\n  maxZoom: 20\n};\n\nexport const ICON = {\n  url:\n    'data:image/png;base64,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',\n  size: [128, 128],\n  anchor: [64, 64]\n};\n\nfabric.Object.prototype.originX = 'center';\nfabric.Object.prototype.originY = 'center';\n\nfabric.Object.prototype.lockUniScaling = true;\nfabric.Object.prototype.lockScalingFlip = true;\nfabric.Object.prototype.transparentCorners = false;\nfabric.Object.prototype.centeredScaling = true;\n// fabric.Object.prototype.cornerStyle = 'circle';\nfabric.Object.prototype.cornerColor = 'blue';\nfabric.Object.prototype.borderColor = 'blue';\nfabric.Object.prototype.borderOpacity = 0.7;\nfabric.Object.prototype.cornerOpacity = 0.7;\nfabric.Object.prototype.cornerStrokeColor = 'blue';\n\nfabric.Object.prototype.borderColor = '#ff0099';\nfabric.Object.prototype.cornerColor = '#00eaff';\nfabric.Object.prototype.cornerStrokeColor = '#00bbff';\n\nfabric.Object.prototype.objectCaching = false;\nfabric.Group.prototype.objectCaching = true;\n\nfabric.Group.prototype.selectionBackgroundColor = 'rgba(45,207,171,0.25)';\n\nfabric.Object.prototype.borderDashArray = [3, 3];\n\nfabric.Object.prototype.padding = 5;\n\nfabric.Object.prototype.getBounds = function getBounds() {\n  const coords = [];\n  coords.push(new Point(this.left - this.width / 2.0, this.top - this.height / 2.0));\n  coords.push(new Point(this.left + this.width / 2.0, this.top + this.height / 2.0));\n  return coords;\n};\n","/**\n * CanvasLayer component\n * A React extension of the core CanvasLayer class\n */\n\nimport React from 'react';\nimport { CanvasLayer as CoreCanvasLayer } from 'fabric-layers';\n\n/**\n * CanvasLayer - A specialized layer for canvas-based content with React integration\n * This extends the core CanvasLayer with React-specific functionality\n */\nclass CanvasLayer extends CoreCanvasLayer {\n  constructor(props) {\n    super(props);\n    this.canvasRef = React.createRef();\n  }\n\n  /**\n   * Initialize the canvas context\n   */\n  initCanvas() {\n    if (this.canvasRef.current) {\n      this.ctx = this.canvasRef.current.getContext('2d');\n    }\n  }\n\n  /**\n   * Clear the canvas\n   */\n  clearCanvas() {\n    if (this.ctx && this.canvasRef.current) {\n      this.ctx.clearRect(0, 0, this.canvasRef.current.width, this.canvasRef.current.height);\n    }\n  }\n\n  /**\n   * Resize the canvas to match parent dimensions\n   */\n  resizeCanvas() {\n    if (this.canvasRef.current && this.canvasRef.current.parentElement) {\n      const parent = this.canvasRef.current.parentElement;\n      this.canvasRef.current.width = parent.clientWidth;\n      this.canvasRef.current.height = parent.clientHeight;\n    }\n  }\n\n  /**\n   * Component lifecycle method - after mounting\n   */\n  componentDidMount() {\n    super.componentDidMount();\n    this.initCanvas();\n    this.resizeCanvas();\n    window.addEventListener('resize', this.resizeCanvas.bind(this));\n  }\n\n  /**\n   * Component lifecycle method - before unmounting\n   */\n  componentWillUnmount() {\n    super.componentWillUnmount();\n    window.removeEventListener('resize', this.resizeCanvas.bind(this));\n  }\n\n  /**\n   * Render method\n   */\n  render() {\n    const { style, className, ...otherProps } = this.props;\n    return React.createElement(\n      'div',\n      {\n        className,\n        style: {\n          position: 'absolute',\n          width: '100%',\n          height: '100%',\n          ...style\n        }\n      },\n      React.createElement('canvas', {\n        ref: this.canvasRef,\n        ...otherProps,\n        style: {\n          display: 'block',\n          width: '100%',\n          height: '100%'\n        }\n      })\n    );\n  }\n}\n\nexport default CanvasLayer;\n","export class Line extends fabric.Line {\n  constructor(points, options) {\n    options = options || {};\n    options.strokeWidth = options.strokeWidth || 1;\n    options.class = 'line';\n    super(points, options);\n    this._strokeWidth = options.strokeWidth;\n  }\n\n  _renderStroke(ctx) {\n    const stroke = this._strokeWidth / this.canvas.getZoom();\n    this.strokeWidth = stroke > 0.01 ? stroke : 0.01;\n    super._renderStroke(ctx);\n    this.setCoords();\n  }\n}\n\nexport const line = (points, options) => new Line(points, options);\n\nexport default Line;\n","import { Connector as CoreConnector } from 'fabric-layers';\nimport { Line } from './vector/Line';\n\n/**\n * Connector - React extension of the core Connector class\n * \n * Provides connection functionality between layer objects with React integration\n */\nexport class Connector extends CoreConnector {\n  constructor(start, end, options) {\n    options = options || {};\n    options.zIndex = options.zIndex || 10;\n    options.class = 'connector';\n    super(options);\n\n    if (!start || !end) {\n      console.error('start or end is missing');\n      return;\n    }\n    this.start = start;\n    this.end = end;\n    this.strokeWidth = this.strokeWidth || 1;\n\n    Object.assign(this.style, {\n      strokeWidth: this.strokeWidth,\n      stroke: this.color || 'grey',\n      fill: this.fill || false,\n      selectable: false\n    });\n\n    this.draw();\n\n    this.registerListeners();\n  }\n\n  registerListeners() {\n    const vm = this;\n    this.start.on('update:links', () => {\n      vm.shape.set({\n        x1: vm.start.position.x,\n        y1: vm.start.position.y\n      });\n    });\n\n    this.end.on('update:links', () => {\n      vm.shape.set({\n        x2: vm.end.position.x,\n        y2: vm.end.position.y\n      });\n    });\n  }\n\n  draw() {\n    this.shape = new Line(\n      [this.start.position.x, this.start.position.y, this.end.position.x, this.end.position.y],\n      this.style\n    );\n    // this.shape.setCoords();\n  }\n\n  redraw() {\n    this.shape.set({\n      x1: this.start.position.x,\n      y1: this.start.position.y,\n      x2: this.end.position.x,\n      y2: this.end.position.y\n    });\n  }\n\n  setStart(start) {\n    this.start = start;\n    this.redraw();\n  }\n\n  setEnd(end) {\n    this.end = end;\n    this.redraw();\n  }\n\n  setColor(color) {\n    this.color = color;\n    this.style.stroke = color;\n    this.shape.set('stroke', color);\n    if (this.shape.canvas) {\n      this.shape.canvas.renderAll();\n    }\n  }\n\n  setStrokeWidth(strokeWidth) {\n    this.strokeWidth = strokeWidth;\n    this.style.strokeWidth = strokeWidth;\n    this.shape.set('strokeWidth', strokeWidth);\n    if (this.shape.canvas) {\n      this.shape.canvas.renderAll();\n    }\n  }\n}\n\nexport const connector = (start, end, options) => new Connector(start, end, options);\n\nexport default Connector;\n","import { Layer } from './Layer';\nimport { Group } from './Group';\nimport { Point } from '../geometry/Point';\n\nclass Tooltip extends Layer {\n  constructor(position, options) {\n    options = options || {};\n    options.zIndex = options.zIndex || 300;\n    options.keepOnZoom = true;\n    options.position = new Point(position);\n    options.class = 'tooltip';\n    super(options);\n\n    this.content = this.content || '';\n    this.size = this.size || 10;\n    this.textColor = this.textColor || 'black';\n    this.fill = this.fill || 'white';\n    this.stroke = this.stroke || 'red';\n\n    Object.assign(this.style, {\n      left: this.position.x,\n      top: this.position.y\n    });\n\n    if (this.content) {\n      this.textObj = new fabric.Text(this.content, {\n        fontSize: this.size,\n        fill: this.textColor\n      });\n    }\n    this.init();\n  }\n\n  init() {\n    const objects = [];\n    if (this.textObj) {\n      objects.push(this.textObj);\n    }\n    this.shape = new Group(objects, this.style);\n    process.nextTick(() => {\n      this.emit('ready');\n    });\n  }\n}\nexport default Tooltip;\n","import { Layer } from '../Layer';\nimport { Group } from '../Group';\nimport { Point } from '../../geometry/Point';\nimport { Connector } from '../Connector';\n\nexport class Marker extends Layer {\n  constructor(position, options) {\n    options = options || {};\n    options.zIndex = options.zIndex || 100;\n    options.keepOnZoom = options.keepOnZoom === undefined ? true : options.keepOnZoom;\n    options.position = new Point(position);\n    options.rotation = options.rotation || 0;\n    options.yaw = options.yaw || 0;\n    options.clickable = options.clickable !== undefined ? options.clickable : true;\n    options.class = 'marker';\n    super(options);\n\n    const vm = this;\n\n    this.text = this.text || '';\n    this.size = this.size || 10;\n    this.textColor = this.textColor || 'black';\n    this.fill = this.fill || 'white';\n    this.stroke = this.stroke || 'red';\n\n    Object.assign(this.style, {\n      left: this.position.x,\n      top: this.position.y,\n      // selectionBackgroundColor: false,\n      angle: this.rotation,\n      yaw: this.yaw,\n      clickable: this.clickable\n    });\n\n    if (this.text) {\n      this.textObj = new fabric.Text(this.text, {\n        fontSize: this.size,\n        fill: this.textColor\n      });\n    }\n\n    if (this.icon) {\n      fabric.Image.fromURL(\n        this.icon.url,\n        image => {\n          vm.image = image.scaleToWidth(this.size);\n          this.init();\n          // vm.shape.removeWithUpdate();\n        },\n        {\n          selectable: false,\n          evented: this.evented,\n          clickable: this.clickable,\n          opacity: this.opacity\n        }\n      );\n    } else {\n      this.circle = new fabric.Circle({\n        radius: this.size,\n        strokeWidth: 2,\n        stroke: this.stroke,\n        fill: this.fill\n      });\n      this.init();\n    }\n  }\n\n  init() {\n    const objects = [];\n    if (this.image) {\n      objects.push(this.image);\n    }\n    if (this.circle) {\n      objects.push(this.circle);\n    }\n    if (this.textObj) {\n      objects.push(this.textObj);\n    }\n    this.shape = new Group(objects, this.style);\n    this.links = this.links || [];\n    this.addLinks();\n    this.registerListeners();\n\n    process.nextTick(() => {\n      this.emit('ready');\n    });\n  }\n\n  registerListeners() {\n    const vm = this;\n    this.shape.on('moving', () => {\n      vm.onShapeDrag();\n    });\n    this.shape.on('rotating', () => {\n      vm.emit('rotating');\n    });\n\n    this.shape.on('mousedown', e => {\n      vm.onShapeMouseDown(e);\n    });\n    this.shape.on('mousemove', e => {\n      vm.onShapeMouseMove(e);\n    });\n    this.shape.on('mouseup', e => {\n      vm.onShapeMouseUp(e);\n    });\n    this.shape.on('mouseover', () => {\n      vm.emit('mouseover', vm);\n    });\n    this.shape.on('mouseout', () => {\n      vm.emit('mouseout', vm);\n    });\n  }\n\n  setPosition(position) {\n    this.position = new Point(position);\n    if (!this.shape) return;\n\n    this.shape.set({\n      left: this.position.x,\n      top: this.position.y\n    });\n\n    this.emit('update:links');\n\n    if (this.shape.canvas) {\n      this.shape.canvas.renderAll();\n    }\n  }\n\n  setRotation(rotation) {\n    this.rotation = rotation;\n\n    if (!this.shape) return;\n\n    this.shape.set({\n      angle: this.rotation\n    });\n\n    if (this.shape.canvas) {\n      this.shape.canvas.renderAll();\n    }\n  }\n\n  setOptions(options) {\n    if (!this.shape) return;\n\n    Object.keys(options).forEach(key => {\n      switch (key) {\n        case 'textColor':\n          this.setTextColor(options[key]);\n          break;\n        case 'stroke':\n          this.setStroke(options[key]);\n          break;\n        case 'fill':\n          this.setColor(options[key]);\n          break;\n\n        default:\n          break;\n      }\n    });\n    if (this.shape.canvas) {\n      this.shape.canvas.renderAll();\n    }\n  }\n\n  setTextColor(color) {\n    if (this.text && this.textObj) {\n      this.textObj.setColor(color);\n      this.textObj.canvas.renderAll();\n    }\n  }\n\n  setText(text) {\n    if (this.text && this.textObj) {\n      this.textObj.set({ text });\n      this.textObj.canvas.renderAll();\n    }\n  }\n\n  setStroke(color) {\n    if (this.circle) {\n      this.circle.set('stroke', color);\n    }\n  }\n\n  setColor(color) {\n    if (this.circle) {\n      this.circle.setColor(color);\n    }\n  }\n\n  setLinks(links) {\n    this.links = links;\n    this.addLinks();\n  }\n\n  setSize(size) {\n    if (this.image) {\n      this.image.scaleToWidth(size);\n      if (this.image.canvas) {\n        this.image.canvas.renderAll();\n      }\n    } else if (this.circle) {\n      this.circle.setRadius(size);\n    }\n  }\n\n  addLinks() {\n    this.connectors = [];\n    this.links.forEach(link => {\n      const connector = new Connector(this, link);\n      this.connectors.push(connector);\n    });\n\n    this.addConnectors();\n  }\n\n  addConnectors() {\n    const vm = this;\n    this.connectors.forEach(connector => {\n      vm._map.addLayer(connector);\n    });\n  }\n\n  onAdded() {\n    this.addConnectors();\n  }\n\n  onShapeDrag() {\n    const matrix = this.shape.calcTransformMatrix();\n    const [, , , , x, y] = matrix;\n    this.position = new Point(x, y);\n    this.emit('update:links');\n    this.emit('moving');\n  }\n\n  onShapeMouseDown(e) {\n    this.dragStart = e;\n  }\n\n  onShapeMouseMove(e) {\n    if (this.dragStart) {\n      this.emit('dragstart');\n\n      const a = new fabric.Point(e.pointer.x, e.pointer.y);\n      const b = new fabric.Point(this.dragStart.pointer.x, this.dragStart.pointer.y);\n      // if distance is far enough, we don't want to fire click event\n      if (a.distanceFrom(b) > 3) {\n        this.dragStart = null;\n        this.dragging = true;\n      } else {\n        // this.dragging = false;\n      }\n    }\n\n    if (this.dragging) {\n      this.emit('drag');\n    } else {\n      this.emit('hover');\n    }\n  }\n\n  onShapeMouseUp() {\n    if (!this.dragging) {\n      this.emit('click');\n    } else {\n      this.emit('moved');\n    }\n    this.dragStart = null;\n    this.dragging = false;\n  }\n}\n\nexport const marker = (position, options) => new Marker(position, options);\n","import { ICON } from '../../core/Constants';\n\nexport class Icon extends fabric.Image {\n  constructor(options) {\n    super(options);\n    this.defaults = Object.assign({}, ICON);\n    Object.assign({}, this.defaults);\n    Object.assign({}, this._options);\n  }\n}\nexport const icon = (options) => new Icon(options);\n","import { Layer } from '../Layer';\nimport { Point } from '../../geometry/Point';\nimport { Group } from '../Group';\n\nexport class Polyline extends Layer {\n  constructor(_points, options) {\n    options = options || {};\n    options.points = _points || [];\n    super(options);\n    this.lines = [];\n    this.class = 'polyline';\n    this.strokeWidth = 1;\n\n    this.lineOptions = {\n      strokeWidth: this.strokeWidth,\n      stroke: this.color || 'grey',\n      fill: this.fill || false\n    };\n\n    this.shape = new Group([], {\n      selectable: false,\n      hasControls: false,\n      class: this.class,\n      parent: this\n    });\n\n    this.setPoints(this._points);\n  }\n\n  addPoint(point) {\n    this.points.push(new Point(point));\n\n    if (this.points.length > 1) {\n      const i = this.points.length - 1;\n      const j = this.points.length - 2;\n      const p1 = this.points[i];\n      const p2 = this.points[j];\n      const line = new fabric.Line(p1.getArray().concat(p2.getArray()), this.lineOptions);\n      this.lines.push(line);\n      this.shape.addWithUpdate(line);\n    }\n  }\n\n  setStrokeWidth(strokeWidth) {\n    this.lines.forEach(line => {\n      line.setStrokeWidth(strokeWidth);\n    });\n  }\n\n  setPoints(points = []) {\n    this.removeLines();\n    this.points = [];\n    for (let i = 0; i < points.length; i += 1) {\n      const point = new Point(points[i]);\n      this.points.push(point);\n      this.addPoint();\n    }\n  }\n\n  removeLines() {\n    for (let i = 0; i < this.lines.length; i += 1) {\n      this.shape.remove(this.lines[i]);\n    }\n    this.lines = [];\n  }\n}\n\nexport const polyline = (points, options) => new Polyline(points, options);\n","export class Circle extends fabric.Circle {}\n\nexport const circle = options => new Circle(options);\n","export class Rect extends fabric.Rect {\n  constructor(points, options) {\n    options = options || {};\n    options.strokeWidth = options.strokeWidth || 1;\n    options.class = 'rect';\n    super(points, options);\n    this._strokeWidth = options.strokeWidth;\n  }\n\n  _renderStroke(ctx) {\n    this.strokeWidth = this._strokeWidth / this.canvas.getZoom();\n    super._renderStroke(ctx);\n  }\n}\n\nexport const rect = (points, options) => new Rect(points, options);\n\nexport default Rect;\n","import { Rect } from '../vector';\nimport { Layer } from '../Layer';\n\nexport class MarkerGroup extends Layer {\n  constructor(bounds, options) {\n    options = options || {};\n    options.bounds = bounds;\n    options.zIndex = options.zIndex || 50;\n    options.class = 'markergroup';\n    super(options);\n    if (!this.bounds) {\n      console.error('bounds is missing!');\n      return;\n    }\n    this.style = {\n      strokeWidth: 1,\n      stroke: this.stroke || 'black',\n      fill: this.color || '#88888822',\n      class: this.class,\n      zIndex: this.zIndex,\n      parent: this\n    };\n    this.draw();\n  }\n\n  setBounds(bounds) {\n    this.bounds = bounds;\n    this.draw();\n  }\n\n  draw() {\n    const width = this.bounds[1][0] - this.bounds[0][0];\n    const height = this.bounds[1][1] - this.bounds[0][1];\n    this.coords = {\n      left: this.bounds[0][0] + width / 2,\n      top: this.bounds[0][1] + height / 2,\n      width,\n      height\n    };\n\n    if (this.shape) {\n      this.shape.set(this.coords);\n    } else {\n      Object.assign(this.style, this.coords);\n      this.shape = new Rect(this.style);\n    }\n  }\n}\nexport const markerGroup = (bounds, options) => new MarkerGroup(bounds, options);\nexport default MarkerGroup;\n","class ArrowHead extends fabric.Triangle {\n  constructor(points, options) {\n    options = options || {};\n    options.headLength = options.headLength || 10;\n    options.stroke = options.stroke || '#207cca';\n\n    const [x1, y1, x2, y2] = points;\n    const dx = x2 - x1;\n    const dy = y2 - y1;\n    let angle = Math.atan2(dy, dx);\n\n    angle *= 180 / Math.PI;\n    angle += 90;\n\n    if (options.lastAngle !== undefined) {\n      angle = options.lastAngle;\n      console.log(`Angle: ${angle}`);\n    }\n\n    super({\n      angle,\n      fill: options.stroke,\n      top: y2,\n      left: x2,\n      height: options.headLength,\n      width: options.headLength,\n      originX: 'center',\n      originY: 'center',\n      selectable: false\n    });\n  }\n}\nexport default ArrowHead;\n","import ArrowHead from './ArrowHead';\n\nexport class Arrow extends fabric.Group {\n  constructor(point, options) {\n    options = options || {};\n    options.strokeWidth = options.strokeWidth || 5;\n    options.stroke = options.stroke || '#7db9e8';\n    options.class = 'arrow';\n    super(\n      [],\n      Object.assign(options, {\n        evented: false\n      })\n    );\n    this.pointArray = [point, Object.assign({}, point)];\n    this.options = options;\n    this.draw();\n  }\n\n  draw() {\n    if (this.head) {\n      this.remove(this.head);\n    }\n\n    if (this.polyline) {\n      this.remove(this.polyline);\n    }\n\n    this.polyline = new fabric.Polyline(\n      this.pointArray,\n      Object.assign(this.options, {\n        strokeLineJoin: 'round',\n        fill: false\n      })\n    );\n\n    this.addWithUpdate(this.polyline);\n\n    const lastPoints = this.getLastPoints();\n\n    const p1 = new fabric.Point(lastPoints[0], lastPoints[1]);\n    const p2 = new fabric.Point(lastPoints[2], lastPoints[3]);\n    const dis = p1.distanceFrom(p2);\n    console.log(`dis = ${dis}`);\n\n    this.head = new ArrowHead(\n      lastPoints,\n      Object.assign(this.options, {\n        headLength: this.strokeWidth * 2,\n        lastAngle: dis <= 10 ? this.lastAngle : undefined\n      })\n    );\n\n    if (dis > 10) {\n      this.lastAngle = this.head.angle;\n    }\n    this.addWithUpdate(this.head);\n  }\n\n  addPoint(point) {\n    this.pointArray.push(point);\n    this.draw();\n  }\n\n  addTempPoint(point) {\n    const len = this.pointArray.length;\n    const lastPoint = this.pointArray[len - 1];\n    lastPoint.x = point.x;\n    lastPoint.y = point.y;\n    this.draw();\n  }\n\n  getLastPoints() {\n    const len = this.pointArray.length;\n    const point1 = this.pointArray[len - 2];\n    const point2 = this.pointArray[len - 1];\n    return [point1.x, point1.y, point2.x, point2.y];\n  }\n\n  setColor(color) {\n    this._objects.forEach(obj => {\n      obj.setColor(color);\n    });\n  }\n}\n\nexport const arrow = (points, options) => new Arrow(points, options);\n\nexport default Arrow;\n","/* eslint-disable no-unused-vars */\nimport Base from '../core/Base';\nimport { Arrow } from './Arrow';\n\nconst Modes = {\n  SELECT: 'select',\n  DRAWING: 'drawing',\n  ARROW: 'arrow',\n  TEXT: 'text'\n};\n\nexport class Canvas extends Base {\n  constructor(container, options) {\n    super(options);\n\n    this.container = container;\n\n    const canvas = document.createElement('canvas');\n    this.container.appendChild(canvas);\n    canvas.setAttribute('id', 'fabric-layers-canvas');\n\n    canvas.width = this.width || this.container.clientWidth;\n    canvas.height = this.height || this.container.clientHeight;\n\n    this.currentColor = this.currentColor || 'black';\n    this.fontFamily = this.fontFamily || 'Roboto';\n\n    this.canvas = new fabric.Canvas(canvas, {\n      freeDrawingCursor: 'none',\n      freeDrawingLineWidth: this.lineWidth\n    });\n    this.arrows = [];\n\n    this.setLineWidth(this.lineWidth || 10);\n    this.addCursor();\n    this.addListeners();\n\n    this.setModeAsArrow();\n  }\n\n  setModeAsDrawing() {\n    this.mode = Modes.DRAWING;\n    this.canvas.isDrawingMode = true;\n    this.canvas.selection = false;\n    this.onModeChanged();\n  }\n\n  isDrawingMode() {\n    return this.mode === Modes.DRAWING;\n  }\n\n  setModeAsSelect() {\n    this.mode = Modes.SELECT;\n    this.canvas.isDrawingMode = false;\n    this.canvas.selection = true;\n    this.onModeChanged();\n  }\n\n  isSelectMode() {\n    return this.mode === Modes.SELECT;\n  }\n\n  setModeAsArrow() {\n    this.mode = Modes.ARROW;\n    this.canvas.isDrawingMode = false;\n    this.canvas.selection = false;\n    this.onModeChanged();\n  }\n\n  isArrowMode() {\n    return this.mode === Modes.ARROW;\n  }\n\n  setModeAsText() {\n    this.mode = Modes.TEXT;\n    this.canvas.isDrawingMode = false;\n    this.canvas.selection = false;\n    this.onModeChanged();\n  }\n\n  isTextMode() {\n    return this.mode === Modes.TEXT;\n  }\n\n  onModeChanged() {\n    this.updateCursor();\n    this.emit('mode-changed', this.mode);\n    this.canvas._objects.forEach(obj => {\n      obj.evented = this.isSelectMode();\n    });\n  }\n\n  addListeners() {\n    const canvas = this.canvas;\n    canvas.on('mouse:move', evt => {\n      const mouse = canvas.getPointer(evt.e);\n      if (this.mousecursor) {\n        this.mousecursor\n          .set({\n            top: mouse.y,\n            left: mouse.x\n          })\n          .setCoords()\n          .canvas.renderAll();\n      }\n\n      if (this.isTextMode()) {\n        console.log('text');\n      } else if (this.isArrowMode()) {\n        if (this.activeArrow) {\n          this.activeArrow.addTempPoint(mouse);\n        }\n        this.canvas.requestRenderAll();\n      }\n    });\n\n    canvas.on('mouse:out', () => {\n      // put circle off screen\n      if (!this.mousecursor) return;\n      this.mousecursor\n        .set({\n          left: -1000,\n          top: -1000\n        })\n        .setCoords();\n\n      this.cursor.renderAll();\n    });\n\n    canvas.on('mouse:up', event => {\n      if (canvas.mouseDown) {\n        canvas.fire('mouse:click', event);\n      }\n      canvas.mouseDown = false;\n    });\n\n    canvas.on('mouse:move', event => {\n      canvas.mouseDown = false;\n    });\n\n    canvas.on('mouse:down', event => {\n      canvas.mouseDown = true;\n    });\n\n    canvas.on('mouse:click', event => {\n      console.log('mouse click', event);\n      const mouse = canvas.getPointer(event.e);\n      if (event.target) return;\n      if (this.isTextMode()) {\n        const text = new fabric.IText('Text', {\n          left: mouse.x,\n          top: mouse.y,\n          width: 100,\n          fontSize: 20,\n          fontFamily: this.fontFamily,\n          lockUniScaling: true,\n          fill: this.currentColor,\n          stroke: this.currentColor\n        });\n        canvas\n          .add(text)\n          .setActiveObject(text)\n          .renderAll();\n\n        this.setModeAsSelect();\n      } else if (this.isArrowMode()) {\n        console.log('arrow mode');\n        if (this.activeArrow) {\n          this.activeArrow.addPoint(mouse);\n        } else {\n          this.activeArrow = new Arrow(mouse, {\n            stroke: this.currentColor,\n            strokeWidth: this.lineWidth\n          });\n          this.canvas.add(this.activeArrow);\n        }\n        this.canvas.requestRenderAll();\n      }\n    });\n\n    canvas.on('mouse:dblclick', event => {\n      console.log('mouse:dbclick');\n      if (this.isArrowMode() && this.activeArrow) {\n        this.arrows.push(this.activeArrow);\n        this.activeArrow = null;\n      }\n    });\n\n    canvas.on('selection:created', event => {\n      this.emit('selected');\n    });\n\n    canvas.on('selection:cleared', event => {\n      this.emit('unselected');\n    });\n  }\n\n  removeSelected() {\n    this.canvas.remove(this.canvas.getActiveObject());\n    this.canvas.getActiveObjects().forEach(obj => {\n      this.canvas.remove(obj);\n    });\n    this.canvas.discardActiveObject().renderAll();\n  }\n\n  updateCursor() {\n    if (!this.cursor) return;\n\n    const canvas = this.canvas;\n\n    if (this.mousecursor) {\n      this.cursor.remove(this.mousecursor);\n      this.mousecursor = null;\n    }\n\n    const cursorOpacity = 0.3;\n    let mousecursor = null;\n    if (this.isDrawingMode()) {\n      mousecursor = new fabric.Circle({\n        left: -1000,\n        top: -1000,\n        radius: canvas.freeDrawingBrush.width / 2,\n        fill: `rgba(255,0,0,${cursorOpacity})`,\n        stroke: 'black',\n        originX: 'center',\n        originY: 'center'\n      });\n    } else if (this.isTextMode()) {\n      mousecursor = new fabric.Path('M0,-10 V10', {\n        left: -1000,\n        top: -1000,\n        radius: canvas.freeDrawingBrush.width / 2,\n        fill: `rgba(255,0,0,${cursorOpacity})`,\n        stroke: `rgba(0,0,0,${cursorOpacity})`,\n        originX: 'center',\n        originY: 'center',\n        scaleX: 1,\n        scaleY: 1\n      });\n    } else {\n      mousecursor = new fabric.Path('M0,-10 V10 M-10,0 H10', {\n        left: -1000,\n        top: -1000,\n        radius: canvas.freeDrawingBrush.width / 2,\n        fill: `rgba(255,0,0,${cursorOpacity})`,\n        stroke: `rgba(0,0,0,${cursorOpacity})`,\n        originX: 'center',\n        originY: 'center'\n      });\n    }\n\n    if (this.isSelectMode()) {\n      mousecursor = null;\n      this.canvas.defaultCursor = 'default';\n    } else {\n      this.canvas.defaultCursor = 'none';\n    }\n    if (mousecursor) {\n      this.cursor.add(mousecursor);\n    }\n    this.mousecursor = mousecursor;\n  }\n\n  addCursor() {\n    const canvas = this.canvas;\n    const cursorCanvas = document.createElement('canvas');\n    this.canvas.wrapperEl.appendChild(cursorCanvas);\n    cursorCanvas.setAttribute('id', 'fabric-layers-cursor-canvas');\n    cursorCanvas.style.position = 'absolute';\n    cursorCanvas.style.top = '0';\n    cursorCanvas.style.pointerEvents = 'none';\n    cursorCanvas.width = this.width || this.container.clientWidth;\n    cursorCanvas.height = this.height || this.container.clientHeight;\n    this.cursorCanvas = cursorCanvas;\n    canvas.defaultCursor = 'none';\n    this.cursor = new fabric.StaticCanvas(cursorCanvas);\n    this.updateCursor();\n  }\n\n  setColor(color) {\n    this.currentColor = color;\n    this.canvas.freeDrawingBrush.color = color;\n\n    const obj = this.canvas.getActiveObject();\n    if (obj) {\n      obj.set('stroke', color);\n      obj.set('fill', color);\n      this.canvas.requestRenderAll();\n    }\n\n    if (!this.mousecursor) return;\n\n    this.mousecursor\n      .set({\n        left: 100,\n        top: 100,\n        fill: color\n      })\n      .setCoords()\n      .canvas.renderAll();\n  }\n\n  setLineWidth(width) {\n    this.lineWidth = width;\n    this.canvas.freeDrawingBrush.width = width;\n\n    if (!this.mousecursor) return;\n\n    this.mousecursor\n      .set({\n        left: 100,\n        top: 100,\n        radius: width / 2\n      })\n      .setCoords()\n      .canvas.renderAll();\n  }\n\n  setFontFamily(family) {\n    this.fontFamily = family;\n    const obj = this.canvas.getActiveObject();\n    if (obj && obj.type === 'i-text') {\n      obj.set('fontFamily', family);\n      this.canvas.requestRenderAll();\n    }\n  }\n\n  clear() {\n    this.arrows = [];\n    this.canvas.clear();\n  }\n}\n\nexport const canvas = (container, options) => new Canvas(container, options);\n","const isNum = function (val) {\n  return typeof val === 'number' && !isNaN(val);\n};\n\nexport default (ev, toElement) => {\n  toElement = toElement || ev.currentTarget;\n\n  const toElementBoundingRect = toElement.getBoundingClientRect();\n  const orgEv = ev.originalEvent || ev;\n  const hasTouches = ev.touches && ev.touches.length;\n  let pageX = 0;\n  let pageY = 0;\n\n  if (hasTouches) {\n    if (isNum(ev.touches[0].pageX) && isNum(ev.touches[0].pageY)) {\n      pageX = ev.touches[0].pageX;\n      pageY = ev.touches[0].pageY;\n    } else if (isNum(ev.touches[0].clientX) && isNum(ev.touches[0].clientY)) {\n      pageX = orgEv.touches[0].clientX;\n      pageY = orgEv.touches[0].clientY;\n    }\n  } else if (isNum(ev.pageX) && isNum(ev.pageY)) {\n    pageX = ev.pageX;\n    pageY = ev.pageY;\n  } else if (ev.currentPoint && isNum(ev.currentPoint.x) && isNum(ev.currentPoint.y)) {\n    pageX = ev.currentPoint.x;\n    pageY = ev.currentPoint.y;\n  }\n  let isRight = false;\n  if ('which' in ev) {\n    // Gecko (Firefox), WebKit (Safari/Chrome) & Opera\n    isRight = ev.which == 3;\n  } else if ('button' in ev) {\n    // IE, Opera\n    isRight = ev.button == 2;\n  }\n\n  return {\n    x: pageX - toElementBoundingRect.left,\n    y: pageY - toElementBoundingRect.top,\n    isRight\n  };\n};\n","const stopThresholdDefault = 0.3;\nconst bounceDeceleration = 0.04;\nconst bounceAcceleration = 0.11;\n\n// fixes weird safari 10 bug where preventDefault is prevented\n// @see https://github.com/metafizzy/flickity/issues/457#issuecomment-254501356\nwindow.addEventListener('touchmove', () => {});\n\nexport default class Impetus {\n  constructor({\n    source: sourceEl = document,\n    update: updateCallback,\n    stop: stopCallback,\n    multiplier = 1,\n    friction = 0.92,\n    initialValues,\n    boundX,\n    boundY,\n    bounce = true\n  }) {\n    let boundXmin;\n    let boundXmax;\n    let boundYmin;\n    let boundYmax;\n    let pointerLastX;\n    let pointerLastY;\n    let pointerCurrentX;\n    let pointerCurrentY;\n    let pointerId;\n    let decVelX;\n    let decVelY;\n    let targetX = 0;\n    let targetY = 0;\n    let stopThreshold = stopThresholdDefault * multiplier;\n    let ticking = false;\n    let pointerActive = false;\n    let paused = false;\n    let decelerating = false;\n    let trackingPoints = [];\n\n    /**\n     * Initialize instance\n     */\n    (function init() {\n      sourceEl = typeof sourceEl === 'string' ? document.querySelector(sourceEl) : sourceEl;\n      if (!sourceEl) {\n        throw new Error('IMPETUS: source not found.');\n      }\n\n      if (!updateCallback) {\n        throw new Error('IMPETUS: update function not defined.');\n      }\n\n      if (initialValues) {\n        if (initialValues[0]) {\n          targetX = initialValues[0];\n        }\n        if (initialValues[1]) {\n          targetY = initialValues[1];\n        }\n        callUpdateCallback();\n      }\n\n      // Initialize bound values\n      if (boundX) {\n        boundXmin = boundX[0];\n        boundXmax = boundX[1];\n      }\n      if (boundY) {\n        boundYmin = boundY[0];\n        boundYmax = boundY[1];\n      }\n\n      sourceEl.addEventListener('touchstart', onDown);\n      sourceEl.addEventListener('mousedown', onDown);\n    }());\n\n    /**\n     * In edge cases where you may need to\n     * reinstanciate Impetus on the same sourceEl\n     * this will remove the previous event listeners\n     */\n    this.destroy = function () {\n      sourceEl.removeEventListener('touchstart', onDown);\n      sourceEl.removeEventListener('mousedown', onDown);\n\n      cleanUpRuntimeEvents();\n\n      // however it won't \"destroy\" a reference\n      // to instance if you'd like to do that\n      // it returns null as a convinience.\n      // ex: `instance = instance.destroy();`\n      return null;\n    };\n\n    /**\n     * Disable movement processing\n     * @public\n     */\n    this.pause = function () {\n      cleanUpRuntimeEvents();\n\n      pointerActive = false;\n      paused = true;\n    };\n\n    /**\n     * Enable movement processing\n     * @public\n     */\n    this.resume = function () {\n      paused = false;\n    };\n\n    /**\n     * Update the current x and y values\n     * @public\n     * @param {Number} x\n     * @param {Number} y\n     */\n    this.setValues = function (x, y) {\n      if (typeof x === 'number') {\n        targetX = x;\n      }\n      if (typeof y === 'number') {\n        targetY = y;\n      }\n    };\n\n    /**\n     * Update the multiplier value\n     * @public\n     * @param {Number} val\n     */\n    this.setMultiplier = function (val) {\n      multiplier = val;\n      stopThreshold = stopThresholdDefault * multiplier;\n    };\n\n    /**\n     * Update boundX value\n     * @public\n     * @param {Number[]} boundX\n     */\n    this.setBoundX = function (boundX) {\n      boundXmin = boundX[0];\n      boundXmax = boundX[1];\n    };\n\n    /**\n     * Update boundY value\n     * @public\n     * @param {Number[]} boundY\n     */\n    this.setBoundY = function (boundY) {\n      boundYmin = boundY[0];\n      boundYmax = boundY[1];\n    };\n\n    /**\n     * Removes all events set by this instance during runtime\n     */\n    function cleanUpRuntimeEvents() {\n      // Remove all touch events added during 'onDown' as well.\n      document.removeEventListener(\n        'touchmove',\n        onMove,\n        getPassiveSupported() ? { passive: false } : false\n      );\n      document.removeEventListener('touchend', onUp);\n      document.removeEventListener('touchcancel', stopTracking);\n      document.removeEventListener(\n        'mousemove',\n        onMove,\n        getPassiveSupported() ? { passive: false } : false\n      );\n      document.removeEventListener('mouseup', onUp);\n    }\n\n    /**\n     * Add all required runtime events\n     */\n    function addRuntimeEvents() {\n      cleanUpRuntimeEvents();\n\n      // @see https://developers.google.com/web/updates/2017/01/scrolling-intervention\n      document.addEventListener(\n        'touchmove',\n        onMove,\n        getPassiveSupported() ? { passive: false } : false\n      );\n      document.addEventListener('touchend', onUp);\n      document.addEventListener('touchcancel', stopTracking);\n      document.addEventListener(\n        'mousemove',\n        onMove,\n        getPassiveSupported() ? { passive: false } : false\n      );\n      document.addEventListener('mouseup', onUp);\n    }\n\n    /**\n     * Executes the update function\n     */\n    function callUpdateCallback() {\n      updateCallback.call(sourceEl, targetX, targetY);\n    }\n\n    /**\n     * Creates a custom normalized event object from touch and mouse events\n     * @param  {Event} ev\n     * @returns {Object} with x, y, and id properties\n     */\n    function normalizeEvent(ev) {\n      if (ev.type === 'touchmove' || ev.type === 'touchstart' || ev.type === 'touchend') {\n        const touch = ev.targetTouches[0] || ev.changedTouches[0];\n        return {\n          x: touch.clientX,\n          y: touch.clientY,\n          id: touch.identifier\n        };\n      }\n      // mouse events\n      return {\n        x: ev.clientX,\n        y: ev.clientY,\n        id: null\n      };\n    }\n\n    /**\n     * Initializes movement tracking\n     * @param  {Object} ev Normalized event\n     */\n    function onDown(ev) {\n      const event = normalizeEvent(ev);\n      if (!pointerActive && !paused) {\n        pointerActive = true;\n        decelerating = false;\n        pointerId = event.id;\n\n        pointerLastX = pointerCurrentX = event.x;\n        pointerLastY = pointerCurrentY = event.y;\n        trackingPoints = [];\n        addTrackingPoint(pointerLastX, pointerLastY);\n\n        addRuntimeEvents();\n      }\n    }\n\n    /**\n     * Handles move events\n     * @param  {Object} ev Normalized event\n     */\n    function onMove(ev) {\n      ev.preventDefault();\n      const event = normalizeEvent(ev);\n\n      if (pointerActive && event.id === pointerId) {\n        pointerCurrentX = event.x;\n        pointerCurrentY = event.y;\n        addTrackingPoint(pointerLastX, pointerLastY);\n        requestTick();\n      }\n    }\n\n    /**\n     * Handles up/end events\n     * @param {Object} ev Normalized event\n     */\n    function onUp(ev) {\n      const event = normalizeEvent(ev);\n\n      if (pointerActive && event.id === pointerId) {\n        stopTracking();\n      }\n    }\n\n    /**\n     * Stops movement tracking, starts animation\n     */\n    function stopTracking() {\n      pointerActive = false;\n      addTrackingPoint(pointerLastX, pointerLastY);\n      startDecelAnim();\n\n      cleanUpRuntimeEvents();\n    }\n\n    /**\n     * Records movement for the last 100ms\n     * @param {number} x\n     * @param {number} y [description]\n     */\n    function addTrackingPoint(x, y) {\n      const time = Date.now();\n      while (trackingPoints.length > 0) {\n        if (time - trackingPoints[0].time <= 100) {\n          break;\n        }\n        trackingPoints.shift();\n      }\n\n      trackingPoints.push({ x, y, time });\n    }\n\n    /**\n     * Calculate new values, call update function\n     */\n    function updateAndRender() {\n      const pointerChangeX = pointerCurrentX - pointerLastX;\n      const pointerChangeY = pointerCurrentY - pointerLastY;\n\n      targetX += pointerChangeX * multiplier;\n      targetY += pointerChangeY * multiplier;\n\n      if (bounce) {\n        const diff = checkBounds();\n        if (diff.x !== 0) {\n          targetX -= pointerChangeX * dragOutOfBoundsMultiplier(diff.x) * multiplier;\n        }\n        if (diff.y !== 0) {\n          targetY -= pointerChangeY * dragOutOfBoundsMultiplier(diff.y) * multiplier;\n        }\n      } else {\n        checkBounds(true);\n      }\n\n      callUpdateCallback();\n\n      pointerLastX = pointerCurrentX;\n      pointerLastY = pointerCurrentY;\n      ticking = false;\n    }\n\n    /**\n     * Returns a value from around 0.5 to 1, based on distance\n     * @param {Number} val\n     */\n    function dragOutOfBoundsMultiplier(val) {\n      return 0.000005 * Math.pow(val, 2) + 0.0001 * val + 0.55;\n    }\n\n    /**\n     * prevents animating faster than current framerate\n     */\n    function requestTick() {\n      if (!ticking) {\n        requestAnimFrame(updateAndRender);\n      }\n      ticking = true;\n    }\n\n    /**\n     * Determine position relative to bounds\n     * @param {Boolean} restrict Whether to restrict target to bounds\n     */\n    function checkBounds(restrict) {\n      let xDiff = 0;\n      let yDiff = 0;\n\n      if (boundXmin !== undefined && targetX < boundXmin) {\n        xDiff = boundXmin - targetX;\n      } else if (boundXmax !== undefined && targetX > boundXmax) {\n        xDiff = boundXmax - targetX;\n      }\n\n      if (boundYmin !== undefined && targetY < boundYmin) {\n        yDiff = boundYmin - targetY;\n      } else if (boundYmax !== undefined && targetY > boundYmax) {\n        yDiff = boundYmax - targetY;\n      }\n\n      if (restrict) {\n        if (xDiff !== 0) {\n          targetX = xDiff > 0 ? boundXmin : boundXmax;\n        }\n        if (yDiff !== 0) {\n          targetY = yDiff > 0 ? boundYmin : boundYmax;\n        }\n      }\n\n      return {\n        x: xDiff,\n        y: yDiff,\n        inBounds: xDiff === 0 && yDiff === 0\n      };\n    }\n\n    /**\n     * Initialize animation of values coming to a stop\n     */\n    function startDecelAnim() {\n      const firstPoint = trackingPoints[0];\n      const lastPoint = trackingPoints[trackingPoints.length - 1];\n\n      const xOffset = lastPoint.x - firstPoint.x;\n      const yOffset = lastPoint.y - firstPoint.y;\n      const timeOffset = lastPoint.time - firstPoint.time;\n\n      const D = timeOffset / 15 / multiplier;\n\n      decVelX = xOffset / D || 0; // prevent NaN\n      decVelY = yOffset / D || 0;\n\n      const diff = checkBounds();\n\n      if (Math.abs(decVelX) > 1 || Math.abs(decVelY) > 1 || !diff.inBounds) {\n        decelerating = true;\n        requestAnimFrame(stepDecelAnim);\n      } else if (stopCallback) {\n        stopCallback(sourceEl);\n      }\n    }\n\n    /**\n     * Animates values slowing down\n     */\n    function stepDecelAnim() {\n      if (!decelerating) {\n        return;\n      }\n\n      decVelX *= friction;\n      decVelY *= friction;\n\n      targetX += decVelX;\n      targetY += decVelY;\n\n      const diff = checkBounds();\n\n      if (\n        Math.abs(decVelX) > stopThreshold\n        || Math.abs(decVelY) > stopThreshold\n        || !diff.inBounds\n      ) {\n        if (bounce) {\n          const reboundAdjust = 2.5;\n\n          if (diff.x !== 0) {\n            if (diff.x * decVelX <= 0) {\n              decVelX += diff.x * bounceDeceleration;\n            } else {\n              const adjust = diff.x > 0 ? reboundAdjust : -reboundAdjust;\n              decVelX = (diff.x + adjust) * bounceAcceleration;\n            }\n          }\n          if (diff.y !== 0) {\n            if (diff.y * decVelY <= 0) {\n              decVelY += diff.y * bounceDeceleration;\n            } else {\n              const adjust = diff.y > 0 ? reboundAdjust : -reboundAdjust;\n              decVelY = (diff.y + adjust) * bounceAcceleration;\n            }\n          }\n        } else {\n          if (diff.x !== 0) {\n            if (diff.x > 0) {\n              targetX = boundXmin;\n            } else {\n              targetX = boundXmax;\n            }\n            decVelX = 0;\n          }\n          if (diff.y !== 0) {\n            if (diff.y > 0) {\n              targetY = boundYmin;\n            } else {\n              targetY = boundYmax;\n            }\n            decVelY = 0;\n          }\n        }\n\n        callUpdateCallback();\n\n        requestAnimFrame(stepDecelAnim);\n      } else {\n        decelerating = false;\n        if (stopCallback) {\n          stopCallback(sourceEl);\n        }\n      }\n    }\n  }\n}\n\n/**\n * @see http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/\n */\nconst requestAnimFrame = (function () {\n  return (\n    window.requestAnimationFrame\n    || window.webkitRequestAnimationFrame\n    || window.mozRequestAnimationFrame\n    || function (callback) {\n      window.setTimeout(callback, 1000 / 60);\n    }\n  );\n}());\n\nfunction getPassiveSupported() {\n  let passiveSupported = false;\n\n  try {\n    const options = Object.defineProperty({}, 'passive', {\n      get() {\n        passiveSupported = true;\n      }\n    });\n\n    window.addEventListener('test', null, options);\n  } catch (err) {}\n\n  getPassiveSupported = () => passiveSupported;\n  return passiveSupported;\n}\n","var rootPosition = { left: 0, top: 0 }\n\nexport default mouseEventOffset\nfunction mouseEventOffset (ev, target, out) {\n  target = target || ev.currentTarget || ev.srcElement\n  if (!Array.isArray(out)) {\n    out = [ 0, 0 ]\n  }\n  var cx = ev.clientX || 0\n  var cy = ev.clientY || 0\n  var rect = getBoundingClientOffset(target)\n  out[0] = cx - rect.left\n  out[1] = cy - rect.top\n  return out\n}\n\nfunction getBoundingClientOffset (element) {\n  if (element === window ||\n      element === document ||\n      element === document.body) {\n    return rootPosition\n  } else {\n    return element.getBoundingClientRect()\n  }\n}\n","import EventEmitter2 from 'eventemitter2';\nimport eventOffset from './mouse-event-offset';\n\nfunction distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1]\n  return Math.sqrt(x*x + y*y)\n}\n\nexport default touchPinch;\nfunction touchPinch (target) {\n  target = target || window\n\n  var emitter = new EventEmitter2()\n  var fingers = [ null, null ]\n  var activeCount = 0\n\n  var lastDistance = 0\n  var ended = false\n  var enabled = false\n\n  // some read-only values\n  Object.defineProperties(emitter, {\n    pinching(){\n      return activeCount === 2\n    },\n\n    fingers() {\n      return fingers\n    }\n  })\n\n  enable()\n  emitter.enable = enable\n  emitter.disable = disable\n  emitter.indexOfTouch = indexOfTouch\n  return emitter\n\n  function indexOfTouch (touch) {\n    var id = touch.identifier\n    for (var i = 0; i < fingers.length; i++) {\n      if (fingers[i] &&\n        fingers[i].touch &&\n        fingers[i].touch.identifier === id) {\n        return i\n      }\n    }\n    return -1\n  }\n\n  function enable () {\n    if (enabled) return\n    enabled = true\n    target.addEventListener('touchstart', onTouchStart, false)\n    target.addEventListener('touchmove', onTouchMove, false)\n    target.addEventListener('touchend', onTouchRemoved, false)\n    target.addEventListener('touchcancel', onTouchRemoved, false)\n  }\n\n  function disable () {\n    if (!enabled) return\n    enabled = false\n    activeCount = 0\n    fingers[0] = null\n    fingers[1] = null\n    lastDistance = 0\n    ended = false\n    target.removeEventListener('touchstart', onTouchStart, false)\n    target.removeEventListener('touchmove', onTouchMove, false)\n    target.removeEventListener('touchend', onTouchRemoved, false)\n    target.removeEventListener('touchcancel', onTouchRemoved, false)\n  }\n\n  function onTouchStart (ev) {\n    for (var i = 0; i < ev.changedTouches.length; i++) {\n      var newTouch = ev.changedTouches[i]\n      var id = newTouch.identifier\n      var idx = indexOfTouch(id)\n\n      if (idx === -1 && activeCount < 2) {\n        var first = activeCount === 0\n\n        // newest and previous finger (previous may be undefined)\n        var newIndex = fingers[0] ? 1 : 0\n        var oldIndex = fingers[0] ? 0 : 1\n        var newFinger = new Finger()\n\n        // add to stack\n        fingers[newIndex] = newFinger\n        activeCount++\n\n        // update touch event & position\n        newFinger.touch = newTouch\n        eventOffset(newTouch, target, newFinger.position)\n\n        var oldTouch = fingers[oldIndex] ? fingers[oldIndex].touch : undefined\n        emitter.emit('place', newTouch, oldTouch)\n\n        if (!first) {\n          var initialDistance = computeDistance()\n          ended = false\n          emitter.emit('start', initialDistance)\n          lastDistance = initialDistance\n        }\n      }\n    }\n  }\n\n  function onTouchMove (ev) {\n    var changed = false\n    for (var i = 0; i < ev.changedTouches.length; i++) {\n      var movedTouch = ev.changedTouches[i]\n      var idx = indexOfTouch(movedTouch)\n      if (idx !== -1) {\n        changed = true\n        fingers[idx].touch = movedTouch // avoid caching touches\n        eventOffset(movedTouch, target, fingers[idx].position)\n      }\n    }\n\n    if (activeCount === 2 && changed) {\n      var currentDistance = computeDistance()\n      emitter.emit('change', currentDistance, lastDistance)\n      lastDistance = currentDistance\n    }\n  }\n\n  function onTouchRemoved (ev) {\n    for (var i = 0; i < ev.changedTouches.length; i++) {\n      var removed = ev.changedTouches[i]\n      var idx = indexOfTouch(removed)\n\n      if (idx !== -1) {\n        fingers[idx] = null\n        activeCount--\n        var otherIdx = idx === 0 ? 1 : 0\n        var otherTouch = fingers[otherIdx] ? fingers[otherIdx].touch : undefined\n        emitter.emit('lift', removed, otherTouch)\n      }\n    }\n\n    if (!ended && activeCount !== 2) {\n      ended = true\n      emitter.emit('end')\n    }\n  }\n\n  function computeDistance () {\n    if (activeCount < 2) return 0\n    return distance(fingers[0].position, fingers[1].position)\n  }\n}\n\nfunction Finger () {\n  this.position = [0, 0]\n  this.touch = null\n}\n","function getPrefixed(name) {\n\treturn window['webkit' + name] || window['moz' + name] || window['ms' + name];\n}\n\nvar lastTime = 0;\n\n// fallback for IE 7-8\nfunction timeoutDefer(fn) {\n\tvar time = +new Date(),\n\t    timeToCall = Math.max(0, 16 - (time - lastTime));\n\n\tlastTime = time + timeToCall;\n\treturn window.setTimeout(fn, timeToCall);\n}\n\nexport function bind(fn, obj) {\n\tvar slice = Array.prototype.slice;\n\n\tif (fn.bind) {\n\t\treturn fn.bind.apply(fn, slice.call(arguments, 1));\n\t}\n\n\tvar args = slice.call(arguments, 2);\n\n\treturn function () {\n\t\treturn fn.apply(obj, args.length ? args.concat(slice.call(arguments)) : arguments);\n\t};\n}\n\nexport var requestFn = window.requestAnimationFrame || getPrefixed('RequestAnimationFrame') || timeoutDefer;\nexport var cancelFn = window.cancelAnimationFrame || getPrefixed('CancelAnimationFrame') ||\n\t\tgetPrefixed('CancelRequestAnimationFrame') || function (id) { window.clearTimeout(id); };\n\nconst raf = (fn, context, immediate) =>{\n\tif (immediate && requestFn === timeoutDefer) {\n\t\tfn.call(context);\n\t} else {\n\t\treturn requestFn.call(window, bind(fn, context));\n\t}\n} \n\nraf.cancel = (id) => {\n\tif (id) {\n\t\tcancelFn.call(window, id);\n\t}\n}\n\nexport default raf;","class MagicScroll {\n  constructor(target, speed = 80, smooth = 12, current = 0, passive = false) {\n    if (target === document) {\n      target = document.scrollingElement\n        || document.documentElement\n        || document.body.parentNode\n        || document.body;\n    } // cross browser support for document scrolling\n\n    this.speed = speed;\n    this.smooth = smooth;\n    this.moving = false;\n    this.scrollTop = current * 3000;\n    this.pos = this.scrollTop;\n    this.frame = target === document.body && document.documentElement ? document.documentElement : target; // safari is the new IE\n\n    target.addEventListener('wheel', scrolled, { passive });\n    target.addEventListener('DOMMouseScroll', scrolled, { passive });\n    const scope = this;\n    function scrolled(e) {\n      e.preventDefault(); // disable default scrolling\n\n      const delta = scope.normalizeWheelDelta(e);\n\n      scope.pos += -delta * scope.speed;\n      // scope.pos = Math.max(0, Math.min(scope.pos, 3000)); // limit scrolling\n\n      if (!scope.moving) scope.update(e);\n    }\n  }\n\n  normalizeWheelDelta(e) {\n    if (e.detail) {\n      if (e.wheelDelta) return (e.wheelDelta / e.detail / 40) * (e.detail > 0 ? 1 : -1);\n      // Opera\n      return -e.detail / 3; // Firefox\n    }\n    return e.wheelDelta / 120; // IE,Safari,Chrome\n  }\n\n  update(e) {\n    this.moving = true;\n\n    const delta = (this.pos - this.scrollTop) / this.smooth;\n\n    this.scrollTop += delta;\n\n    // this.scrollTop = Math.round(this.scrollTop);\n\n    if (this.onUpdate) {\n      this.onUpdate(delta, e);\n    }\n    const scope = this;\n    if (Math.abs(delta) > 1) {\n      requestFrame(() => {\n        scope.update();\n      });\n    } else this.moving = false;\n  }\n}\n\nexport default MagicScroll;\n\nvar requestFrame = (function () {\n  // requestAnimationFrame cross browser\n  return (\n    window.requestAnimationFrame\n    || window.webkitRequestAnimationFrame\n    || window.mozRequestAnimationFrame\n    || window.oRequestAnimationFrame\n    || window.msRequestAnimationFrame\n    || function (func) {\n      window.setTimeout(func, 1000);\n    }\n  );\n}());\n","import evPos from './ev-pos';\nimport Impetus from './impetus';\nimport touchPinch from './touch-pinch';\nimport raf from './raf';\nimport MagicScroll from './MagicScroll';\n\nconst panzoom = (target, cb) => {\n  if (target instanceof Function) {\n    cb = target;\n    target = document.documentElement || document.body;\n  }\n\n  if (typeof target === 'string') target = document.querySelector(target);\n\n  let cursor = {\n    x: 0,\n    y: 0\n  };\n\n  const hasPassive = () => {\n    let supported = false;\n\n    try {\n      const opts = Object.defineProperty({}, 'passive', {\n        get() {\n          supported = true;\n        }\n      });\n\n      window.addEventListener('test', null, opts);\n      window.removeEventListener('test', null, opts);\n    } catch (e) {\n      supported = false;\n    }\n\n    return supported;\n  };\n\n  let impetus;\n  let magicScroll;\n\n  let initX = 0;\n  let initY = 0;\n  let init = true;\n  const initFn = function(e) {\n    init = true;\n  };\n  target.addEventListener('mousedown', initFn);\n\n  const onMouseMove = e => {\n    cursor = evPos(e);\n  };\n\n  target.addEventListener('mousemove', onMouseMove);\n\n  const wheelListener = function(e) {\n    if (e) {\n      cursor = evPos(e);\n    }\n  };\n\n  target.addEventListener('wheel', wheelListener);\n  target.addEventListener('touchstart', initFn, hasPassive() ? { passive: true } : false);\n\n  target.addEventListener(\n    'contextmenu',\n    e => {\n      e.preventDefault();\n      return false;\n    },\n    false\n  );\n\n  let lastY = 0;\n  let lastX = 0;\n  impetus = new Impetus({\n    source: target,\n    update(x, y) {\n      if (init) {\n        init = false;\n        initX = cursor.x;\n        initY = cursor.y;\n      }\n\n      const e = {\n        target,\n        type: 'mouse',\n        dx: x - lastX,\n        dy: y - lastY,\n        dz: 0,\n        x: cursor.x,\n        y: cursor.y,\n        x0: initX,\n        y0: initY,\n        isRight: cursor.isRight\n      };\n\n      lastX = x;\n      lastY = y;\n\n      schedule(e);\n    },\n    stop() {\n      const ev = {\n        target,\n        type: 'mouse',\n        dx: 0,\n        dy: 0,\n        dz: 0,\n        x: cursor.x,\n        y: cursor.y,\n        x0: initX,\n        y0: initY\n      };\n      schedule(ev);\n    },\n    multiplier: 1,\n    friction: 0.75\n  });\n\n  magicScroll = new MagicScroll(target, 80, 12, 0);\n\n  magicScroll.onUpdate = (dy, e) => {\n    schedule({\n      target,\n      type: 'mouse',\n      dx: 0,\n      dy: 0,\n      dz: dy,\n      x: cursor.x,\n      y: cursor.y,\n      x0: cursor.x,\n      y0: cursor.y\n    });\n  };\n\n  // mobile pinch zoom\n  const pinch = touchPinch(target);\n  const mult = 2;\n  let initialCoords;\n\n  pinch.on('start', curr => {\n    const f1 = pinch.fingers[0];\n    const f2 = pinch.fingers[1];\n\n    initialCoords = [\n      f2.position[0] * 0.5 + f1.position[0] * 0.5,\n      f2.position[1] * 0.5 + f1.position[1] * 0.5\n    ];\n\n    impetus && impetus.pause();\n  });\n  pinch.on('end', () => {\n    if (!initialCoords) return;\n\n    initialCoords = null;\n\n    impetus && impetus.resume();\n  });\n  pinch.on('change', (curr, prev) => {\n    if (!pinch.pinching || !initialCoords) return;\n\n    schedule({\n      target,\n      type: 'touch',\n      dx: 0,\n      dy: 0,\n      dz: -(curr - prev) * mult,\n      x: initialCoords[0],\n      y: initialCoords[1],\n      x0: initialCoords[0],\n      y0: initialCoords[0]\n    });\n  });\n\n  // schedule function to current or next frame\n  let planned;\n  let frameId;\n  function schedule(ev) {\n    if (frameId != null) {\n      if (!planned) planned = ev;\n      else {\n        planned.dx += ev.dx;\n        planned.dy += ev.dy;\n        planned.dz += ev.dz;\n\n        planned.x = ev.x;\n        planned.y = ev.y;\n      }\n\n      return;\n    }\n\n    // Firefox sometimes does not clear webgl current drawing buffer\n    // so we have to schedule callback to the next frame, not the current\n    // cb(ev)\n\n    frameId = raf(() => {\n      cb(ev);\n      frameId = null;\n      if (planned) {\n        const arg = planned;\n        planned = null;\n        schedule(arg);\n      }\n    });\n  }\n\n  return function unpanzoom() {\n    target.removeEventListener('mousedown', initFn);\n    target.removeEventListener('mousemove', onMouseMove);\n    target.removeEventListener('touchstart', initFn);\n\n    impetus.destroy();\n\n    target.removeEventListener('wheel', wheelListener);\n\n    pinch.disable();\n\n    raf.cancel(frameId);\n  };\n};\n\nexport default panzoom;\n","import { Modes } from '../core/Constants';\n\nconst ModesMixin = superclass =>\n  class extends superclass {\n    /**\n     * MODES\n     */\n    setMode(mode) {\n      this.mode = mode;\n\n      switch (mode) {\n        case Modes.SELECT:\n          this.canvas.isDrawingMode = false;\n          this.canvas.interactive = true;\n          this.canvas.selection = true;\n          this.canvas.hoverCursor = 'default';\n          this.canvas.moveCursor = 'default';\n          break;\n        case Modes.GRAB:\n          this.canvas.isDrawingMode = false;\n          this.canvas.interactive = false;\n          this.canvas.selection = false;\n          this.canvas.discardActiveObject();\n          this.canvas.hoverCursor = 'move';\n          this.canvas.moveCursor = 'move';\n          break;\n        case Modes.MEASURE:\n          this.canvas.isDrawingMode = true;\n          this.canvas.freeDrawingBrush.color = 'transparent';\n          this.canvas.discardActiveObject();\n          break;\n        case Modes.DRAW:\n          this.canvas.isDrawingMode = true;\n          break;\n\n        default:\n          break;\n      }\n    }\n\n    setModeAsDraw() {\n      this.setMode(Modes.DRAW);\n    }\n\n    setModeAsSelect() {\n      this.setMode(Modes.SELECT);\n    }\n\n    setModeAsMeasure() {\n      this.setMode(Modes.MEASURE);\n    }\n\n    setModeAsGrab() {\n      this.setMode(Modes.GRAB);\n    }\n\n    isSelectMode() {\n      return this.mode === Modes.SELECT;\n    }\n\n    isGrabMode() {\n      return this.mode === Modes.GRAB;\n    }\n\n    isMeasureMode() {\n      return this.mode === Modes.MEASURE;\n    }\n\n    isDrawMode() {\n      return this.mode === Modes.DRAW;\n    }\n  };\n\nexport default ModesMixin;\n","import Measurer from './Measurer';\n\nclass Measurement {\n  constructor(map) {\n    this.map = map;\n    this.measurer = null;\n  }\n\n  onMouseMove(e) {\n    const point = {\n      x: e.absolutePointer.x,\n      y: e.absolutePointer.y,\n    };\n\n    if (this.measurer && !this.measurer.completed) {\n      this.measurer.setEnd(point);\n      this.map.canvas.requestRenderAll();\n    }\n  }\n\n  onClick(e) {\n    const point = {\n      x: e.absolutePointer.x,\n      y: e.absolutePointer.y,\n    };\n    if (!this.measurer) {\n      this.measurer = new Measurer({\n        start: point,\n        end: point,\n        map: this.map,\n      });\n\n      // this.map.canvas.add(this.measurer);\n    } else if (!this.measurer.completed) {\n      this.measurer.setEnd(point);\n      this.measurer.complete();\n    }\n  }\n}\n\nexport default Measurement;\n","'use strict';\n\n// used by apply() and isApplicationOf()\nconst _appliedMixin = '__mixwith_appliedMixin';\n\n/**\n * A function that returns a subclass of its argument.\n *\n * @example\n * const M = (superclass) => class extends superclass {\n *   getMessage() {\n *     return \"Hello\";\n *   }\n * }\n *\n * @typedef {Function} MixinFunction\n * @param {Function} superclass\n * @return {Function} A subclass of `superclass`\n */\n\n/**\n * Applies `mixin` to `superclass`.\n *\n * `apply` stores a reference from the mixin application to the unwrapped mixin\n * to make `isApplicationOf` and `hasMixin` work.\n *\n * This function is usefull for mixin wrappers that want to automatically enable\n * {@link hasMixin} support.\n *\n * @example\n * const Applier = (mixin) => wrap(mixin, (superclass) => apply(superclass, mixin));\n *\n * // M now works with `hasMixin` and `isApplicationOf`\n * const M = Applier((superclass) => class extends superclass {});\n *\n * class C extends M(Object) {}\n * let i = new C();\n * hasMixin(i, M); // true\n *\n * @function\n * @param {Function} superclass A class or constructor function\n * @param {MixinFunction} mixin The mixin to apply\n * @return {Function} A subclass of `superclass` produced by `mixin`\n */\nexport const apply = (superclass, mixin) => {\n  let application = mixin(superclass);\n  application.prototype[_appliedMixin] = unwrap(mixin);\n  return application;\n};\n\n/**\n * Returns `true` iff `proto` is a prototype created by the application of\n * `mixin` to a superclass.\n *\n * `isApplicationOf` works by checking that `proto` has a reference to `mixin`\n * as created by `apply`.\n *\n * @function\n * @param {Object} proto A prototype object created by {@link apply}.\n * @param {MixinFunction} mixin A mixin function used with {@link apply}.\n * @return {boolean} whether `proto` is a prototype created by the application of\n * `mixin` to a superclass\n */\nexport const isApplicationOf = (proto, mixin) =>\n  proto.hasOwnProperty(_appliedMixin) && proto[_appliedMixin] === unwrap(mixin);\n\n/**\n * Returns `true` iff `o` has an application of `mixin` on its prototype\n * chain.\n *\n * @function\n * @param {Object} o An object\n * @param {MixinFunction} mixin A mixin applied with {@link apply}\n * @return {boolean} whether `o` has an application of `mixin` on its prototype\n * chain\n */\nexport const hasMixin = (o, mixin) => {\n  while (o != null) {\n    if (isApplicationOf(o, mixin)) return true;\n    o = Object.getPrototypeOf(o);\n  }\n  return false;\n}\n\n\n// used by wrap() and unwrap()\nconst _wrappedMixin = '__mixwith_wrappedMixin';\n\n/**\n * Sets up the function `mixin` to be wrapped by the function `wrapper`, while\n * allowing properties on `mixin` to be available via `wrapper`, and allowing\n * `wrapper` to be unwrapped to get to the original function.\n *\n * `wrap` does two things:\n *   1. Sets the prototype of `mixin` to `wrapper` so that properties set on\n *      `mixin` inherited by `wrapper`.\n *   2. Sets a special property on `mixin` that points back to `mixin` so that\n *      it can be retreived from `wrapper`\n *\n * @function\n * @param {MixinFunction} mixin A mixin function\n * @param {MixinFunction} wrapper A function that wraps {@link mixin}\n * @return {MixinFunction} `wrapper`\n */\nexport const wrap = (mixin, wrapper) => {\n  Object.setPrototypeOf(wrapper, mixin);\n  if (!mixin[_wrappedMixin]) {\n    mixin[_wrappedMixin] = mixin;\n  }\n  return wrapper;\n};\n\n/**\n * Unwraps the function `wrapper` to return the original function wrapped by\n * one or more calls to `wrap`. Returns `wrapper` if it's not a wrapped\n * function.\n *\n * @function\n * @param {MixinFunction} wrapper A wrapped mixin produced by {@link wrap}\n * @return {MixinFunction} The originally wrapped mixin\n */\nexport const unwrap = (wrapper) => wrapper[_wrappedMixin] || wrapper;\n\nconst _cachedApplications = '__mixwith_cachedApplications';\n\n/**\n * Decorates `mixin` so that it caches its applications. When applied multiple\n * times to the same superclass, `mixin` will only create one subclass, memoize\n * it and return it for each application.\n *\n * Note: If `mixin` somehow stores properties its classes constructor (static\n * properties), or on its classes prototype, it will be shared across all\n * applications of `mixin` to a super class. It's reccomended that `mixin` only\n * access instance state.\n *\n * @function\n * @param {MixinFunction} mixin The mixin to wrap with caching behavior\n * @return {MixinFunction} a new mixin function\n */\nexport const Cached = (mixin) => wrap(mixin, (superclass) => {\n  // Get or create a symbol used to look up a previous application of mixin\n  // to the class. This symbol is unique per mixin definition, so a class will have N\n  // applicationRefs if it has had N mixins applied to it. A mixin will have\n  // exactly one _cachedApplicationRef used to store its applications.\n\n  let cachedApplications = superclass[_cachedApplications];\n  if (!cachedApplications) {\n    cachedApplications = superclass[_cachedApplications] = new Map();\n  }\n\n  let application = cachedApplications.get(mixin);\n  if (!application) {\n    application = mixin(superclass);\n    cachedApplications.set(mixin, application);\n  }\n\n  return application;\n});\n\n/**\n * Decorates `mixin` so that it only applies if it's not already on the\n * prototype chain.\n *\n * @function\n * @param {MixinFunction} mixin The mixin to wrap with deduplication behavior\n * @return {MixinFunction} a new mixin function\n */\nexport const DeDupe = (mixin) => wrap(mixin, (superclass) =>\n    (hasMixin(superclass.prototype, mixin))\n      ? superclass\n      : mixin(superclass));\n\n/**\n * Adds [Symbol.hasInstance] (ES2015 custom instanceof support) to `mixin`.\n *\n * @function\n * @param {MixinFunction} mixin The mixin to add [Symbol.hasInstance] to\n * @return {MixinFunction} the given mixin function\n */\nexport const HasInstance = (mixin) => {\n  if (Symbol && Symbol.hasInstance && !mixin[Symbol.hasInstance]) {\n    Object.defineProperty(mixin, Symbol.hasInstance, {\n      value(o) {\n        return hasMixin(o, mixin);\n      },\n    });\n  }\n  return mixin;\n};\n\n/**\n * A basic mixin decorator that applies the mixin with {@link apply} so that it\n * can be used with {@link isApplicationOf}, {@link hasMixin} and the other\n * mixin decorator functions.\n *\n * @function\n * @param {MixinFunction} mixin The mixin to wrap\n * @return {MixinFunction} a new mixin function\n */\nexport const BareMixin = (mixin) => wrap(mixin, (s) => apply(s, mixin));\n\n/**\n * Decorates a mixin function to add deduplication, application caching and\n * instanceof support.\n *\n * @function\n * @param {MixinFunction} mixin The mixin to wrap\n * @return {MixinFunction} a new mixin function\n */\nexport const Mixin = (mixin) => DeDupe(Cached(BareMixin(mixin)));\n\n/**\n * A fluent interface to apply a list of mixins to a superclass.\n *\n * ```javascript\n * class X extends mix(Object).with(A, B, C) {}\n * ```\n *\n * The mixins are applied in order to the superclass, so the prototype chain\n * will be: X->C'->B'->A'->Object.\n *\n * This is purely a convenience function. The above example is equivalent to:\n *\n * ```javascript\n * class X extends C(B(A(Object))) {}\n * ```\n *\n * @function\n * @param {Function} [superclass=Object]\n * @return {MixinBuilder}\n */\nexport const mix = (superclass) => new MixinBuilder(superclass);\n\nclass MixinBuilder {\n\n  constructor(superclass) {\n    this.superclass = superclass || class {};\n  }\n\n  /**\n   * Applies `mixins` in order to the superclass given to `mix()`.\n   *\n   * @param {Array.<Mixin>} mixins\n   * @return {Function} a subclass of `superclass` with `mixins` applied\n   */\n  with(...mixins) {\n    return mixins.reduce((c, m) => m(c), this.superclass);\n  }\n}","import panzoom from '../lib/panzoom';\nimport { clamp } from '../lib/mumath/index';\n\nimport Base from '../core/Base';\nimport { MAP, Modes } from '../core/Constants';\nimport Grid from '../grid/Grid';\nimport { Point } from '../geometry/Point';\nimport ModesMixin from './ModesMixin';\nimport Measurement from '../measurement/Measurement';\nimport { mix } from '../lib/mix';\n\n/**\n * CoordinatePlane (formerly Map)\n *\n * Main container component that provides a canvas with a coordinate system,\n * grid management, and layer management capabilities.\n *\n * @class\n * @extends {Base}\n * @mixes {ModesMixin}\n */\nexport class Map extends mix(Base).with(ModesMixin) {\n  /**\n   * Create a new coordinate plane\n   *\n   * @param {HTMLElement} container - The DOM element to contain the canvas\n   * @param {Object} options - Configuration options\n   * @param {Point} [options.center] - Center point of the coordinate plane\n   * @param {number} [options.zoom=1] - Initial zoom level\n   * @param {number} [options.minZoom=0] - Minimum allowed zoom level\n   * @param {number} [options.maxZoom=20] - Maximum allowed zoom level\n   * @param {boolean} [options.gridEnabled=true] - Whether to display the grid\n   * @param {boolean} [options.zoomEnabled=true] - Whether zooming is enabled\n   * @param {boolean} [options.selectEnabled=true] - Whether selection is enabled\n   * @param {string} [options.mode=Modes.SELECT] - Initial interaction mode\n   */\n  constructor(container, options) {\n    super(options);\n\n    this.defaults = Object.assign({}, MAP);\n\n    // set defaults\n    Object.assign(this, this.defaults);\n\n    // overwrite options\n    Object.assign(this, this._options);\n\n    this.center = new Point(this.center);\n\n    this.container = container || document.body;\n\n    const canvas = document.createElement('canvas');\n    this.container.appendChild(canvas);\n    canvas.setAttribute('id', 'fabric-layers-canvas');\n\n    canvas.width = this.width || this.container.clientWidth;\n    canvas.height = this.height || this.container.clientHeight;\n\n    this.canvas = new fabric.Canvas(canvas, {\n      preserveObjectStacking: true,\n      renderOnAddRemove: true\n    });\n    this.context = this.canvas.getContext('2d');\n\n    this.on('render', () => {\n      if (this.autostart) this.clear();\n    });\n\n    this.originX = -this.canvas.width / 2;\n    this.originY = -this.canvas.height / 2;\n\n    this.canvas.absolutePan({\n      x: this.originX,\n      y: this.originY\n    });\n\n    // this.center = {\n    //   x: this.canvas.width / 2.0,\n    //   y: this.canvas.height / 2.0\n    // };\n\n    this.x = this.center.x;\n    this.y = this.center.y;\n    this.dx = 0;\n    this.dy = 0;\n\n    try {\n      this.addFloorPlan();\n    } catch (e) {\n      console.error(e);\n    }\n\n    if (this.showGrid) {\n      this.addGrid();\n    }\n\n    this.setMode(this.mode || Modes.GRAB);\n\n    const vm = this;\n    panzoom(this.container, e => {\n      vm.panzoom(e);\n    });\n\n    this.registerListeners();\n\n    setTimeout(() => {\n      this.emit('ready', this);\n    }, 300);\n\n    this.measurement = new Measurement(this);\n  }\n\n  addBaseLayer() {\n    if (!this.baseLayer) return;\n    const vm = this;\n    this.baseLayer.on('load', img => {\n      vm.addLayer(img);\n    });\n  }\n\n  addLayer(layer) {\n    // this.canvas.renderOnAddRemove = false;\n    if (!layer.shape) {\n      console.error('shape is undefined');\n      return;\n    }\n    this.canvas.add(layer.shape);\n    this.canvas._objects.sort((o1, o2) => o1.zIndex - o2.zIndex);\n\n    if (layer.shape.keepOnZoom) {\n      const scale = 1.0 / this.zoom;\n      layer.shape.set('scaleX', scale);\n      layer.shape.set('scaleY', scale);\n      layer.shape.setCoords();\n      this.emit(`${layer.class}scaling`, layer);\n    }\n    if (layer.class) {\n      this.emit(`${layer.class}:added`, layer);\n    }\n\n    // this.canvas.renderOnAddRemove = true;\n\n    // this.update();\n    this.canvas.requestRenderAll();\n  }\n\n  removeLayer(layer) {\n    if (!layer || !layer.shape) return;\n    if (layer.class) {\n      this.emit(`${layer.class}:removed`, layer);\n    }\n    this.canvas.remove(layer.shape);\n  }\n\n  addGrid() {\n    this.gridCanvas = this.cloneCanvas();\n    this.gridCanvas.setAttribute('id', 'fabric-layers-grid-canvas');\n    this.grid = new Grid(this.gridCanvas, this);\n    this.grid.draw();\n  }\n\n  moveTo(obj, index) {\n    if (index !== undefined) {\n      obj.zIndex = index;\n    }\n    this.canvas.moveTo(obj.shape, obj.zIndex);\n  }\n\n  cloneCanvas(canvas) {\n    canvas = canvas || this.canvas;\n    const clone = document.createElement('canvas');\n    clone.width = canvas.width;\n    clone.height = canvas.height;\n    canvas.wrapperEl.appendChild(clone);\n    return clone;\n  }\n\n  setZoom(zoom) {\n    const { width, height } = this.canvas;\n    this.zoom = clamp(zoom, this.minZoom, this.maxZoom);\n    this.dx = 0;\n    this.dy = 0;\n    this.x = width / 2.0;\n    this.y = height / 2.0;\n    this.update();\n    process.nextTick(() => {\n      this.update();\n    });\n  }\n\n  getBounds() {\n    let minX = Infinity;\n    let maxX = -Infinity;\n    let minY = Infinity;\n    let maxY = -Infinity;\n\n    this.canvas.forEachObject(obj => {\n      const coords = obj.getBounds();\n\n      coords.forEach(point => {\n        minX = Math.min(minX, point.x);\n        maxX = Math.max(maxX, point.x);\n        minY = Math.min(minY, point.y);\n        maxY = Math.max(maxY, point.y);\n      });\n    });\n\n    return [new Point(minX, minY), new Point(maxX, maxY)];\n  }\n\n  fitBounds(padding = 100) {\n    this.onResize();\n\n    const { width, height } = this.canvas;\n\n    this.originX = -this.canvas.width / 2;\n    this.originY = -this.canvas.height / 2;\n\n    const bounds = this.getBounds();\n\n    this.center.x = (bounds[0].x + bounds[1].x) / 2.0;\n    this.center.y = -(bounds[0].y + bounds[1].y) / 2.0;\n\n    const boundWidth = Math.abs(bounds[0].x - bounds[1].x) + padding;\n    const boundHeight = Math.abs(bounds[0].y - bounds[1].y) + padding;\n    const scaleX = width / boundWidth;\n    const scaleY = height / boundHeight;\n\n    this.zoom = Math.min(scaleX, scaleY);\n\n    this.canvas.setZoom(this.zoom);\n\n    this.canvas.absolutePan({\n      x: this.originX + this.center.x * this.zoom,\n      y: this.originY - this.center.y * this.zoom\n    });\n\n    this.update();\n    process.nextTick(() => {\n      this.update();\n    });\n  }\n\n  setCursor(cursor) {\n    this.container.style.cursor = cursor;\n  }\n\n  reset() {\n    const { width, height } = this.canvas;\n    this.zoom = this._options.zoom || 1;\n    this.center = new Point();\n    this.originX = -this.canvas.width / 2;\n    this.originY = -this.canvas.height / 2;\n    this.canvas.absolutePan({\n      x: this.originX,\n      y: this.originY\n    });\n    this.x = width / 2.0;\n    this.y = height / 2.0;\n    this.update();\n    process.nextTick(() => {\n      this.update();\n    });\n  }\n\n  onResize(width, height) {\n    const oldWidth = this.canvas.width;\n    const oldHeight = this.canvas.height;\n\n    width = width || this.container.clientWidth;\n    height = height || this.container.clientHeight;\n\n    this.canvas.setWidth(width);\n    this.canvas.setHeight(height);\n\n    if (this.grid) {\n      this.grid.setSize(width, height);\n    }\n\n    const dx = width / 2.0 - oldWidth / 2.0;\n    const dy = height / 2.0 - oldHeight / 2.0;\n\n    this.canvas.relativePan({\n      x: dx,\n      y: dy\n    });\n\n    this.update();\n  }\n\n  update() {\n    const canvas = this.canvas;\n\n    if (this.grid) {\n      this.grid.update2({\n        x: this.center.x,\n        y: this.center.y,\n        zoom: this.zoom\n      });\n    }\n    this.emit('update', this);\n    if (this.grid) {\n      this.grid.render();\n    }\n\n    canvas.zoomToPoint(new Point(this.x, this.y), this.zoom);\n\n    if (this.isGrabMode() || this.isRight) {\n      canvas.relativePan(new Point(this.dx, this.dy));\n      this.emit('panning');\n      this.setCursor('grab');\n    } else {\n      this.setCursor('pointer');\n    }\n\n    const now = Date.now();\n    if (!this.lastUpdatedTime && Math.abs(this.lastUpdatedTime - now) < 100) {\n      return;\n    }\n    this.lastUpdatedTime = now;\n\n    const objects = canvas.getObjects();\n    let hasKeepZoom = false;\n    for (let i = 0; i < objects.length; i += 1) {\n      const object = objects[i];\n      if (object.keepOnZoom) {\n        object.set('scaleX', 1.0 / this.zoom);\n        object.set('scaleY', 1.0 / this.zoom);\n        object.setCoords();\n        hasKeepZoom = true;\n        this.emit(`${object.class}scaling`, object);\n      }\n    }\n    if (hasKeepZoom) canvas.requestRenderAll();\n  }\n\n  panzoom(e) {\n    // enable interactions\n    const { width, height } = this.canvas;\n    // shift start\n    const zoom = clamp(-e.dz, -height * 0.75, height * 0.75) / height;\n\n    const prevZoom = 1 / this.zoom;\n    let curZoom = prevZoom * (1 - zoom);\n    curZoom = clamp(curZoom, this.minZoom, this.maxZoom);\n\n    let { x, y } = this.center;\n\n    // pan\n    const oX = 0.5;\n    const oY = 0.5;\n    if (this.isGrabMode() || e.isRight) {\n      x -= prevZoom * e.dx;\n      y += prevZoom * e.dy;\n      this.setCursor('grab');\n    } else {\n      this.setCursor('pointer');\n    }\n\n    if (this.zoomEnabled) {\n      const tx = e.x / width - oX;\n      x -= width * (curZoom - prevZoom) * tx;\n      const ty = oY - e.y / height;\n      y -= height * (curZoom - prevZoom) * ty;\n    }\n    this.center.setX(x);\n    this.center.setY(y);\n    this.zoom = 1 / curZoom;\n    this.dx = e.dx;\n    this.dy = e.dy;\n    this.x = e.x0;\n    this.y = e.y0;\n    this.isRight = e.isRight;\n    this.isRight = e.isRight;\n    this.update();\n  }\n\n  setView(view) {\n    this.dx = 0;\n    this.dy = 0;\n    this.x = 0;\n    this.y = 0;\n    view.y *= -1;\n\n    const dx = this.center.x - view.x;\n    const dy = -this.center.y + view.y;\n\n    this.center.copy(view);\n\n    this.canvas.relativePan(new Point(dx * this.zoom, dy * this.zoom));\n\n    this.canvas.renderAll();\n\n    this.update();\n\n    process.nextTick(() => {\n      this.update();\n    });\n  }\n\n  registerListeners() {\n    const vm = this;\n\n    this.canvas.on('object:scaling', e => {\n      if (e.target.class) {\n        vm.emit(`${e.target.class}:scaling`, e.target.parent);\n        e.target.parent.emit('scaling', e.target.parent);\n        return;\n      }\n      const group = e.target;\n      if (!group.getObjects) return;\n\n      const objects = group.getObjects();\n      group.removeWithUpdate();\n      for (let i = 0; i < objects.length; i += 1) {\n        const object = objects[i];\n        object.orgYaw = object.parent.yaw || 0;\n        object.fire('moving', object.parent);\n        vm.emit(`${object.class}:moving`, object.parent);\n      }\n      vm.update();\n      vm.canvas.requestRenderAll();\n    });\n\n    this.canvas.on('object:rotating', e => {\n      if (e.target.class) {\n        vm.emit(`${e.target.class}:rotating`, e.target.parent, e.target.angle);\n        e.target.parent.emit('rotating', e.target.parent, e.target.angle);\n        return;\n      }\n      const group = e.target;\n      if (!group.getObjects) return;\n      const objects = group.getObjects();\n      for (let i = 0; i < objects.length; i += 1) {\n        const object = objects[i];\n        if (object.class === 'marker') {\n          object._set('angle', -group.angle);\n          object.parent.yaw = -group.angle + (object.orgYaw || 0);\n          // object.orgYaw = object.parent.yaw;\n          object.fire('moving', object.parent);\n          vm.emit(`${object.class}:moving`, object.parent);\n          object.fire('rotating', object.parent);\n          vm.emit(`${object.class}:rotating`, object.parent);\n        }\n      }\n      this.update();\n    });\n\n    this.canvas.on('object:moving', e => {\n      if (e.target.class) {\n        vm.emit(`${e.target.class}:moving`, e.target.parent);\n        e.target.parent.emit('moving', e.target.parent);\n        return;\n      }\n      const group = e.target;\n      if (!group.getObjects) return;\n      const objects = group.getObjects();\n      for (let i = 0; i < objects.length; i += 1) {\n        const object = objects[i];\n        if (object.class) {\n          object.fire('moving', object.parent);\n          vm.emit(`${object.class}:moving`, object.parent);\n        }\n      }\n      this.update();\n    });\n\n    this.canvas.on('object:moved', e => {\n      if (e.target.class) {\n        vm.emit(`${e.target.class}dragend`, e);\n        vm.emit(`${e.target.class}:moved`, e.target.parent);\n        e.target.parent.emit('moved', e.target.parent);\n        this.update();\n        return;\n      }\n      const group = e.target;\n      if (!group.getObjects) return;\n      const objects = group.getObjects();\n      for (let i = 0; i < objects.length; i += 1) {\n        const object = objects[i];\n        if (object.class) {\n          object.fire('moved', object.parent);\n          vm.emit(`${object.class}:moved`, object.parent);\n        }\n      }\n      this.update();\n    });\n\n    this.canvas.on('selection:cleared', e => {\n      const objects = e.deselected;\n      if (!objects || !objects.length) return;\n      for (let i = 0; i < objects.length; i += 1) {\n        const object = objects[i];\n        if (object.class === 'marker') {\n          object._set('angle', 0);\n          object._set('scaleX', 1 / vm.zoom);\n          object._set('scaleY', 1 / vm.zoom);\n          if (object.parent) {\n            object.parent.inGroup = false;\n          }\n          object.fire('moving', object.parent);\n        }\n      }\n    });\n    this.canvas.on('selection:created', e => {\n      const objects = e.selected;\n      if (!objects || objects.length < 2) return;\n      for (let i = 0; i < objects.length; i += 1) {\n        const object = objects[i];\n        if (object.class && object.parent) {\n          object.parent.inGroup = true;\n          object.orgYaw = object.parent.yaw || 0;\n        }\n      }\n    });\n    this.canvas.on('selection:updated', e => {\n      const objects = e.selected;\n      if (!objects || objects.length < 2) return;\n      for (let i = 0; i < objects.length; i += 1) {\n        const object = objects[i];\n        if (object.class && object.parent) {\n          object.parent.inGroup = true;\n          object.orgYaw = object.parent.yaw || 0;\n        }\n      }\n    });\n\n    this.canvas.on('mouse:down', e => {\n      vm.dragObject = e.target;\n    });\n\n    this.canvas.on('mouse:move', e => {\n      if (this.isMeasureMode()) {\n        this.measurement.onMouseMove(e);\n      }\n      if (vm.dragObject && vm.dragObject.clickable) {\n        if (vm.dragObject === e.target) {\n          vm.dragObject.dragging = true;\n        } else {\n          vm.dragObject.dragging = false;\n        }\n      }\n      this.isRight = false;\n      if ('which' in e.e) {\n        // Gecko (Firefox), WebKit (Safari/Chrome) & Opera\n        this.isRight = e.e.which === 3;\n      } else if ('button' in e.e) {\n        // IE, Opera\n        this.isRight = e.e.button === 2;\n      }\n\n      vm.emit('mouse:move', e);\n    });\n\n    this.canvas.on('mouse:up', e => {\n      if (this.isMeasureMode()) {\n        this.measurement.onClick(e);\n      }\n\n      this.isRight = false;\n      this.dx = 0;\n      this.dy = 0;\n\n      if (!vm.dragObject || !e.target || !e.target.selectable) {\n        e.target = null;\n        vm.emit('mouse:click', e);\n      }\n      if (vm.dragObject && vm.dragObject.clickable) {\n        if (vm.dragObject !== e.target) return;\n        if (!vm.dragObject.dragging && !vm.modeToggleByKey) {\n          vm.emit(`${vm.dragObject.class}:click`, vm.dragObject.parent);\n        }\n        vm.dragObject.dragging = false;\n      }\n      vm.dragObject = null;\n    });\n\n    window.addEventListener('resize', () => {\n      vm.onResize();\n    });\n\n    // document.addEventListener('keyup', () => {\n    //   if (this.modeToggleByKey && this.isGrabMode()) {\n    //     this.setModeAsSelect();\n    //     this.modeToggleByKey = false;\n    //   }\n    // });\n\n    // document.addEventListener('keydown', event => {\n    //   if (event.ctrlKey || event.metaKey) {\n    //     if (this.isSelectMode()) {\n    //       this.setModeAsGrab();\n    //     }\n    //     this.modeToggleByKey = true;\n    //   }\n    // });\n  }\n\n  unregisterListeners() {\n    this.canvas.off('object:moving');\n    this.canvas.off('object:moved');\n  }\n\n  getMarkerById(id) {\n    const objects = this.canvas.getObjects();\n    for (let i = 0; i < objects.length; i += 1) {\n      const obj = objects[i];\n      if (obj.class === 'marker' && obj.id === id) {\n        return obj.parent;\n      }\n    }\n    return null;\n  }\n\n  getMarkers() {\n    const list = [];\n    const objects = this.canvas.getObjects();\n    for (let i = 0; i < objects.length; i += 1) {\n      const obj = objects[i];\n      if (obj.class === 'marker') {\n        list.push(obj.parent);\n      }\n    }\n    return list;\n  }\n}\n\nexport const map = (container, options) => new Map(container, options);\n","import { Point } from '../geometry/Point';\nimport { Group } from '../layer/Group';\nimport { Layer } from '../layer/Layer';\n\n/**\n * ImageLayer - A layer for displaying and manipulating images\n *\n * This component provides functionality for loading and managing images\n * within the coordinate plane. It supports image loading, positioning,\n * scaling, and other transformations.\n *\n * @class\n * @extends {Layer}\n */\nexport class ImageLayer extends Layer {\n  /**\n   * Create a new ImageLayer\n   *\n   * @param {Object} options - Configuration options\n   * @param {string} options.url - URL of the image to load\n   * @param {Point|Object} [options.position] - Position of the image (x,y coordinates)\n   * @param {number} [options.width=-1] - Width of the image (-1 for auto)\n   * @param {number} [options.height=-1] - Height of the image (-1 for auto)\n   * @param {number} [options.opacity=1] - Opacity of the image (0-1)\n   * @param {boolean} [options.draggable=false] - Whether the image can be dragged\n   * @param {number} [options.zIndex=1] - Z-index for layer stacking order\n   * @param {string} [options.id] - Unique identifier for the layer\n   */\n  constructor(options) {\n    super(options);\n\n    this.width = this.width || -1;\n    this.height = this.height || -1;\n\n    this.position = new Point(this.position);\n\n    this.class = 'image-layer';\n\n    this.load();\n  }\n\n  /**\n   * Load the image from the provided URL\n   *\n   * Creates a fabric.js Image object from the URL and sets up event handlers\n   * for when the image is loaded. Auto-scales the image if width/height are not specified.\n   *\n   * @returns {void}\n   */\n  load() {\n    const vm = this;\n    const index = this.url.lastIndexOf('.');\n    const ext = index > 0 ? this.url.substring(index + 1) : '';\n\n    if (ext === 'svg') {\n      fabric.loadSVGFromURL(this.url, (objects, options) => {\n        const shape = fabric.util.groupSVGElements(objects, options);\n        vm.onLoad(shape);\n      });\n    } else {\n      fabric.Image.fromURL(this.url, img => {\n        vm.onLoad(img);\n      });\n    }\n\n    return this;\n  }\n\n  /**\n   * Handles the loaded image\n   * @param {Object} shape The loaded image object\n   */\n  onLoad(shape) {\n    const group = new Group({\n      label: this.label,\n      zIndex: this.zIndex,\n      selectable: false,\n      subTargetCheck: true,\n      width: shape.width || 0,\n      height: shape.height || 0\n    });\n\n    group.add(shape);\n\n    if (this.width < 0) {\n      this.width = shape.width || 0;\n    }\n\n    if (this.height < 0) {\n      this.height = shape.height || 0;\n    }\n\n    this.width = parseFloat(this.width);\n    this.height = parseFloat(this.height);\n\n    if (this.width > 0 && this.height > 0) {\n      if (this.keepRatio) {\n        const widthScale = this.width / shape.width;\n        const heightScale = this.height / shape.height;\n\n        const minScale = Math.min(widthScale, heightScale);\n\n        shape.scale(minScale);\n      } else {\n        shape.scaleToWidth(this.width);\n        shape.scaleToHeight(this.height);\n      }\n\n      this.width = shape.getScaledWidth();\n      this.height = shape.getScaledHeight();\n    } else {\n      this.width = shape.width;\n      this.height = shape.height;\n    }\n\n    this.shape = shape;\n    this.group = group;\n\n    shape.lockMovementX = true;\n    shape.lockMovementY = true;\n    shape.hoverCursor = 'default';\n\n    this.canvas = shape.canvas;\n\n    this.bindEvents();\n\n    this.fire('load', this);\n  }\n\n  /**\n   * Bind events to the image\n   */\n  bindEvents() {\n    const vm = this;\n\n    this.shape.on('mousedown', e => {\n      vm.fire('mousedown', e);\n    });\n\n    this.shape.on('mousemove', e => {\n      vm.fire('mousemove', e);\n    });\n\n    this.shape.on('mouseup', e => {\n      vm.fire('mouseup', e);\n    });\n\n    this.shape.on('mouseover', e => {\n      vm.fire('mouseover', e);\n    });\n\n    this.shape.on('mouseout', e => {\n      vm.fire('mouseout', e);\n    });\n  }\n\n  /**\n   * Get the bounds of the image\n   * @returns {Object} The bounds of the image\n   */\n  getBounds() {\n    return {\n      width: this.width,\n      height: this.height\n    };\n  }\n}\n\n/**\n * Factory function to create an ImageLayer\n * @param {Object} options Configuration options\n * @returns {ImageLayer} A new ImageLayer instance\n */\nexport const imageLayer = options => new ImageLayer(options);\n","/**\n * fabric-layers-react\n * A fabric.js coordinate-plane (grid) & layers library for React\n */\n\nimport fabric from 'fabric-pure-browser';\nimport * as fabricLayers from 'fabric-layers';\nimport { version } from '../package.json';\nimport Grid from './grid/Grid';\n// Import but don't re-export legacy renamed components to avoid naming conflicts\nimport './floorplan/index';\n\n// Log version information in development only\nif (process.env.NODE_ENV !== 'production') {\n  console.log('fabric-layers-react', version);\n  console.log('fabric-layers', fabricLayers.version);\n  console.log('fabric.js', fabric.version);\n}\n\n/**\n * Library Version\n */\nexport { version };\n\n/**\n * Core Components and Constants\n */\nexport * from './core/index';\n\n/**\n * Geometry Utilities\n */\nexport * from './geometry/index';\n\n/**\n * Grid System\n * @deprecated Use GridSystem instead of Grid for new projects\n */\nexport * from './grid/index';\nexport { Grid as GridSystem };\n\n/**\n * Layer System\n */\nexport * from './layer/index';\n\n/**\n * Canvas Utilities\n */\nexport * from './paint/index';\n\n/**\n * Coordinate Plane (formerly Map)\n * @deprecated Use CoordinatePlane instead of Map for new projects\n */\nexport { Map as CoordinatePlane } from './map/Map';\n\n/**\n * Measurement Tools\n */\nexport * from './measurement/index';\n\n/**\n * Image Handling\n */\nexport * from './image/index';\n\n/**\n * Legacy Components\n * @deprecated These will be removed in a future version\n */\nexport * from './map/index';\n"],"names":["global","Grid","CoreGrid","constructor","canvas","opts","context","getContext","state","setDefaults","update","render","draw","getCenterCoords","x","width","height","shape","pt","pr","pb","pl","padding","axisCoords","opposite","coordinate","getCoords","axisOrigin","y","setSize","setWidth","setHeight","calcCoordinate","axisX","axisY","emit","update2","center","Object","assign","offset","zoom","coord","grid","range","getRange","clamp","Math","max","min","Number","MAX_VALUE","axisColor","alpha","color","axisWidth","lineWidth","tickAlign","labelColor","Array","fill","Function","fontSize","units","parseUnit","toPx","fontFamily","lines","lineColor","lineColors","isArray","length","ticks","tick","labels","isObj","keys","forEach","value","push","parseFloat","label","pixelRatio","window","devicePixelRatio","autostart","interactions","defaults","type","name","minZoom","Infinity","maxZoom","origin","zoomEnabled","panEnabled","distance","style","axis","getRatio","format","v","gridStyle","_options","Axis","orientation","values","coords","i","t","Point","clearRect","drawLines","ctx","left","top","axisRatio","j","strokeStyle","beginPath","x1","y1","x2","y2","moveTo","lineTo","stroke","closePath","normals","xDif","yDif","dist","len","tickCoords","labelCoords","k","almost","drawLabels","font","fillStyle","textBaseline","textHeight","indent","textOffset","isOpp","disabled","textWidth","measureText","textLeft","textTop","fillText","CorePoint","copy","point","getArray","Group","CoreGroup","objects","options","getBounds","Layer","CoreLayer","undefined","draggable","zIndex","opacity","keepOnZoom","clickable","hoverCursor","moveCursor","class","parent","id","hasControls","hasBorders","lockMovementX","lockMovementY","evented","selectable","setOptions","key","set","renderAll","addTo","map","_map","removeLayer","addLayer","position","ICON","url","size","anchor","fabric","prototype","originX","originY","lockUniScaling","lockScalingFlip","transparentCorners","centeredScaling","cornerColor","borderColor","borderOpacity","cornerOpacity","cornerStrokeColor","objectCaching","selectionBackgroundColor","borderDashArray","CanvasLayer","CoreCanvasLayer","props","canvasRef","React","createRef","initCanvas","current","clearCanvas","resizeCanvas","parentElement","clientWidth","clientHeight","componentDidMount","addEventListener","bind","componentWillUnmount","removeEventListener","_this$props","className","otherProps","_objectWithoutProperties","_excluded","createElement","_objectSpread","ref","display","Line","points","strokeWidth","_strokeWidth","_renderStroke","getZoom","setCoords","line","Connector","CoreConnector","start","end","console","error","registerListeners","vm","on","redraw","setStart","setEnd","setColor","setStrokeWidth","Tooltip","content","textColor","textObj","Text","init","process","Marker","rotation","yaw","text","angle","icon","Image","fromURL","image","scaleToWidth","circle","Circle","radius","links","addLinks","onShapeDrag","e","onShapeMouseDown","onShapeMouseMove","onShapeMouseUp","setPosition","setRotation","setTextColor","setStroke","setText","setLinks","setRadius","connectors","link","connector","addConnectors","onAdded","matrix","calcTransformMatrix","dragStart","a","pointer","b","distanceFrom","dragging","marker","Icon","Polyline","_points","lineOptions","setPoints","addPoint","p1","p2","concat","addWithUpdate","removeLines","remove","polyline","Rect","rect","MarkerGroup","bounds","setBounds","markerGroup","ArrowHead","Triangle","headLength","dx","dy","atan2","PI","lastAngle","log","Arrow","pointArray","head","strokeLineJoin","lastPoints","getLastPoints","dis","addTempPoint","lastPoint","point1","point2","_objects","obj","Modes","SELECT","DRAWING","ARROW","TEXT","Canvas","Base","container","document","appendChild","setAttribute","currentColor","freeDrawingCursor","freeDrawingLineWidth","arrows","setLineWidth","addCursor","addListeners","setModeAsArrow","setModeAsDrawing","mode","isDrawingMode","selection","onModeChanged","setModeAsSelect","isSelectMode","isArrowMode","setModeAsText","isTextMode","updateCursor","evt","mouse","getPointer","mousecursor","activeArrow","requestRenderAll","cursor","event","mouseDown","fire","target","IText","add","setActiveObject","removeSelected","getActiveObject","getActiveObjects","discardActiveObject","cursorOpacity","freeDrawingBrush","Path","scaleX","scaleY","defaultCursor","cursorCanvas","wrapperEl","pointerEvents","StaticCanvas","setFontFamily","family","clear","isNum","val","isNaN","ev","toElement","currentTarget","toElementBoundingRect","getBoundingClientRect","orgEv","originalEvent","hasTouches","touches","pageX","pageY","clientX","clientY","currentPoint","isRight","which","button","stopThresholdDefault","bounceDeceleration","bounceAcceleration","Impetus","source","sourceEl","updateCallback","stop","stopCallback","multiplier","friction","initialValues","boundX","boundY","bounce","boundXmin","boundXmax","boundYmin","boundYmax","pointerLastX","pointerLastY","pointerCurrentX","pointerCurrentY","pointerId","decVelX","decVelY","targetX","targetY","stopThreshold","ticking","pointerActive","paused","decelerating","trackingPoints","querySelector","Error","callUpdateCallback","onDown","destroy","cleanUpRuntimeEvents","pause","resume","setValues","setMultiplier","setBoundX","setBoundY","onMove","getPassiveSupported","passive","onUp","stopTracking","addRuntimeEvents","call","normalizeEvent","touch","targetTouches","changedTouches","identifier","addTrackingPoint","preventDefault","requestTick","startDecelAnim","time","Date","now","shift","updateAndRender","pointerChangeX","pointerChangeY","diff","checkBounds","dragOutOfBoundsMultiplier","pow","requestAnimFrame","restrict","xDiff","yDiff","inBounds","firstPoint","xOffset","yOffset","timeOffset","D","abs","stepDecelAnim","reboundAdjust","adjust","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","callback","setTimeout","passiveSupported","defineProperty","get","err","rootPosition","mouseEventOffset","out","srcElement","cx","cy","getBoundingClientOffset","element","body","sqrt","touchPinch","emitter","EventEmitter2","fingers","activeCount","lastDistance","ended","enabled","defineProperties","pinching","enable","disable","indexOfTouch","onTouchStart","onTouchMove","onTouchRemoved","newTouch","idx","first","newIndex","oldIndex","newFinger","Finger","eventOffset","oldTouch","initialDistance","computeDistance","changed","movedTouch","currentDistance","removed","otherIdx","otherTouch","getPrefixed","lastTime","timeoutDefer","fn","timeToCall","slice","apply","arguments","args","requestFn","cancelFn","cancelAnimationFrame","clearTimeout","raf","immediate","cancel","MagicScroll","speed","smooth","scrollingElement","documentElement","parentNode","moving","scrollTop","pos","frame","scrolled","scope","delta","normalizeWheelDelta","detail","wheelDelta","onUpdate","requestFrame","oRequestAnimationFrame","msRequestAnimationFrame","func","panzoom","cb","hasPassive","supported","impetus","magicScroll","initX","initY","initFn","onMouseMove","evPos","wheelListener","lastY","lastX","dz","x0","y0","schedule","pinch","mult","initialCoords","curr","f1","f2","prev","planned","frameId","arg","unpanzoom","ModesMixin","superclass","setMode","interactive","GRAB","MEASURE","DRAW","setModeAsDraw","setModeAsMeasure","setModeAsGrab","isGrabMode","isMeasureMode","isDrawMode","Measurement","measurer","absolutePointer","completed","onClick","Measurer","complete","mix","MixinBuilder","with","mixins","reduce","c","m","Map","MAP","preserveObjectStacking","renderOnAddRemove","absolutePan","addFloorPlan","showGrid","addGrid","measurement","addBaseLayer","baseLayer","img","layer","sort","o1","o2","scale","gridCanvas","cloneCanvas","index","clone","setZoom","minX","maxX","minY","maxY","forEachObject","fitBounds","onResize","boundWidth","boundHeight","setCursor","reset","oldWidth","oldHeight","relativePan","zoomToPoint","lastUpdatedTime","getObjects","hasKeepZoom","object","prevZoom","curZoom","oX","oY","tx","ty","setX","setY","setView","view","group","removeWithUpdate","orgYaw","_set","deselected","inGroup","selected","dragObject","modeToggleByKey","unregisterListeners","off","getMarkerById","getMarkers","list","ImageLayer","load","lastIndexOf","ext","substring","loadSVGFromURL","util","groupSVGElements","onLoad","subTargetCheck","keepRatio","widthScale","heightScale","minScale","scaleToHeight","getScaledWidth","getScaledHeight","bindEvents","imageLayer","env","NODE_ENV","version","fabricLayers"],"mappings":"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","x_google_ignoreList":[0,1]}