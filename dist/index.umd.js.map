{"version":3,"file":"index.umd.js","sources":["../node_modules/rollup-plugin-node-globals/src/global.js","../node_modules/process-es6/browser.js","../src/lib/color-alpha.js","../src/core/Base.js","../src/lib/mumath/clamp.js","../src/lib/mumath/len.js","../src/lib/mumath/almost.js","../src/lib/mumath/range.js","../src/lib/mumath/log10.js","../src/lib/mumath/is-multiple.js","../src/lib/mumath/scale.js","../src/lib/mumath/parse-unit.js","../src/lib/mumath/to-px.js","../src/lib/mumath/is-plain-obj.js","../src/grid/gridStyle.js","../src/grid/Axis.js","../src/geometry/Point.js","../src/grid/Grid.js","../src/layer/Group.js","../src/layer/Layer.js","../src/core/Constants.js","../src/grid/GridManager.js","../src/layer/CanvasLayer.js","../src/layer/vector/Line.js","../src/layer/Connector.js","../src/layer/Tooltip.js","../src/layer/LayerManager.js","../src/layer/marker/Marker.js","../src/layer/marker/Icon.js","../src/layer/vector/Polyline.js","../src/layer/vector/Circle.js","../src/layer/vector/Rect.js","../src/layer/marker/MarkerGroup.js","../src/paint/ArrowHead.js","../src/paint/Arrow.js","../src/paint/Canvas.js","../src/lib/ev-pos.js","../src/lib/impetus.js","../src/lib/mouse-event-offset.js","../src/lib/touch-pinch.js","../src/lib/raf.js","../src/lib/MagicScroll.js","../src/lib/panzoom.js","../src/map/ModesMixin.js","../src/measurement/Measurer.js","../src/measurement/Measurement.js","../src/lib/mix.js","../src/map/Map.js","../src/image/ImageLayer.js","../src/index.js"],"sourcesContent":["export default (typeof global !== \"undefined\" ? global :\n            typeof self !== \"undefined\" ? self :\n            typeof window !== \"undefined\" ? window : {});\n","// shim for using process in browser\n// based off https://github.com/defunctzombie/node-process/blob/master/browser.js\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\nvar cachedSetTimeout = defaultSetTimout;\nvar cachedClearTimeout = defaultClearTimeout;\nif (typeof global.setTimeout === 'function') {\n    cachedSetTimeout = setTimeout;\n}\nif (typeof global.clearTimeout === 'function') {\n    cachedClearTimeout = clearTimeout;\n}\n\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\nexport function nextTick(fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n}\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nexport var title = 'browser';\nexport var platform = 'browser';\nexport var browser = true;\nexport var env = {};\nexport var argv = [];\nexport var version = ''; // empty string to avoid regexp issues\nexport var versions = {};\nexport var release = {};\nexport var config = {};\n\nfunction noop() {}\n\nexport var on = noop;\nexport var addListener = noop;\nexport var once = noop;\nexport var off = noop;\nexport var removeListener = noop;\nexport var removeAllListeners = noop;\nexport var emit = noop;\n\nexport function binding(name) {\n    throw new Error('process.binding is not supported');\n}\n\nexport function cwd () { return '/' }\nexport function chdir (dir) {\n    throw new Error('process.chdir is not supported');\n};\nexport function umask() { return 0; }\n\n// from https://github.com/kumavis/browser-process-hrtime/blob/master/index.js\nvar performance = global.performance || {}\nvar performanceNow =\n  performance.now        ||\n  performance.mozNow     ||\n  performance.msNow      ||\n  performance.oNow       ||\n  performance.webkitNow  ||\n  function(){ return (new Date()).getTime() }\n\n// generate timestamp or delta\n// see http://nodejs.org/api/process.html#process_process_hrtime\nexport function hrtime(previousTimestamp){\n  var clocktime = performanceNow.call(performance)*1e-3\n  var seconds = Math.floor(clocktime)\n  var nanoseconds = Math.floor((clocktime%1)*1e9)\n  if (previousTimestamp) {\n    seconds = seconds - previousTimestamp[0]\n    nanoseconds = nanoseconds - previousTimestamp[1]\n    if (nanoseconds<0) {\n      seconds--\n      nanoseconds += 1e9\n    }\n  }\n  return [seconds,nanoseconds]\n}\n\nvar startTime = new Date();\nexport function uptime() {\n  var currentTime = new Date();\n  var dif = currentTime - startTime;\n  return dif / 1000;\n}\n\nexport default {\n  nextTick: nextTick,\n  title: title,\n  browser: browser,\n  env: env,\n  argv: argv,\n  version: version,\n  versions: versions,\n  on: on,\n  addListener: addListener,\n  once: once,\n  off: off,\n  removeListener: removeListener,\n  removeAllListeners: removeAllListeners,\n  emit: emit,\n  binding: binding,\n  cwd: cwd,\n  chdir: chdir,\n  umask: umask,\n  hrtime: hrtime,\n  platform: platform,\n  release: release,\n  config: config,\n  uptime: uptime\n};\n","export default alpha;\n\nfunction alpha (color, value) {\n\tlet obj = color.replace(/[^\\d,]/g, '').split(',');\n  if (value == null) value = obj[3] || 1;\n  obj[3] = value;\n\treturn 'rgba('+obj.join(',')+')';\n}\n","import EventEmitter2 from 'eventemitter2';\n\nclass Base extends EventEmitter2 {\n  constructor(options) {\n    super(options);\n    this._options = options || {};\n    Object.assign(this, options);\n  }\n}\n\nexport default Base;\n","/**\n * Clamp value.\n * Detects proper clamp min/max.\n *\n * @param {number} a Current value to cut off\n * @param {number} min One side limit\n * @param {number} max Other side limit\n *\n * @return {number} Clamped value\n */\n\nfunction clamp(a, min, max) {\n\treturn max > min ? Math.max(Math.min(a,max),min) : Math.max(Math.min(a,min),max);\n};\n\nexport default clamp;\n","/**\n * Return quadratic length\n *\n * @module  mumath/len\n *\n */\n\nexport default function len(a, b) {\n\treturn Math.sqrt(a*a + b*b);\n};\n","\n// Type definitions for almost-equal 1.1\n// Project: https://github.com/mikolalysenko/almost-equal#readme\n// Definitions by: Curtis Maddalozzo <https://github.com/cmaddalozzo>\n// Definitions: https://github.com/DefinitelyTyped/DefinitelyTyped\n\nvar abs = Math.abs;\nvar min = Math.min;\n\nfunction almostEqual(a, b, absoluteError, relativeError) {\n  var d = abs(a - b)\n  \n  if (absoluteError == null) absoluteError = almostEqual.DBL_EPSILON;\n  if (relativeError == null) relativeError = absoluteError;\n  \n  if(d <= absoluteError) {\n    return true\n  }\n  if(d <= relativeError * min(abs(a), abs(b))) {\n    return true\n  }\n  return a === b\n}\n\nexport const FLT_EPSILON = 1.19209290e-7\nexport const DBL_EPSILON = 2.2204460492503131e-16\n\nalmostEqual.FLT_EPSILON = FLT_EPSILON;\nalmostEqual.DBL_EPSILON = DBL_EPSILON;\n\nexport default almostEqual;","// The MIT License (MIT)\n\n// Copyright (c) 2016 angus croll\n\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\n\n/*\n  range(0, 5); // [0, 1, 2, 3, 4]\n  range(5); // [0, 1, 2, 3, 4]\n  range(-5); // [0, -1, -2, -3, -4]\n  range(0, 20, 5) // [0, 5, 10, 15]\n  range(0, -20, -5) // [0, -5, -10, -15]\n*/\n\nexport default function range(start, stop, step) {\n  if (start != null && typeof start != 'number') {\n    throw new Error('start must be a number or null');\n  }\n  if (stop != null && typeof stop != 'number') {\n    throw new Error('stop must be a number or null');\n  }\n  if (step != null && typeof step != 'number') {\n    throw new Error('step must be a number or null');\n  }\n  if (stop == null) {\n    stop = start || 0;\n    start = 0;\n  }\n  if (step == null) {\n    step = stop > start ? 1 : -1;\n  }\n  var toReturn = [];\n  var increasing = start < stop; //← here’s the change\n  for (; increasing ? start < stop : start > stop; start += step) {\n    toReturn.push(start);\n  }\n  return toReturn;\n}","/**\n * Base 10 logarithm\n *\n * @module mumath/log10\n */\n'use strict';\nexport default Math.log10 || function (a) {\n\treturn Math.log(a) / Math.log(10);\n};\n","/**\n * Check if one number is multiple of other\n *\n * @module  mumath/is-multiple\n */\n\nimport almost from './almost';\n\nexport default function isMultiple(a, b, eps) {\n\tvar remainder = a % b;\n\n\tif (!eps) eps = almost.FLT_EPSILON;\n\n\tif (!remainder) return true;\n\tif (almost(0, remainder, eps, 0) || almost(Math.abs(b), Math.abs(remainder), eps, 0)) return true;\n\n\treturn false;\n}\n","/**\n * Get step out of the set\n *\n * @module mumath/step\n */\n'use strict';\n\nimport lg from './log10';\n\nexport default function (minStep, srcSteps) {\n\tvar power = Math.floor(lg(minStep));\n\n\tvar order = Math.pow(10, power);\n\tvar steps = srcSteps.map(v => v*order);\n\torder = Math.pow(10, power+1);\n\tsteps = steps.concat(srcSteps.map(v => v*order));\n\n\t//find closest scale\n\tvar step = 0;\n\tfor (var i = 0; i < steps.length; i++) {\n\t\tstep = steps[i];\n\t\tif (step >= minStep) break;\n\t}\n\n\treturn step;\n};\n","export default (str, out) => {\n  if (!out)\n      out = [ 0, '' ]\n\n  str = String(str)\n  var num = parseFloat(str, 10)\n  out[0] = num\n  out[1] = str.match(/[\\d.\\-\\+]*\\s*(.*)/)[1] || ''\n  return out\n}","// (c) 2015 Mikola Lysenko. MIT License\n// https://github.com/mikolalysenko/to-px\n\nimport parseUnit from './parse-unit';\n\nvar PIXELS_PER_INCH = 96\n\nvar defaults = {\n  'ch': 8,\n  'ex': 7.15625,\n  'em': 16,\n  'rem': 16,\n  'in': PIXELS_PER_INCH,\n  'cm': PIXELS_PER_INCH / 2.54,\n  'mm': PIXELS_PER_INCH / 25.4,\n  'pt': PIXELS_PER_INCH / 72,\n  'pc': PIXELS_PER_INCH / 6,\n  'px': 1\n}\n\nexport default function toPX(str) {\n  if (!str) return null\n\n  if (defaults[str]) return defaults[str]\n\n  // detect number of units\n  var parts = parseUnit(str)\n  if (!isNaN(parts[0]) && parts[1]) {\n    var px = toPX(parts[1])\n    return typeof px === 'number' ? parts[0] * px : null;\n  }\n\n  return null;\n}","/**\n * MIT © Sindre Sorhus\n * https://github.com/sindresorhus/is-plain-obj/blob/master/index.js\n */\nexport default (value) => {\n\tif (Object.prototype.toString.call(value) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tconst prototype = Object.getPrototypeOf(value);\n\treturn prototype === null || prototype === Object.getPrototypeOf({});\n};\n","/* eslint-disable consistent-return */\nimport alpha from '../lib/color-alpha';\nimport {\n  range, almost, scale, isMultiple, lg\n} from '../lib/mumath/index';\n\nconst gridStyle = {\n  steps: [1, 2, 5],\n  distance: 20,\n  unit: 10,\n  lines: (state) => {\n    const coord = state.coordinate;\n    // eslint-disable-next-line no-multi-assign\n    const step = state.step = scale(coord.distance * coord.zoom, coord.steps);\n    return range(Math.floor(state.offset / step) * step,\n      Math.ceil((state.offset + state.range) / step + 1) * step, step);\n  },\n  lineColor: (state) => {\n    if (!state.lines) return;\n    const coord = state.coordinate;\n\n    const light = alpha(coord.color, 0.1);\n    const heavy = alpha(coord.color, 0.3);\n\n    const step = state.step;\n    const power = Math.ceil(lg(step));\n    const tenStep = 10 ** power;\n    const nextStep = 10 ** (power + 1);\n    const eps = step / 10;\n    const colors = state.lines.map(v => {\n      if (isMultiple(v, nextStep, eps)) return heavy;\n      if (isMultiple(v, tenStep, eps)) return light;\n      return null;\n    });\n    return colors;\n  },\n  ticks: state => {\n    if (!state.lines) return;\n    const coord = state.coordinate;\n    const step = scale(scale(state.step * 1.1, coord.steps) * 1.1, coord.steps);\n    const eps = step / 10;\n    const tickWidth = state.axisWidth * 4;\n    return state.lines.map(v => {\n      if (!isMultiple(v, step, eps)) return null;\n      if (almost(v, 0, eps)) return null;\n      return tickWidth;\n    });\n  },\n  labels: state => {\n    if (!state.lines) return;\n    const coord = state.coordinate;\n\n    const step = scale(scale(state.step * 1.1, coord.steps) * 1.1, coord.steps);\n    // let precision = clamp(Math.abs(Math.floor(lg(step))), 10, 20);\n    const eps = step / 100;\n    return state.lines.map(v => {\n      if (!isMultiple(v, step, eps)) return null;\n      if (almost(v, 0, eps)) return coord.orientation === 'y' ? null : '0';\n      v = Number((v / 100).toFixed(2));\n      return coord.format(v);\n    });\n  }\n};\n\nexport default gridStyle;\n","class Axis {\n  constructor(orientation, options) {\n    Object.assign(this, options);\n    this.orientation = orientation || 'x';\n  }\n\n  getCoords(values) {\n    const coords = [];\n    if (!values) return coords;\n    for (let i = 0; i < values.length; i += 1) {\n      const t = this.getRatio(values[i]);\n      coords.push(t);\n      coords.push(0);\n      coords.push(t);\n      coords.push(1);\n    }\n    return coords;\n  }\n\n  getRange() {\n    let len = this.width;\n    if (this.orientation === 'y') len = this.height;\n    return len * this.zoom;\n  }\n\n  getRatio(value) {\n    return (value - this.offset) / this.range;\n  }\n\n  setOffset(offset) {\n    this.offset = offset;\n  }\n\n  update(options) {\n    options = options || {};\n    Object.assign(this, options);\n\n    this.range = this.getRange();\n  }\n}\nexport default Axis;\n","export class Point extends fabric.Point {\n  constructor(...params) {\n    let x;\n    let y;\n    if (params.length > 1) {\n      [x, y] = params;\n    } else if (params.length === 0 || !params[0]) {\n      [x, y] = [0, 0];\n    } else if (Object.prototype.hasOwnProperty.call(params[0], 'x')) {\n      x = params[0].x;\n      y = params[0].y;\n    } else if (params[0].length) {\n      [[x, y]] = params;\n    } else {\n      console.error(\n        'Parameter for Point is not valid. Use Point(x,y) or Point({x,y}) or Point([x,y])',\n        params\n      );\n    }\n\n    super(x, y);\n  }\n\n  setX(x) {\n    this.x = x || 0;\n  }\n\n  setY(y) {\n    this.y = y || 0;\n  }\n\n  copy(point) {\n    this.x = point.x;\n    this.y = point.y;\n  }\n\n  getArray() {\n    return [this.x, this.y];\n  }\n}\n\nexport const point = (...params) => new Point(...params);\n","import alpha from '../lib/color-alpha';\nimport Base from '../core/Base';\nimport {\n  clamp, almost, len, parseUnit, toPx, isObj\n} from '../lib/mumath/index';\nimport gridStyle from './gridStyle';\nimport Axis from './Axis';\nimport { Point } from '../geometry/Point';\n\n/**\n * Grid - Provides a coordinate grid system for the coordinate plane\n *\n * Handles drawing grid lines, labels, and axes based on the current\n * coordinate plane state and viewport.\n *\n * @class\n * @extends {Base}\n */\nclass Grid extends Base {\n  /**\n   * Create a new grid\n   *\n   * @param {HTMLCanvasElement} canvas - Canvas element to draw the grid on\n   * @param {Object} opts - Grid configuration options\n   * @param {string} [opts.color='#cccccc'] - Grid line color\n   * @param {number} [opts.opacity=0.5] - Grid line opacity\n   * @param {string} [opts.axisColor='#999999'] - Axis line color\n   * @param {number} [opts.spacing=10] - Grid line spacing\n   * @param {boolean} [opts.showLabels=true] - Whether to show grid labels\n   * @param {boolean} [opts.visible=true] - Whether the grid is visible\n   */\n  constructor(canvas, opts) {\n    super(opts);\n    this.canvas = canvas;\n    this.context = this.canvas.getContext('2d');\n    this.state = {};\n    this.setDefaults();\n    this.update(opts);\n  }\n\n  /**\n   * Render the grid to the canvas\n   *\n   * @returns {Grid} This grid instance for chaining\n   */\n  render() {\n    this.draw();\n    return this;\n  }\n\n  getCenterCoords() {\n    let state = this.state.x;\n    let [width, height] = state.shape;\n    let [pt, pr, pb, pl] = state.padding;\n    let axisCoords = state.opposite.coordinate.getCoords(\n      [state.coordinate.axisOrigin],\n      state.opposite\n    );\n    const y = pt + axisCoords[1] * (height - pt - pb);\n    state = this.state.y;\n    [width, height] = state.shape;\n    [pt, pr, pb, pl] = state.padding;\n    axisCoords = state.opposite.coordinate.getCoords([state.coordinate.axisOrigin], state.opposite);\n    const x = pl + axisCoords[0] * (width - pr - pl);\n    return { x, y };\n  }\n\n  setSize(width, height) {\n    this.setWidth(width);\n    this.setHeight(height);\n  }\n\n  setWidth(width) {\n    this.canvas.width = width;\n  }\n\n  setHeight(height) {\n    this.canvas.height = height;\n  }\n\n  // re-evaluate lines, calc options for renderer\n  update(opts) {\n    if (!opts) opts = {};\n    const shape = [this.canvas.width, this.canvas.height];\n\n    // recalc state\n    this.state.x = this.calcCoordinate(this.axisX, shape, this);\n    this.state.y = this.calcCoordinate(this.axisY, shape, this);\n    this.state.x.opposite = this.state.y;\n    this.state.y.opposite = this.state.x;\n    this.emit('update', opts);\n    return this;\n  }\n\n  // re-evaluate lines, calc options for renderer\n  update2(center) {\n    const shape = [this.canvas.width, this.canvas.height];\n    Object.assign(this.center, center);\n    // recalc state\n    this.state.x = this.calcCoordinate(this.axisX, shape, this);\n    this.state.y = this.calcCoordinate(this.axisY, shape, this);\n    this.state.x.opposite = this.state.y;\n    this.state.y.opposite = this.state.x;\n    this.emit('update', center);\n\n    this.axisX.offset = center.x;\n    this.axisX.zoom = 1 / center.zoom;\n\n    this.axisY.offset = center.y;\n    this.axisY.zoom = 1 / center.zoom;\n  }\n\n  // get state object with calculated params, ready for rendering\n  calcCoordinate(coord, shape) {\n    const state = {\n      coordinate: coord,\n      shape,\n      grid: this\n    };\n    // calculate real offset/range\n    state.range = coord.getRange(state);\n    state.offset = clamp(\n      coord.offset - state.range * clamp(0.5, 0, 1),\n      Math.max(coord.min, -Number.MAX_VALUE + 1),\n      Math.min(coord.max, Number.MAX_VALUE) - state.range\n    );\n\n    state.zoom = coord.zoom;\n    // calc style\n    state.axisColor = typeof coord.axisColor === 'number'\n      ? alpha(coord.color, coord.axisColor)\n      : coord.axisColor || coord.color;\n\n    state.axisWidth = coord.axisWidth || coord.lineWidth;\n    state.lineWidth = coord.lineWidth;\n    state.tickAlign = coord.tickAlign;\n    state.labelColor = state.color;\n    // get padding\n    if (typeof coord.padding === 'number') {\n      state.padding = Array(4).fill(coord.padding);\n    } else if (coord.padding instanceof Function) {\n      state.padding = coord.padding(state);\n    } else {\n      state.padding = coord.padding;\n    }\n    // calc font\n    if (typeof coord.fontSize === 'number') {\n      state.fontSize = coord.fontSize;\n    } else {\n      const units = parseUnit(coord.fontSize);\n      state.fontSize = units[0] * toPx(units[1]);\n    }\n    state.fontFamily = coord.fontFamily || 'sans-serif';\n    // get lines stops, including joined list of values\n    let lines;\n    if (coord.lines instanceof Function) {\n      lines = coord.lines(state);\n    } else {\n      lines = coord.lines || [];\n    }\n    state.lines = lines;\n    // calc colors\n    if (coord.lineColor instanceof Function) {\n      state.lineColors = coord.lineColor(state);\n    } else if (Array.isArray(coord.lineColor)) {\n      state.lineColors = coord.lineColor;\n    } else {\n      let color = alpha(coord.color, coord.lineColor);\n      if (typeof coord.lineColor !== 'number') {\n        color = coord.lineColor === false || coord.lineColor == null ? null : coord.color;\n      }\n      state.lineColors = Array(lines.length).fill(color);\n    }\n    // calc ticks\n    let ticks;\n    if (coord.ticks instanceof Function) {\n      ticks = coord.ticks(state);\n    } else if (Array.isArray(coord.ticks)) {\n      ticks = coord.ticks;\n    } else {\n      const tick = coord.ticks === true || coord.ticks === true\n        ? state.axisWidth * 2 : coord.ticks || 0;\n      ticks = Array(lines.length).fill(tick);\n    }\n    state.ticks = ticks;\n    // calc labels\n    let labels;\n    if (coord.labels === true) labels = state.lines;\n    else if (coord.labels instanceof Function) {\n      labels = coord.labels(state);\n    } else if (Array.isArray(coord.labels)) {\n      labels = coord.labels;\n    } else if (isObj(coord.labels)) {\n      labels = coord.labels;\n    } else {\n      labels = Array(state.lines.length).fill(null);\n    }\n    state.labels = labels;\n    // convert hashmap ticks/labels to lines + colors\n    if (isObj(ticks)) {\n      state.ticks = Array(lines.length).fill(0);\n    }\n    if (isObj(labels)) {\n      state.labels = Array(lines.length).fill(null);\n    }\n    if (isObj(ticks)) {\n      // eslint-disable-next-line guard-for-in\n      Object.keys(ticks).forEach((value, tick) => {\n        state.ticks.push(tick);\n        state.lines.push(parseFloat(value));\n        state.lineColors.push(null);\n        state.labels.push(null);\n      });\n    }\n\n    if (isObj(labels)) {\n      Object.keys(labels).forEach((label, value) => {\n        state.labels.push(label);\n        state.lines.push(parseFloat(value));\n        state.lineColors.push(null);\n        state.ticks.push(null);\n      });\n    }\n\n    return state;\n  }\n\n  setDefaults() {\n    this.pixelRatio = window.devicePixelRatio;\n    this.autostart = true;\n    this.interactions = true;\n\n    this.defaults = Object.assign(\n      {\n        type: 'linear',\n        name: '',\n        units: '',\n        state: {},\n\n        // visible range params\n        minZoom: -Infinity,\n        maxZoom: Infinity,\n        min: -Infinity,\n        max: Infinity,\n        offset: 0,\n        origin: 0.5,\n        center: {\n          x: 0,\n          y: 0,\n          zoom: 1\n        },\n        zoom: 1,\n        zoomEnabled: true,\n        panEnabled: true,\n\n        // labels\n        labels: true,\n        fontSize: '11pt',\n        fontFamily: 'sans-serif',\n        padding: 0,\n        color: 'rgb(0,0,0,1)',\n\n        // lines params\n        lines: true,\n        tick: 8,\n        tickAlign: 0.5,\n        lineWidth: 1,\n        distance: 13,\n        style: 'lines',\n        lineColor: 0.4,\n\n        // axis params\n        axis: true,\n        axisOrigin: 0,\n        axisWidth: 2,\n        axisColor: 0.8,\n\n        // stub methods\n        // return coords for the values, redefined by axes\n        getCoords: () => [0, 0, 0, 0],\n\n        // return 0..1 ratio based on value/offset/range, redefined by axes\n        getRatio: () => 0,\n\n        // default label formatter\n        format: v => v\n      },\n      gridStyle,\n      this._options\n    );\n\n    this.axisX = new Axis('x', this.defaults);\n    this.axisY = new Axis('y', this.defaults);\n\n    this.axisX = Object.assign({}, this.defaults, {\n      orientation: 'x',\n      offset: this.center.x,\n      getCoords: (values, state) => {\n        const coords = [];\n        if (!values) return coords;\n        for (let i = 0; i < values.length; i += 1) {\n          const t = state.coordinate.getRatio(values[i], state);\n          coords.push(t);\n          coords.push(0);\n          coords.push(t);\n          coords.push(1);\n        }\n        return coords;\n      },\n      getRange: state => state.shape[0] * state.coordinate.zoom,\n      // FIXME: handle infinity case here\n      getRatio: (value, state) => (value - state.offset) / state.range\n    });\n    this.axisY = Object.assign({}, this.defaults, {\n      orientation: 'y',\n      offset: this.center.y,\n      getCoords: (values, state) => {\n        const coords = [];\n        if (!values) return coords;\n        for (let i = 0; i < values.length; i += 1) {\n          const t = state.coordinate.getRatio(values[i], state);\n          coords.push(0);\n          coords.push(t);\n          coords.push(1);\n          coords.push(t);\n        }\n        return coords;\n      },\n      getRange: state => state.shape[1] * state.coordinate.zoom,\n      getRatio: (value, state) => 1 - (value - state.offset) / state.range\n    });\n\n    Object.assign(this, this.defaults);\n    Object.assign(this, this._options);\n\n    this.center = new Point(this.center);\n  }\n\n  // draw grid to the canvas\n  draw() {\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    this.drawLines(this.state.x);\n    this.drawLines(this.state.y);\n    return this;\n  }\n\n  // lines instance draw\n  drawLines(state) {\n    // draw lines and sublines\n    if (!state || !state.coordinate) return;\n\n    const ctx = this.context;\n    const [width, height] = state.shape;\n    const left = 0;\n    const top = 0;\n    const [pt, pr, pb, pl] = state.padding;\n\n    let axisRatio = state.opposite.coordinate.getRatio(state.coordinate.axisOrigin, state.opposite);\n    axisRatio = clamp(axisRatio, 0, 1);\n    const coords = state.coordinate.getCoords(state.lines, state);\n    // draw state.lines\n    ctx.lineWidth = 1; // state.lineWidth/2.;\n    for (let i = 0, j = 0; i < coords.length; i += 4, j += 1) {\n      const color = state.lineColors[j];\n      if (!color) continue;\n      ctx.strokeStyle = color;\n      ctx.beginPath();\n      const x1 = left + pl + coords[i] * (width - pr - pl);\n      const y1 = top + pt + coords[i + 1] * (height - pb - pt);\n      const x2 = left + pl + coords[i + 2] * (width - pr - pl);\n      const y2 = top + pt + coords[i + 3] * (height - pb - pt);\n      ctx.moveTo(x1, y1);\n      ctx.lineTo(x2, y2);\n      ctx.stroke();\n      ctx.closePath();\n    }\n    const normals = [];\n    for (let i = 0; i < coords.length; i += 4) {\n      const x1 = coords[i];\n      const y1 = coords[i + 1];\n      const x2 = coords[i + 2];\n      const y2 = coords[i + 3];\n      const xDif = x2 - x1;\n      const yDif = y2 - y1;\n      const dist = len(xDif, yDif);\n      normals.push(xDif / dist);\n      normals.push(yDif / dist);\n    }\n    // calc state.labels/tick coords\n    const tickCoords = [];\n    state.labelCoords = [];\n    const ticks = state.ticks;\n    for (let i = 0, j = 0, k = 0; i < normals.length; k += 1, i += 2, j += 4) {\n      const x1 = coords[j];\n      const y1 = coords[j + 1];\n      const x2 = coords[j + 2];\n      const y2 = coords[j + 3];\n      const xDif = (x2 - x1) * axisRatio;\n      const yDif = (y2 - y1) * axisRatio;\n      const tick = [\n        (normals[i] * ticks[k]) / (width - pl - pr),\n        (normals[i + 1] * ticks[k]) / (height - pt - pb)\n      ];\n      tickCoords.push(normals[i] * (xDif + tick[0] * state.tickAlign) + x1);\n      tickCoords.push(normals[i + 1] * (yDif + tick[1] * state.tickAlign) + y1);\n      tickCoords.push(normals[i] * (xDif - tick[0] * (1 - state.tickAlign)) + x1);\n      tickCoords.push(normals[i + 1] * (yDif - tick[1] * (1 - state.tickAlign)) + y1);\n      state.labelCoords.push(normals[i] * xDif + x1);\n      state.labelCoords.push(normals[i + 1] * yDif + y1);\n    }\n    // draw ticks\n    if (ticks.length) {\n      ctx.lineWidth = state.axisWidth / 2;\n      ctx.beginPath();\n      for (let i = 0, j = 0; i < tickCoords.length; i += 4, j += 1) {\n        if (almost(state.lines[j], state.opposite.coordinate.axisOrigin)) continue;\n        const x1 = left + pl + tickCoords[i] * (width - pl - pr);\n        const y1 = top + pt + tickCoords[i + 1] * (height - pt - pb);\n        const x2 = left + pl + tickCoords[i + 2] * (width - pl - pr);\n        const y2 = top + pt + tickCoords[i + 3] * (height - pt - pb);\n        ctx.moveTo(x1, y1);\n        ctx.lineTo(x2, y2);\n      }\n      ctx.strokeStyle = state.axisColor;\n      ctx.stroke();\n      ctx.closePath();\n    }\n    // draw axis\n    if (state.coordinate.axis && state.axisColor) {\n      const axisCoords = state.opposite.coordinate.getCoords(\n        [state.coordinate.axisOrigin],\n        state.opposite\n      );\n      ctx.lineWidth = state.axisWidth / 2;\n      const x1 = left + pl + clamp(axisCoords[0], 0, 1) * (width - pr - pl);\n      const y1 = top + pt + clamp(axisCoords[1], 0, 1) * (height - pt - pb);\n      const x2 = left + pl + clamp(axisCoords[2], 0, 1) * (width - pr - pl);\n      const y2 = top + pt + clamp(axisCoords[3], 0, 1) * (height - pt - pb);\n      ctx.beginPath();\n      ctx.moveTo(x1, y1);\n      ctx.lineTo(x2, y2);\n      ctx.strokeStyle = state.axisColor;\n      ctx.stroke();\n      ctx.closePath();\n    }\n    // draw state.labels\n    this.drawLabels(state);\n  }\n\n  drawLabels(state) {\n    if (state.labels) {\n      const ctx = this.context;\n      const [width, height] = state.shape;\n      const [pt, pr, pb, pl] = state.padding;\n\n      ctx.font = `300 ${state.fontSize}px ${state.fontFamily}`;\n      ctx.fillStyle = state.labelColor;\n      ctx.textBaseline = 'top';\n      const textHeight = state.fontSize;\n      const indent = state.axisWidth + 1.5;\n      const textOffset = state.tickAlign < 0.5\n        ? -textHeight - state.axisWidth * 2 : state.axisWidth * 2;\n      const isOpp = state.coordinate.orientation === 'y' && !state.opposite.disabled;\n      for (let i = 0; i < state.labels.length; i += 1) {\n        let label = state.labels[i];\n        if (label == null) continue;\n\n        if (isOpp && almost(state.lines[i], state.opposite.coordinate.axisOrigin)) continue;\n\n        const textWidth = ctx.measureText(label).width;\n\n        let textLeft = state.labelCoords[i * 2] * (width - pl - pr) + indent + pl;\n\n        if (state.coordinate.orientation === 'y') {\n          textLeft = clamp(textLeft, indent, width - textWidth - 1 - state.axisWidth);\n          label *= -1;\n        }\n\n        let textTop = state.labelCoords[i * 2 + 1] * (height - pt - pb) + textOffset + pt;\n        if (state.coordinate.orientation === 'x') {\n          textTop = clamp(textTop, 0, height - textHeight - textOffset);\n        }\n        ctx.fillText(label, textLeft, textTop);\n      }\n    }\n  }\n}\n\nexport default Grid;\n","import { Point } from '../geometry/Point';\n\nexport class Group extends fabric.Group {\n  constructor(objects, options) {\n    options = options || {};\n    super(objects, options);\n  }\n\n  getBounds() {\n    const coords = [];\n    coords.push(new Point(this.left - this.width / 2.0, this.top - this.height / 2.0));\n    coords.push(new Point(this.left + this.width / 2.0, this.top + this.height / 2.0));\n    return coords;\n  }\n}\n\nexport const group = (objects, options) => new Group(objects, options);\n\nexport default Group;\n","import Base from '../core/Base';\n\n/**\n * Layer - Base class for all layer components\n *\n * Provides the fundamental properties and methods for manipulating layers\n * within a coordinate plane or canvas.\n *\n * @class\n * @extends {Base}\n */\nexport class Layer extends Base {\n  /**\n   * Create a new layer\n   *\n   * @param {Object} options - Layer configuration options\n   * @param {string} [options.label=null] - Display label for the layer\n   * @param {boolean} [options.draggable=false] - Whether the layer can be dragged\n   * @param {number} [options.zIndex=1] - Z-index for layer stacking order\n   * @param {number} [options.opacity=1] - Layer opacity (0-1)\n   * @param {boolean} [options.keepOnZoom=false] - Whether to maintain size when zooming\n   * @param {boolean} [options.clickable=false] - Whether the layer responds to clicks\n   * @param {string} [options.hoverCursor] - Cursor to display on hover\n   * @param {string} [options.moveCursor='move'] - Cursor to display when moving\n   * @param {string} [options.id] - Unique identifier for the layer\n   * @param {string} [options.class] - CSS class name for the layer\n   */\n  constructor(options) {\n    super(options);\n    this.label = this.label !== undefined ? this.label : null;\n    this.draggable = this.draggable || false;\n    this.zIndex = this.zIndex || 1;\n    this.opacity = this.opacity || 1;\n    this.keepOnZoom = this.keepOnZoom || false;\n    this.clickable = this.clickable || false;\n\n    this.hoverCursor = this.hoverCursor || this.clickable ? 'pointer' : 'default';\n    this.moveCursor = this.moveCursor || 'move';\n\n    // this.class = this.class || this.constructor.name.toLowerCase();\n\n    this.style = {\n      zIndex: this.zIndex,\n      class: this.class,\n      parent: this,\n      keepOnZoom: this.keepOnZoom,\n      id: this.id,\n      hasControls: false,\n      hasBorders: false,\n      lockMovementX: !this.draggable,\n      lockMovementY: !this.draggable,\n      draggable: this.draggable,\n      clickable: this.clickable,\n      evented: this.clickable,\n      selectable: this.draggable,\n      hoverCursor: this.hoverCursor,\n      moveCursor: this.moveCursor\n    };\n  }\n\n  setOptions(options) {\n    if (!this.shape) return;\n    Object.keys(options).forEach(key => {\n      this.shape.set(key, options[key]);\n    });\n    if (this.shape.canvas) {\n      this.shape.canvas.renderAll();\n    }\n  }\n\n  addTo(map) {\n    if (!map) {\n      if (this._map) {\n        this._map.removeLayer(this);\n      }\n      return;\n    }\n    this._map = map;\n    this._map.addLayer(this);\n  }\n}\n\nexport const layer = options => new Layer(options);\n\nexport default Layer;\n","import { Point } from '../geometry/Point.js';\n\nexport const Modes = {\n  SELECT: 'SELECT',\n  GRAB: 'GRAB',\n  MEASURE: 'MEASURE',\n  DRAW: 'DRAW'\n};\n\nexport const MAP = {\n  center: new Point(),\n  zoom: 1,\n  minZoom: 0,\n  maxZoom: 20,\n  gridEnabled: true,\n  zoomEnabled: true,\n  selectEnabled: true,\n  mode: Modes.SELECT,\n  showGrid: true\n};\n\nexport const MARKER = {\n  position: new Point(),\n  minZoom: 1,\n  maxZoom: 20\n};\n\nexport const ICON = {\n  url:\n    'data:image/png;base64,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',\n  size: [128, 128],\n  anchor: [64, 64]\n};\n\nfabric.Object.prototype.originX = 'center';\nfabric.Object.prototype.originY = 'center';\n\nfabric.Object.prototype.lockUniScaling = true;\nfabric.Object.prototype.lockScalingFlip = true;\nfabric.Object.prototype.transparentCorners = false;\nfabric.Object.prototype.centeredScaling = true;\n// fabric.Object.prototype.cornerStyle = 'circle';\nfabric.Object.prototype.cornerColor = 'blue';\nfabric.Object.prototype.borderColor = 'blue';\nfabric.Object.prototype.borderOpacity = 0.7;\nfabric.Object.prototype.cornerOpacity = 0.7;\nfabric.Object.prototype.cornerStrokeColor = 'blue';\n\nfabric.Object.prototype.borderColor = '#ff0099';\nfabric.Object.prototype.cornerColor = '#00eaff';\nfabric.Object.prototype.cornerStrokeColor = '#00bbff';\n\nfabric.Object.prototype.objectCaching = false;\nfabric.Group.prototype.objectCaching = true;\n\nfabric.Group.prototype.selectionBackgroundColor = 'rgba(45,207,171,0.25)';\n\nfabric.Object.prototype.borderDashArray = [3, 3];\n\nfabric.Object.prototype.padding = 5;\n\nfabric.Object.prototype.getBounds = function getBounds() {\n  const coords = [];\n  coords.push(new Point(this.left - this.width / 2.0, this.top - this.height / 2.0));\n  coords.push(new Point(this.left + this.width / 2.0, this.top + this.height / 2.0));\n  return coords;\n};\n","import Base from '../core/Base';\nimport Grid from './Grid';\n\n/**\n * GridManager - Manages grid properties and behavior\n *\n * This component provides methods for configuring and controlling\n * the grid system in a coordinate plane. It handles grid visibility,\n * spacing, colors, and other visual properties.\n *\n * @class\n * @extends {Base}\n */\nclass GridManager extends Base {\n  /**\n   * Create a new GridManager\n   *\n   * @param {Object} options - Configuration options\n   * @param {CoordinatePlane} [options.coordinatePlane] - The coordinate plane to manage grid for\n   * @param {HTMLCanvasElement} [options.canvas] - Canvas element to draw the grid on\n   * @param {boolean} [options.visible=true] - Whether the grid is initially visible\n   * @param {number} [options.spacing=10] - Grid line spacing\n   * @param {string} [options.color='#cccccc'] - Grid line color\n   * @param {number} [options.opacity=0.5] - Grid line opacity\n   * @param {string} [options.axisColor='#999999'] - Axis line color\n   * @param {boolean} [options.showLabels=true] - Whether to show grid labels\n   */\n  constructor(options = {}) {\n    super(options);\n    this._coordinatePlane = options.coordinatePlane || null;\n    this._canvas = options.canvas || null;\n    this._grid = null;\n    this._visible = options.visible !== undefined ? options.visible : true;\n    this._spacing = options.spacing || 10;\n    this._color = options.color || '#cccccc';\n    this._opacity = options.opacity !== undefined ? options.opacity : 0.5;\n    this._axisColor = options.axisColor || '#999999';\n    this._showLabels = options.showLabels !== undefined ? options.showLabels : true;\n    if (this._canvas) {\n      this.initGrid();\n    }\n  }\n\n  /**\n   * Initialize the grid with current configuration options\n   *\n   * Creates a new Grid instance and draws it on the canvas if visible.\n   *\n   * @returns {GridManager} This GridManager instance for chaining\n   */\n  initGrid() {\n    if (!this._canvas) return this;\n    this._grid = new Grid(this._canvas, {\n      color: this._color,\n      opacity: this._opacity,\n      axisColor: this._axisColor,\n      spacing: this._spacing,\n      showLabels: this._showLabels,\n      visible: this._visible\n    });\n    if (this._grid && this._visible) {\n      this._grid.draw();\n    }\n\n    return this;\n  }\n\n  /**\n   * Set the grid visibility\n   *\n   * Controls whether the grid is drawn on the canvas or cleared.\n   * Fires a 'grid:visibility' event when the visibility changes.\n   *\n   * @param {boolean} visible - Whether the grid should be visible\n   * @returns {GridManager} This GridManager instance for chaining\n   */\n  setVisible(visible) {\n    this._visible = visible;\n    if (this._grid) {\n      if (visible) {\n        this._grid.draw();\n      } else if (this._canvas) {\n        // Clear the grid canvas\n        const context = this._canvas.getContext('2d');\n        if (context) {\n          context.clearRect(0, 0, this._canvas.width, this._canvas.height);\n        }\n      }\n    }\n\n    this.fire('grid:visibility', { visible });\n    return this;\n  }\n\n  /**\n   * Set the grid spacing\n   *\n   * Updates the distance between grid lines and redraws the grid.\n   * Fires a 'grid:spacing' event when the spacing changes.\n   *\n   * @param {number} spacing - The grid spacing in pixels\n   * @returns {GridManager} This GridManager instance for chaining\n   */\n  setSpacing(spacing) {\n    this._spacing = spacing;\n    if (this._grid) {\n      this._grid.update({ spacing });\n      if (this._visible) {\n        this._grid.draw();\n      }\n    }\n\n    this.fire('grid:spacing', { spacing });\n    return this;\n  }\n\n  /**\n   * Set the grid color\n   * @param {string} color The grid color (CSS color string)\n   * @returns {GridManager} This GridManager instance for chaining\n   */\n  setColor(color) {\n    this._color = color;\n    if (this._grid) {\n      this._grid.update({ color });\n      if (this._visible) {\n        this._grid.draw();\n      }\n    }\n\n    this.fire('grid:color', { color });\n    return this;\n  }\n\n  /**\n   * Set the grid opacity\n   * @param {number} opacity The grid opacity (0-1)\n   * @returns {GridManager} This GridManager instance for chaining\n   */\n  setOpacity(opacity) {\n    this._opacity = opacity;\n    if (this._grid) {\n      this._grid.update({ opacity });\n      if (this._visible) {\n        this._grid.draw();\n      }\n    }\n\n    this.fire('grid:opacity', { opacity });\n    return this;\n  }\n\n  /**\n   * Set whether to show grid labels\n   * @param {boolean} show Whether to show grid labels\n   * @returns {GridManager} This GridManager instance for chaining\n   */\n  setShowLabels(show) {\n    this._showLabels = show;\n    if (this._grid) {\n      this._grid.update({ showLabels: show });\n      if (this._visible) {\n        this._grid.draw();\n      }\n    }\n\n    this.fire('grid:labels', { showLabels: show });\n    return this;\n  }\n\n  /**\n   * Set the canvas for the grid\n   * @param {HTMLCanvasElement} canvas The canvas element\n   * @returns {GridManager} This GridManager instance for chaining\n   */\n  setCanvas(canvas) {\n    this._canvas = canvas;\n    if (canvas && !this._grid) {\n      this.initGrid();\n    } else if (canvas && this._grid) {\n      this._grid.canvas = canvas;\n      this._grid.context = canvas.getContext('2d');\n\n      if (this._visible) {\n        this._grid.draw();\n      }\n    }\n\n    return this;\n  }\n\n  /**\n   * Set the coordinate plane for this grid manager\n   * @param {CoordinatePlane} coordinatePlane The coordinate plane\n   * @returns {GridManager} This GridManager instance for chaining\n   */\n  setCoordinatePlane(coordinatePlane) {\n    this._coordinatePlane = coordinatePlane;\n    if (coordinatePlane && coordinatePlane.gridCanvas) {\n      this.setCanvas(coordinatePlane.gridCanvas);\n    }\n    return this;\n  }\n\n  /**\n   * Redraw the grid\n   * @returns {GridManager} This GridManager instance for chaining\n   */\n  redraw() {\n    if (this._grid && this._visible) {\n      this._grid.draw();\n    }\n    return this;\n  }\n\n  /**\n   * Get the current grid\n   * @returns {Grid} The current grid instance\n   */\n  getGrid() {\n    return this._grid;\n  }\n\n  /**\n   * Get the current grid settings\n   * @returns {Object} The current grid settings\n   */\n  getSettings() {\n    return {\n      visible: this._visible,\n      spacing: this._spacing,\n      color: this._color,\n      opacity: this._opacity,\n      axisColor: this._axisColor,\n      showLabels: this._showLabels\n    };\n  }\n}\n\nexport default GridManager;\n","/**\n * CanvasLayer component\n * A base layer for canvas-based components\n */\n\nimport React from 'react';\nimport { Layer } from './Layer';\n\n/**\n * CanvasLayer - A specialized layer for canvas-based content\n * This provides a base implementation for canvas-based layers\n */\nclass CanvasLayer extends Layer {\n  constructor(props) {\n    super(props);\n    this.canvasRef = React.createRef();\n  }\n\n  /**\n   * Initialize the canvas context\n   */\n  initCanvas() {\n    if (this.canvasRef.current) {\n      this.ctx = this.canvasRef.current.getContext('2d');\n    }\n  }\n\n  /**\n   * Clear the canvas\n   */\n  clearCanvas() {\n    if (this.ctx && this.canvasRef.current) {\n      this.ctx.clearRect(0, 0, this.canvasRef.current.width, this.canvasRef.current.height);\n    }\n  }\n\n  /**\n   * Resize the canvas to match parent dimensions\n   */\n  resizeCanvas() {\n    if (this.canvasRef.current && this.canvasRef.current.parentElement) {\n      const parent = this.canvasRef.current.parentElement;\n      this.canvasRef.current.width = parent.clientWidth;\n      this.canvasRef.current.height = parent.clientHeight;\n    }\n  }\n\n  /**\n   * Component lifecycle method - after mounting\n   */\n  componentDidMount() {\n    super.componentDidMount();\n    this.initCanvas();\n    this.resizeCanvas();\n    window.addEventListener('resize', this.resizeCanvas.bind(this));\n  }\n\n  /**\n   * Component lifecycle method - before unmounting\n   */\n  componentWillUnmount() {\n    super.componentWillUnmount();\n    window.removeEventListener('resize', this.resizeCanvas.bind(this));\n  }\n\n  /**\n   * Render method\n   */\n  render() {\n    const { style, className, ...otherProps } = this.props;\n    return React.createElement(\n      'div',\n      {\n        className,\n        style: {\n          position: 'absolute',\n          width: '100%',\n          height: '100%',\n          ...style\n        }\n      },\n      React.createElement('canvas', {\n        ref: this.canvasRef,\n        ...otherProps,\n        style: {\n          display: 'block',\n          width: '100%',\n          height: '100%'\n        }\n      })\n    );\n  }\n}\n\nexport default CanvasLayer;\n","export class Line extends fabric.Line {\n  constructor(points, options) {\n    options = options || {};\n    options.strokeWidth = options.strokeWidth || 1;\n    options.class = 'line';\n    super(points, options);\n    this._strokeWidth = options.strokeWidth;\n  }\n\n  _renderStroke(ctx) {\n    const stroke = this._strokeWidth / this.canvas.getZoom();\n    this.strokeWidth = stroke > 0.01 ? stroke : 0.01;\n    super._renderStroke(ctx);\n    this.setCoords();\n  }\n}\n\nexport const line = (points, options) => new Line(points, options);\n\nexport default Line;\n","import { Layer } from './Layer';\nimport { Line } from './vector/Line';\n\nexport class Connector extends Layer {\n  constructor(start, end, options) {\n    options = options || {};\n    options.zIndex = options.zIndex || 10;\n    options.class = 'connector';\n    super(options);\n\n    if (!start || !end) {\n      console.error('start or end is missing');\n      return;\n    }\n    this.start = start;\n    this.end = end;\n    this.strokeWidth = this.strokeWidth || 1;\n\n    Object.assign(this.style, {\n      strokeWidth: this.strokeWidth,\n      stroke: this.color || 'grey',\n      fill: this.fill || false,\n      selectable: false\n    });\n\n    this.draw();\n\n    this.registerListeners();\n  }\n\n  registerListeners() {\n    const vm = this;\n    this.start.on('update:links', () => {\n      vm.shape.set({\n        x1: vm.start.position.x,\n        y1: vm.start.position.y\n      });\n    });\n\n    this.end.on('update:links', () => {\n      vm.shape.set({\n        x2: vm.end.position.x,\n        y2: vm.end.position.y\n      });\n    });\n  }\n\n  draw() {\n    this.shape = new Line(\n      [this.start.position.x, this.start.position.y, this.end.position.x, this.end.position.y],\n      this.style\n    );\n    // this.shape.setCoords();\n  }\n\n  redraw() {\n    this.shape.set({\n      x1: this.start.position.x,\n      y1: this.start.position.y,\n      x2: this.end.position.x,\n      y2: this.end.position.y\n    });\n  }\n\n  setStart(start) {\n    this.start = start;\n    this.redraw();\n  }\n\n  setEnd(end) {\n    this.end = end;\n    this.redraw();\n  }\n\n  setColor(color) {\n    this.color = color;\n    this.style.stroke = color;\n    this.shape.set('stroke', color);\n    if (this.shape.canvas) {\n      this.shape.canvas.renderAll();\n    }\n  }\n\n  setStrokeWidth(strokeWidth) {\n    this.strokeWidth = strokeWidth;\n    this.style.strokeWidth = strokeWidth;\n    this.shape.set('strokeWidth', strokeWidth);\n    if (this.shape.canvas) {\n      this.shape.canvas.renderAll();\n    }\n  }\n}\n\nexport const connector = (start, end, options) => new Connector(start, end, options);\n\nexport default Connector;\n","import { Layer } from './Layer';\nimport { Group } from './Group';\nimport { Point } from '../geometry/Point';\n\nclass Tooltip extends Layer {\n  constructor(position, options) {\n    options = options || {};\n    options.zIndex = options.zIndex || 300;\n    options.keepOnZoom = true;\n    options.position = new Point(position);\n    options.class = 'tooltip';\n    super(options);\n\n    this.content = this.content || '';\n    this.size = this.size || 10;\n    this.textColor = this.textColor || 'black';\n    this.fill = this.fill || 'white';\n    this.stroke = this.stroke || 'red';\n\n    Object.assign(this.style, {\n      left: this.position.x,\n      top: this.position.y\n    });\n\n    if (this.content) {\n      this.textObj = new fabric.Text(this.content, {\n        fontSize: this.size,\n        fill: this.textColor\n      });\n    }\n    this.init();\n  }\n\n  init() {\n    const objects = [];\n    if (this.textObj) {\n      objects.push(this.textObj);\n    }\n    this.shape = new Group(objects, this.style);\n    process.nextTick(() => {\n      this.emit('ready');\n    });\n  }\n}\nexport default Tooltip;\n","import Base from '../core/Base';\n\n/**\n * LayerManager - Manages layers in a coordinate plane\n *\n * This component provides methods for adding, removing, and organizing layers\n * within a coordinate plane. It maintains a registry of layers and handles\n * their rendering order, visibility, and organization.\n *\n * @class\n * @extends {Base}\n */\nclass LayerManager extends Base {\n  /**\n   * Create a new LayerManager\n   *\n   * @param {Object} options - Configuration options\n   * @param {CoordinatePlane} [options.coordinatePlane] - The coordinate plane to manage layers for\n   */\n  constructor(options = {}) {\n    super(options);\n\n    this.layers = [];\n    this.layersMap = new Map();\n    this._coordinatePlane = options.coordinatePlane || null;\n  }\n\n  /**\n   * Add a layer to the manager\n   * @param {Layer} layer The layer to add\n   * @param {boolean} render Whether to render the layer immediately\n   * @returns {LayerManager} This LayerManager instance for chaining\n   */\n  addLayer(layer, render = true) {\n    if (!layer) return this;\n\n    // Generate a unique ID if one doesn't exist\n    layer.id = layer.id || `layer-${Date.now()}-${Math.floor(Math.random() * 1000)}`;\n\n    // Store the layer\n    this.layers.push(layer);\n    this.layersMap.set(layer.id, layer);\n\n    // Add to canvas if coordinate plane exists\n    if (this._coordinatePlane && this._coordinatePlane.canvas) {\n      if (layer.group) {\n        this._coordinatePlane.canvas.add(layer.group);\n      } else if (layer.shape) {\n        this._coordinatePlane.canvas.add(layer.shape);\n      }\n\n      if (render) {\n        this._coordinatePlane.canvas.renderAll();\n      }\n    }\n\n    // Sort layers by z-index\n    this.sortLayers();\n\n    this.fire('layer:add', { layer });\n    return this;\n  }\n\n  /**\n   * Remove a layer from the manager\n   * @param {Layer|string} layer The layer or layer ID to remove\n   * @param {boolean} render Whether to render after removal\n   * @returns {LayerManager} This LayerManager instance for chaining\n   */\n  removeLayer(layer, render = true) {\n    let layerId;\n    if (typeof layer === 'string') {\n      layerId = layer;\n    } else if (layer && layer.id) {\n      layerId = layer.id;\n    } else {\n      return this;\n    }\n\n    const layerObj = this.layersMap.get(layerId);\n\n    if (!layerObj) return this;\n\n    // Remove from arrays and map\n    this.layers = this.layers.filter(l => l.id !== layerId);\n    this.layersMap.delete(layerId);\n\n    // Remove from canvas if coordinate plane exists\n    if (this._coordinatePlane && this._coordinatePlane.canvas) {\n      if (layerObj.group) {\n        this._coordinatePlane.canvas.remove(layerObj.group);\n      } else if (layerObj.shape) {\n        this._coordinatePlane.canvas.remove(layerObj.shape);\n      }\n\n      if (render) {\n        this._coordinatePlane.canvas.renderAll();\n      }\n    }\n\n    this.fire('layer:remove', { layer: layerObj });\n    return this;\n  }\n\n  /**\n   * Get a layer by its ID\n   * @param {string} id The layer ID\n   * @returns {Layer|null} The layer object or null if not found\n   */\n  getLayer(id) {\n    return this.layersMap.get(id) || null;\n  }\n\n  /**\n   * Sort layers by z-index\n   * @returns {LayerManager} This LayerManager instance for chaining\n   */\n  sortLayers() {\n    this.layers.sort((a, b) => (a.zIndex || 0) - (b.zIndex || 0));\n\n    // Update the stacking order if coordinate plane exists\n    if (this._coordinatePlane && this._coordinatePlane.canvas) {\n      this.layers.forEach(layer => {\n        if (layer.group) {\n          layer.group.bringToFront();\n        } else if (layer.shape) {\n          layer.shape.bringToFront();\n        }\n      });\n    }\n\n    return this;\n  }\n\n  /**\n   * Show all layers\n   * @param {boolean} render Whether to render after showing\n   * @returns {LayerManager} This LayerManager instance for chaining\n   */\n  showAllLayers(render = true) {\n    this.layers.forEach(layer => {\n      if (layer.setVisible) {\n        layer.setVisible(true);\n      } else if (layer.group) {\n        layer.group.visible = true;\n      } else if (layer.shape) {\n        layer.shape.visible = true;\n      }\n    });\n    \n    if (render && this._coordinatePlane && this._coordinatePlane.canvas) {\n      this._coordinatePlane.canvas.renderAll();\n    }\n    \n    return this;\n  }\n\n  /**\n   * Hide all layers\n   * @param {boolean} render Whether to render after hiding\n   * @returns {LayerManager} This LayerManager instance for chaining\n   */\n  hideAllLayers(render = true) {\n    this.layers.forEach(layer => {\n      if (layer.setVisible) {\n        layer.setVisible(false);\n      } else if (layer.group) {\n        layer.group.visible = false;\n      } else if (layer.shape) {\n        layer.shape.visible = false;\n      }\n    });\n    \n    if (render && this._coordinatePlane && this._coordinatePlane.canvas) {\n      this._coordinatePlane.canvas.renderAll();\n    }\n    \n    return this;\n  }\n\n  /**\n   * Set the coordinate plane for this layer manager\n   * @param {CoordinatePlane} coordinatePlane The coordinate plane\n   * @returns {LayerManager} This LayerManager instance for chaining\n   */\n  setCoordinatePlane(coordinatePlane) {\n    this._coordinatePlane = coordinatePlane;\n\n    // Add existing layers to the new coordinate plane\n    if (coordinatePlane && coordinatePlane.canvas) {\n      this.layers.forEach(layer => {\n        if (layer.group) {\n          coordinatePlane.canvas.add(layer.group);\n        } else if (layer.shape) {\n          coordinatePlane.canvas.add(layer.shape);\n        }\n      });\n\n      this.sortLayers();\n      coordinatePlane.canvas.renderAll();\n    }\n\n    return this;\n  }\n}\n\nexport default LayerManager;\n","import { Layer } from '../Layer';\nimport { Group } from '../Group';\nimport { Point } from '../../geometry/Point';\nimport { Connector } from '../Connector';\n\nexport class Marker extends Layer {\n  constructor(position, options) {\n    options = options || {};\n    options.zIndex = options.zIndex || 100;\n    options.keepOnZoom = options.keepOnZoom === undefined ? true : options.keepOnZoom;\n    options.position = new Point(position);\n    options.rotation = options.rotation || 0;\n    options.yaw = options.yaw || 0;\n    options.clickable = options.clickable !== undefined ? options.clickable : true;\n    options.class = 'marker';\n    super(options);\n\n    const vm = this;\n\n    this.text = this.text || '';\n    this.size = this.size || 10;\n    this.textColor = this.textColor || 'black';\n    this.fill = this.fill || 'white';\n    this.stroke = this.stroke || 'red';\n\n    Object.assign(this.style, {\n      left: this.position.x,\n      top: this.position.y,\n      // selectionBackgroundColor: false,\n      angle: this.rotation,\n      yaw: this.yaw,\n      clickable: this.clickable\n    });\n\n    if (this.text) {\n      this.textObj = new fabric.Text(this.text, {\n        fontSize: this.size,\n        fill: this.textColor\n      });\n    }\n\n    if (this.icon) {\n      fabric.Image.fromURL(\n        this.icon.url,\n        image => {\n          vm.image = image.scaleToWidth(this.size);\n          this.init();\n          // vm.shape.removeWithUpdate();\n        },\n        {\n          selectable: false,\n          evented: this.evented,\n          clickable: this.clickable,\n          opacity: this.opacity\n        }\n      );\n    } else {\n      this.circle = new fabric.Circle({\n        radius: this.size,\n        strokeWidth: 2,\n        stroke: this.stroke,\n        fill: this.fill\n      });\n      this.init();\n    }\n  }\n\n  init() {\n    const objects = [];\n    if (this.image) {\n      objects.push(this.image);\n    }\n    if (this.circle) {\n      objects.push(this.circle);\n    }\n    if (this.textObj) {\n      objects.push(this.textObj);\n    }\n    this.shape = new Group(objects, this.style);\n    this.links = this.links || [];\n    this.addLinks();\n    this.registerListeners();\n\n    process.nextTick(() => {\n      this.emit('ready');\n    });\n  }\n\n  registerListeners() {\n    const vm = this;\n    this.shape.on('moving', () => {\n      vm.onShapeDrag();\n    });\n    this.shape.on('rotating', () => {\n      vm.emit('rotating');\n    });\n\n    this.shape.on('mousedown', e => {\n      vm.onShapeMouseDown(e);\n    });\n    this.shape.on('mousemove', e => {\n      vm.onShapeMouseMove(e);\n    });\n    this.shape.on('mouseup', e => {\n      vm.onShapeMouseUp(e);\n    });\n    this.shape.on('mouseover', () => {\n      vm.emit('mouseover', vm);\n    });\n    this.shape.on('mouseout', () => {\n      vm.emit('mouseout', vm);\n    });\n  }\n\n  setPosition(position) {\n    this.position = new Point(position);\n    if (!this.shape) return;\n\n    this.shape.set({\n      left: this.position.x,\n      top: this.position.y\n    });\n\n    this.emit('update:links');\n\n    if (this.shape.canvas) {\n      this.shape.canvas.renderAll();\n    }\n  }\n\n  setRotation(rotation) {\n    this.rotation = rotation;\n\n    if (!this.shape) return;\n\n    this.shape.set({\n      angle: this.rotation\n    });\n\n    if (this.shape.canvas) {\n      this.shape.canvas.renderAll();\n    }\n  }\n\n  setOptions(options) {\n    if (!this.shape) return;\n\n    Object.keys(options).forEach(key => {\n      switch (key) {\n        case 'textColor':\n          this.setTextColor(options[key]);\n          break;\n        case 'stroke':\n          this.setStroke(options[key]);\n          break;\n        case 'fill':\n          this.setColor(options[key]);\n          break;\n\n        default:\n          break;\n      }\n    });\n    if (this.shape.canvas) {\n      this.shape.canvas.renderAll();\n    }\n  }\n\n  setTextColor(color) {\n    if (this.text && this.textObj) {\n      this.textObj.setColor(color);\n      this.textObj.canvas.renderAll();\n    }\n  }\n\n  setText(text) {\n    if (this.text && this.textObj) {\n      this.textObj.set({ text });\n      this.textObj.canvas.renderAll();\n    }\n  }\n\n  setStroke(color) {\n    if (this.circle) {\n      this.circle.set('stroke', color);\n    }\n  }\n\n  setColor(color) {\n    if (this.circle) {\n      this.circle.setColor(color);\n    }\n  }\n\n  setLinks(links) {\n    this.links = links;\n    this.addLinks();\n  }\n\n  setSize(size) {\n    if (this.image) {\n      this.image.scaleToWidth(size);\n      if (this.image.canvas) {\n        this.image.canvas.renderAll();\n      }\n    } else if (this.circle) {\n      this.circle.setRadius(size);\n    }\n  }\n\n  addLinks() {\n    this.connectors = [];\n    this.links.forEach(link => {\n      const connector = new Connector(this, link);\n      this.connectors.push(connector);\n    });\n\n    this.addConnectors();\n  }\n\n  addConnectors() {\n    const vm = this;\n    this.connectors.forEach(connector => {\n      vm._map.addLayer(connector);\n    });\n  }\n\n  onAdded() {\n    this.addConnectors();\n  }\n\n  onShapeDrag() {\n    const matrix = this.shape.calcTransformMatrix();\n    const [, , , , x, y] = matrix;\n    this.position = new Point(x, y);\n    this.emit('update:links');\n    this.emit('moving');\n  }\n\n  onShapeMouseDown(e) {\n    this.dragStart = e;\n  }\n\n  onShapeMouseMove(e) {\n    if (this.dragStart) {\n      this.emit('dragstart');\n\n      const a = new fabric.Point(e.pointer.x, e.pointer.y);\n      const b = new fabric.Point(this.dragStart.pointer.x, this.dragStart.pointer.y);\n      // if distance is far enough, we don't want to fire click event\n      if (a.distanceFrom(b) > 3) {\n        this.dragStart = null;\n        this.dragging = true;\n      } else {\n        // this.dragging = false;\n      }\n    }\n\n    if (this.dragging) {\n      this.emit('drag');\n    } else {\n      this.emit('hover');\n    }\n  }\n\n  onShapeMouseUp() {\n    if (!this.dragging) {\n      this.emit('click');\n    } else {\n      this.emit('moved');\n    }\n    this.dragStart = null;\n    this.dragging = false;\n  }\n}\n\nexport const marker = (position, options) => new Marker(position, options);\n","import { ICON } from '../../core/Constants';\n\nexport class Icon extends fabric.Image {\n  constructor(options) {\n    super(options);\n    this.defaults = Object.assign({}, ICON);\n    Object.assign({}, this.defaults);\n    Object.assign({}, this._options);\n  }\n}\nexport const icon = (options) => new Icon(options);\n","import { Layer } from '../Layer';\nimport { Point } from '../../geometry/Point';\nimport { Group } from '../Group';\n\nexport class Polyline extends Layer {\n  constructor(_points, options) {\n    options = options || {};\n    options.points = _points || [];\n    super(options);\n    this.lines = [];\n    this.class = 'polyline';\n    this.strokeWidth = 1;\n\n    this.lineOptions = {\n      strokeWidth: this.strokeWidth,\n      stroke: this.color || 'grey',\n      fill: this.fill || false\n    };\n\n    this.shape = new Group([], {\n      selectable: false,\n      hasControls: false,\n      class: this.class,\n      parent: this\n    });\n\n    this.setPoints(this._points);\n  }\n\n  addPoint(point) {\n    this.points.push(new Point(point));\n\n    if (this.points.length > 1) {\n      const i = this.points.length - 1;\n      const j = this.points.length - 2;\n      const p1 = this.points[i];\n      const p2 = this.points[j];\n      const line = new fabric.Line(p1.getArray().concat(p2.getArray()), this.lineOptions);\n      this.lines.push(line);\n      this.shape.addWithUpdate(line);\n    }\n  }\n\n  setStrokeWidth(strokeWidth) {\n    this.lines.forEach(line => {\n      line.setStrokeWidth(strokeWidth);\n    });\n  }\n\n  setPoints(points = []) {\n    this.removeLines();\n    this.points = [];\n    for (let i = 0; i < points.length; i += 1) {\n      const point = new Point(points[i]);\n      this.points.push(point);\n      this.addPoint();\n    }\n  }\n\n  removeLines() {\n    for (let i = 0; i < this.lines.length; i += 1) {\n      this.shape.remove(this.lines[i]);\n    }\n    this.lines = [];\n  }\n}\n\nexport const polyline = (points, options) => new Polyline(points, options);\n","export class Circle extends fabric.Circle {}\n\nexport const circle = options => new Circle(options);\n","export class Rect extends fabric.Rect {\n  constructor(points, options) {\n    options = options || {};\n    options.strokeWidth = options.strokeWidth || 1;\n    options.class = 'rect';\n    super(points, options);\n    this._strokeWidth = options.strokeWidth;\n  }\n\n  _renderStroke(ctx) {\n    this.strokeWidth = this._strokeWidth / this.canvas.getZoom();\n    super._renderStroke(ctx);\n  }\n}\n\nexport const rect = (points, options) => new Rect(points, options);\n\nexport default Rect;\n","import { Rect } from '../vector';\nimport { Layer } from '../Layer';\n\nexport class MarkerGroup extends Layer {\n  constructor(bounds, options) {\n    options = options || {};\n    options.bounds = bounds;\n    options.zIndex = options.zIndex || 50;\n    options.class = 'markergroup';\n    super(options);\n    if (!this.bounds) {\n      console.error('bounds is missing!');\n      return;\n    }\n    this.style = {\n      strokeWidth: 1,\n      stroke: this.stroke || 'black',\n      fill: this.color || '#88888822',\n      class: this.class,\n      zIndex: this.zIndex,\n      parent: this\n    };\n    this.draw();\n  }\n\n  setBounds(bounds) {\n    this.bounds = bounds;\n    this.draw();\n  }\n\n  draw() {\n    const width = this.bounds[1][0] - this.bounds[0][0];\n    const height = this.bounds[1][1] - this.bounds[0][1];\n    this.coords = {\n      left: this.bounds[0][0] + width / 2,\n      top: this.bounds[0][1] + height / 2,\n      width,\n      height\n    };\n\n    if (this.shape) {\n      this.shape.set(this.coords);\n    } else {\n      Object.assign(this.style, this.coords);\n      this.shape = new Rect(this.style);\n    }\n  }\n}\nexport const markerGroup = (bounds, options) => new MarkerGroup(bounds, options);\nexport default MarkerGroup;\n","class ArrowHead extends fabric.Triangle {\n  constructor(points, options) {\n    options = options || {};\n    options.headLength = options.headLength || 10;\n    options.stroke = options.stroke || '#207cca';\n\n    const [x1, y1, x2, y2] = points;\n    const dx = x2 - x1;\n    const dy = y2 - y1;\n    let angle = Math.atan2(dy, dx);\n\n    angle *= 180 / Math.PI;\n    angle += 90;\n\n    if (options.lastAngle !== undefined) {\n      angle = options.lastAngle;\n      console.log(`Angle: ${angle}`);\n    }\n\n    super({\n      angle,\n      fill: options.stroke,\n      top: y2,\n      left: x2,\n      height: options.headLength,\n      width: options.headLength,\n      originX: 'center',\n      originY: 'center',\n      selectable: false\n    });\n  }\n}\nexport default ArrowHead;\n","import ArrowHead from './ArrowHead';\n\nexport class Arrow extends fabric.Group {\n  constructor(point, options) {\n    options = options || {};\n    options.strokeWidth = options.strokeWidth || 5;\n    options.stroke = options.stroke || '#7db9e8';\n    options.class = 'arrow';\n    super(\n      [],\n      Object.assign(options, {\n        evented: false\n      })\n    );\n    this.pointArray = [point, Object.assign({}, point)];\n    this.options = options;\n    this.draw();\n  }\n\n  draw() {\n    if (this.head) {\n      this.remove(this.head);\n    }\n\n    if (this.polyline) {\n      this.remove(this.polyline);\n    }\n\n    this.polyline = new fabric.Polyline(\n      this.pointArray,\n      Object.assign(this.options, {\n        strokeLineJoin: 'round',\n        fill: false\n      })\n    );\n\n    this.addWithUpdate(this.polyline);\n\n    const lastPoints = this.getLastPoints();\n\n    const p1 = new fabric.Point(lastPoints[0], lastPoints[1]);\n    const p2 = new fabric.Point(lastPoints[2], lastPoints[3]);\n    const dis = p1.distanceFrom(p2);\n    console.log(`dis = ${dis}`);\n\n    this.head = new ArrowHead(\n      lastPoints,\n      Object.assign(this.options, {\n        headLength: this.strokeWidth * 2,\n        lastAngle: dis <= 10 ? this.lastAngle : undefined\n      })\n    );\n\n    if (dis > 10) {\n      this.lastAngle = this.head.angle;\n    }\n    this.addWithUpdate(this.head);\n  }\n\n  addPoint(point) {\n    this.pointArray.push(point);\n    this.draw();\n  }\n\n  addTempPoint(point) {\n    const len = this.pointArray.length;\n    const lastPoint = this.pointArray[len - 1];\n    lastPoint.x = point.x;\n    lastPoint.y = point.y;\n    this.draw();\n  }\n\n  getLastPoints() {\n    const len = this.pointArray.length;\n    const point1 = this.pointArray[len - 2];\n    const point2 = this.pointArray[len - 1];\n    return [point1.x, point1.y, point2.x, point2.y];\n  }\n\n  setColor(color) {\n    this._objects.forEach(obj => {\n      obj.setColor(color);\n    });\n  }\n}\n\nexport const arrow = (points, options) => new Arrow(points, options);\n\nexport default Arrow;\n","/* eslint-disable no-unused-vars */\nimport Base from '../core/Base';\nimport { Arrow } from './Arrow';\n\nconst Modes = {\n  SELECT: 'select',\n  DRAWING: 'drawing',\n  ARROW: 'arrow',\n  TEXT: 'text'\n};\n\nexport class Canvas extends Base {\n  constructor(container, options) {\n    super(options);\n\n    this.container = container;\n\n    const canvas = document.createElement('canvas');\n    this.container.appendChild(canvas);\n    canvas.setAttribute('id', 'fabric-layers-canvas');\n\n    canvas.width = this.width || this.container.clientWidth;\n    canvas.height = this.height || this.container.clientHeight;\n\n    this.currentColor = this.currentColor || 'black';\n    this.fontFamily = this.fontFamily || 'Roboto';\n\n    this.canvas = new fabric.Canvas(canvas, {\n      freeDrawingCursor: 'none',\n      freeDrawingLineWidth: this.lineWidth\n    });\n    this.arrows = [];\n\n    this.setLineWidth(this.lineWidth || 10);\n    this.addCursor();\n    this.addListeners();\n\n    this.setModeAsArrow();\n  }\n\n  setModeAsDrawing() {\n    this.mode = Modes.DRAWING;\n    this.canvas.isDrawingMode = true;\n    this.canvas.selection = false;\n    this.onModeChanged();\n  }\n\n  isDrawingMode() {\n    return this.mode === Modes.DRAWING;\n  }\n\n  setModeAsSelect() {\n    this.mode = Modes.SELECT;\n    this.canvas.isDrawingMode = false;\n    this.canvas.selection = true;\n    this.onModeChanged();\n  }\n\n  isSelectMode() {\n    return this.mode === Modes.SELECT;\n  }\n\n  setModeAsArrow() {\n    this.mode = Modes.ARROW;\n    this.canvas.isDrawingMode = false;\n    this.canvas.selection = false;\n    this.onModeChanged();\n  }\n\n  isArrowMode() {\n    return this.mode === Modes.ARROW;\n  }\n\n  setModeAsText() {\n    this.mode = Modes.TEXT;\n    this.canvas.isDrawingMode = false;\n    this.canvas.selection = false;\n    this.onModeChanged();\n  }\n\n  isTextMode() {\n    return this.mode === Modes.TEXT;\n  }\n\n  onModeChanged() {\n    this.updateCursor();\n    this.emit('mode-changed', this.mode);\n    this.canvas._objects.forEach(obj => {\n      obj.evented = this.isSelectMode();\n    });\n  }\n\n  addListeners() {\n    const canvas = this.canvas;\n    canvas.on('mouse:move', evt => {\n      const mouse = canvas.getPointer(evt.e);\n      if (this.mousecursor) {\n        this.mousecursor\n          .set({\n            top: mouse.y,\n            left: mouse.x\n          })\n          .setCoords()\n          .canvas.renderAll();\n      }\n\n      if (this.isTextMode()) {\n        console.log('text');\n      } else if (this.isArrowMode()) {\n        if (this.activeArrow) {\n          this.activeArrow.addTempPoint(mouse);\n        }\n        this.canvas.requestRenderAll();\n      }\n    });\n\n    canvas.on('mouse:out', () => {\n      // put circle off screen\n      if (!this.mousecursor) return;\n      this.mousecursor\n        .set({\n          left: -1000,\n          top: -1000\n        })\n        .setCoords();\n\n      this.cursor.renderAll();\n    });\n\n    canvas.on('mouse:up', event => {\n      if (canvas.mouseDown) {\n        canvas.fire('mouse:click', event);\n      }\n      canvas.mouseDown = false;\n    });\n\n    canvas.on('mouse:move', event => {\n      canvas.mouseDown = false;\n    });\n\n    canvas.on('mouse:down', event => {\n      canvas.mouseDown = true;\n    });\n\n    canvas.on('mouse:click', event => {\n      console.log('mouse click', event);\n      const mouse = canvas.getPointer(event.e);\n      if (event.target) return;\n      if (this.isTextMode()) {\n        const text = new fabric.IText('Text', {\n          left: mouse.x,\n          top: mouse.y,\n          width: 100,\n          fontSize: 20,\n          fontFamily: this.fontFamily,\n          lockUniScaling: true,\n          fill: this.currentColor,\n          stroke: this.currentColor\n        });\n        canvas\n          .add(text)\n          .setActiveObject(text)\n          .renderAll();\n\n        this.setModeAsSelect();\n      } else if (this.isArrowMode()) {\n        console.log('arrow mode');\n        if (this.activeArrow) {\n          this.activeArrow.addPoint(mouse);\n        } else {\n          this.activeArrow = new Arrow(mouse, {\n            stroke: this.currentColor,\n            strokeWidth: this.lineWidth\n          });\n          this.canvas.add(this.activeArrow);\n        }\n        this.canvas.requestRenderAll();\n      }\n    });\n\n    canvas.on('mouse:dblclick', event => {\n      console.log('mouse:dbclick');\n      if (this.isArrowMode() && this.activeArrow) {\n        this.arrows.push(this.activeArrow);\n        this.activeArrow = null;\n      }\n    });\n\n    canvas.on('selection:created', event => {\n      this.emit('selected');\n    });\n\n    canvas.on('selection:cleared', event => {\n      this.emit('unselected');\n    });\n  }\n\n  removeSelected() {\n    this.canvas.remove(this.canvas.getActiveObject());\n    this.canvas.getActiveObjects().forEach(obj => {\n      this.canvas.remove(obj);\n    });\n    this.canvas.discardActiveObject().renderAll();\n  }\n\n  updateCursor() {\n    if (!this.cursor) return;\n\n    const canvas = this.canvas;\n\n    if (this.mousecursor) {\n      this.cursor.remove(this.mousecursor);\n      this.mousecursor = null;\n    }\n\n    const cursorOpacity = 0.3;\n    let mousecursor = null;\n    if (this.isDrawingMode()) {\n      mousecursor = new fabric.Circle({\n        left: -1000,\n        top: -1000,\n        radius: canvas.freeDrawingBrush.width / 2,\n        fill: `rgba(255,0,0,${cursorOpacity})`,\n        stroke: 'black',\n        originX: 'center',\n        originY: 'center'\n      });\n    } else if (this.isTextMode()) {\n      mousecursor = new fabric.Path('M0,-10 V10', {\n        left: -1000,\n        top: -1000,\n        radius: canvas.freeDrawingBrush.width / 2,\n        fill: `rgba(255,0,0,${cursorOpacity})`,\n        stroke: `rgba(0,0,0,${cursorOpacity})`,\n        originX: 'center',\n        originY: 'center',\n        scaleX: 1,\n        scaleY: 1\n      });\n    } else {\n      mousecursor = new fabric.Path('M0,-10 V10 M-10,0 H10', {\n        left: -1000,\n        top: -1000,\n        radius: canvas.freeDrawingBrush.width / 2,\n        fill: `rgba(255,0,0,${cursorOpacity})`,\n        stroke: `rgba(0,0,0,${cursorOpacity})`,\n        originX: 'center',\n        originY: 'center'\n      });\n    }\n\n    if (this.isSelectMode()) {\n      mousecursor = null;\n      this.canvas.defaultCursor = 'default';\n    } else {\n      this.canvas.defaultCursor = 'none';\n    }\n    if (mousecursor) {\n      this.cursor.add(mousecursor);\n    }\n    this.mousecursor = mousecursor;\n  }\n\n  addCursor() {\n    const canvas = this.canvas;\n    const cursorCanvas = document.createElement('canvas');\n    this.canvas.wrapperEl.appendChild(cursorCanvas);\n    cursorCanvas.setAttribute('id', 'fabric-layers-cursor-canvas');\n    cursorCanvas.style.position = 'absolute';\n    cursorCanvas.style.top = '0';\n    cursorCanvas.style.pointerEvents = 'none';\n    cursorCanvas.width = this.width || this.container.clientWidth;\n    cursorCanvas.height = this.height || this.container.clientHeight;\n    this.cursorCanvas = cursorCanvas;\n    canvas.defaultCursor = 'none';\n    this.cursor = new fabric.StaticCanvas(cursorCanvas);\n    this.updateCursor();\n  }\n\n  setColor(color) {\n    this.currentColor = color;\n    this.canvas.freeDrawingBrush.color = color;\n\n    const obj = this.canvas.getActiveObject();\n    if (obj) {\n      obj.set('stroke', color);\n      obj.set('fill', color);\n      this.canvas.requestRenderAll();\n    }\n\n    if (!this.mousecursor) return;\n\n    this.mousecursor\n      .set({\n        left: 100,\n        top: 100,\n        fill: color\n      })\n      .setCoords()\n      .canvas.renderAll();\n  }\n\n  setLineWidth(width) {\n    this.lineWidth = width;\n    this.canvas.freeDrawingBrush.width = width;\n\n    if (!this.mousecursor) return;\n\n    this.mousecursor\n      .set({\n        left: 100,\n        top: 100,\n        radius: width / 2\n      })\n      .setCoords()\n      .canvas.renderAll();\n  }\n\n  setFontFamily(family) {\n    this.fontFamily = family;\n    const obj = this.canvas.getActiveObject();\n    if (obj && obj.type === 'i-text') {\n      obj.set('fontFamily', family);\n      this.canvas.requestRenderAll();\n    }\n  }\n\n  clear() {\n    this.arrows = [];\n    this.canvas.clear();\n  }\n}\n\nexport const canvas = (container, options) => new Canvas(container, options);\n","const isNum = function (val) {\n  return typeof val === 'number' && !isNaN(val);\n};\n\nexport default (ev, toElement) => {\n  toElement = toElement || ev.currentTarget;\n\n  const toElementBoundingRect = toElement.getBoundingClientRect();\n  const orgEv = ev.originalEvent || ev;\n  const hasTouches = ev.touches && ev.touches.length;\n  let pageX = 0;\n  let pageY = 0;\n\n  if (hasTouches) {\n    if (isNum(ev.touches[0].pageX) && isNum(ev.touches[0].pageY)) {\n      pageX = ev.touches[0].pageX;\n      pageY = ev.touches[0].pageY;\n    } else if (isNum(ev.touches[0].clientX) && isNum(ev.touches[0].clientY)) {\n      pageX = orgEv.touches[0].clientX;\n      pageY = orgEv.touches[0].clientY;\n    }\n  } else if (isNum(ev.pageX) && isNum(ev.pageY)) {\n    pageX = ev.pageX;\n    pageY = ev.pageY;\n  } else if (ev.currentPoint && isNum(ev.currentPoint.x) && isNum(ev.currentPoint.y)) {\n    pageX = ev.currentPoint.x;\n    pageY = ev.currentPoint.y;\n  }\n  let isRight = false;\n  if ('which' in ev) {\n    // Gecko (Firefox), WebKit (Safari/Chrome) & Opera\n    isRight = ev.which == 3;\n  } else if ('button' in ev) {\n    // IE, Opera\n    isRight = ev.button == 2;\n  }\n\n  return {\n    x: pageX - toElementBoundingRect.left,\n    y: pageY - toElementBoundingRect.top,\n    isRight\n  };\n};\n","const stopThresholdDefault = 0.3;\nconst bounceDeceleration = 0.04;\nconst bounceAcceleration = 0.11;\n\n// fixes weird safari 10 bug where preventDefault is prevented\n// @see https://github.com/metafizzy/flickity/issues/457#issuecomment-254501356\nwindow.addEventListener('touchmove', () => {});\n\nexport default class Impetus {\n  constructor({\n    source: sourceEl = document,\n    update: updateCallback,\n    stop: stopCallback,\n    multiplier = 1,\n    friction = 0.92,\n    initialValues,\n    boundX,\n    boundY,\n    bounce = true\n  }) {\n    let boundXmin;\n    let boundXmax;\n    let boundYmin;\n    let boundYmax;\n    let pointerLastX;\n    let pointerLastY;\n    let pointerCurrentX;\n    let pointerCurrentY;\n    let pointerId;\n    let decVelX;\n    let decVelY;\n    let targetX = 0;\n    let targetY = 0;\n    let stopThreshold = stopThresholdDefault * multiplier;\n    let ticking = false;\n    let pointerActive = false;\n    let paused = false;\n    let decelerating = false;\n    let trackingPoints = [];\n\n    /**\n     * Initialize instance\n     */\n    (function init() {\n      sourceEl = typeof sourceEl === 'string' ? document.querySelector(sourceEl) : sourceEl;\n      if (!sourceEl) {\n        throw new Error('IMPETUS: source not found.');\n      }\n\n      if (!updateCallback) {\n        throw new Error('IMPETUS: update function not defined.');\n      }\n\n      if (initialValues) {\n        if (initialValues[0]) {\n          targetX = initialValues[0];\n        }\n        if (initialValues[1]) {\n          targetY = initialValues[1];\n        }\n        callUpdateCallback();\n      }\n\n      // Initialize bound values\n      if (boundX) {\n        boundXmin = boundX[0];\n        boundXmax = boundX[1];\n      }\n      if (boundY) {\n        boundYmin = boundY[0];\n        boundYmax = boundY[1];\n      }\n\n      sourceEl.addEventListener('touchstart', onDown);\n      sourceEl.addEventListener('mousedown', onDown);\n    }());\n\n    /**\n     * In edge cases where you may need to\n     * reinstanciate Impetus on the same sourceEl\n     * this will remove the previous event listeners\n     */\n    this.destroy = function () {\n      sourceEl.removeEventListener('touchstart', onDown);\n      sourceEl.removeEventListener('mousedown', onDown);\n\n      cleanUpRuntimeEvents();\n\n      // however it won't \"destroy\" a reference\n      // to instance if you'd like to do that\n      // it returns null as a convinience.\n      // ex: `instance = instance.destroy();`\n      return null;\n    };\n\n    /**\n     * Disable movement processing\n     * @public\n     */\n    this.pause = function () {\n      cleanUpRuntimeEvents();\n\n      pointerActive = false;\n      paused = true;\n    };\n\n    /**\n     * Enable movement processing\n     * @public\n     */\n    this.resume = function () {\n      paused = false;\n    };\n\n    /**\n     * Update the current x and y values\n     * @public\n     * @param {Number} x\n     * @param {Number} y\n     */\n    this.setValues = function (x, y) {\n      if (typeof x === 'number') {\n        targetX = x;\n      }\n      if (typeof y === 'number') {\n        targetY = y;\n      }\n    };\n\n    /**\n     * Update the multiplier value\n     * @public\n     * @param {Number} val\n     */\n    this.setMultiplier = function (val) {\n      multiplier = val;\n      stopThreshold = stopThresholdDefault * multiplier;\n    };\n\n    /**\n     * Update boundX value\n     * @public\n     * @param {Number[]} boundX\n     */\n    this.setBoundX = function (boundX) {\n      boundXmin = boundX[0];\n      boundXmax = boundX[1];\n    };\n\n    /**\n     * Update boundY value\n     * @public\n     * @param {Number[]} boundY\n     */\n    this.setBoundY = function (boundY) {\n      boundYmin = boundY[0];\n      boundYmax = boundY[1];\n    };\n\n    /**\n     * Removes all events set by this instance during runtime\n     */\n    function cleanUpRuntimeEvents() {\n      // Remove all touch events added during 'onDown' as well.\n      document.removeEventListener(\n        'touchmove',\n        onMove,\n        getPassiveSupported() ? { passive: false } : false\n      );\n      document.removeEventListener('touchend', onUp);\n      document.removeEventListener('touchcancel', stopTracking);\n      document.removeEventListener(\n        'mousemove',\n        onMove,\n        getPassiveSupported() ? { passive: false } : false\n      );\n      document.removeEventListener('mouseup', onUp);\n    }\n\n    /**\n     * Add all required runtime events\n     */\n    function addRuntimeEvents() {\n      cleanUpRuntimeEvents();\n\n      // @see https://developers.google.com/web/updates/2017/01/scrolling-intervention\n      document.addEventListener(\n        'touchmove',\n        onMove,\n        getPassiveSupported() ? { passive: false } : false\n      );\n      document.addEventListener('touchend', onUp);\n      document.addEventListener('touchcancel', stopTracking);\n      document.addEventListener(\n        'mousemove',\n        onMove,\n        getPassiveSupported() ? { passive: false } : false\n      );\n      document.addEventListener('mouseup', onUp);\n    }\n\n    /**\n     * Executes the update function\n     */\n    function callUpdateCallback() {\n      updateCallback.call(sourceEl, targetX, targetY);\n    }\n\n    /**\n     * Creates a custom normalized event object from touch and mouse events\n     * @param  {Event} ev\n     * @returns {Object} with x, y, and id properties\n     */\n    function normalizeEvent(ev) {\n      if (ev.type === 'touchmove' || ev.type === 'touchstart' || ev.type === 'touchend') {\n        const touch = ev.targetTouches[0] || ev.changedTouches[0];\n        return {\n          x: touch.clientX,\n          y: touch.clientY,\n          id: touch.identifier\n        };\n      }\n      // mouse events\n      return {\n        x: ev.clientX,\n        y: ev.clientY,\n        id: null\n      };\n    }\n\n    /**\n     * Initializes movement tracking\n     * @param  {Object} ev Normalized event\n     */\n    function onDown(ev) {\n      const event = normalizeEvent(ev);\n      if (!pointerActive && !paused) {\n        pointerActive = true;\n        decelerating = false;\n        pointerId = event.id;\n\n        pointerLastX = pointerCurrentX = event.x;\n        pointerLastY = pointerCurrentY = event.y;\n        trackingPoints = [];\n        addTrackingPoint(pointerLastX, pointerLastY);\n\n        addRuntimeEvents();\n      }\n    }\n\n    /**\n     * Handles move events\n     * @param  {Object} ev Normalized event\n     */\n    function onMove(ev) {\n      ev.preventDefault();\n      const event = normalizeEvent(ev);\n\n      if (pointerActive && event.id === pointerId) {\n        pointerCurrentX = event.x;\n        pointerCurrentY = event.y;\n        addTrackingPoint(pointerLastX, pointerLastY);\n        requestTick();\n      }\n    }\n\n    /**\n     * Handles up/end events\n     * @param {Object} ev Normalized event\n     */\n    function onUp(ev) {\n      const event = normalizeEvent(ev);\n\n      if (pointerActive && event.id === pointerId) {\n        stopTracking();\n      }\n    }\n\n    /**\n     * Stops movement tracking, starts animation\n     */\n    function stopTracking() {\n      pointerActive = false;\n      addTrackingPoint(pointerLastX, pointerLastY);\n      startDecelAnim();\n\n      cleanUpRuntimeEvents();\n    }\n\n    /**\n     * Records movement for the last 100ms\n     * @param {number} x\n     * @param {number} y [description]\n     */\n    function addTrackingPoint(x, y) {\n      const time = Date.now();\n      while (trackingPoints.length > 0) {\n        if (time - trackingPoints[0].time <= 100) {\n          break;\n        }\n        trackingPoints.shift();\n      }\n\n      trackingPoints.push({ x, y, time });\n    }\n\n    /**\n     * Calculate new values, call update function\n     */\n    function updateAndRender() {\n      const pointerChangeX = pointerCurrentX - pointerLastX;\n      const pointerChangeY = pointerCurrentY - pointerLastY;\n\n      targetX += pointerChangeX * multiplier;\n      targetY += pointerChangeY * multiplier;\n\n      if (bounce) {\n        const diff = checkBounds();\n        if (diff.x !== 0) {\n          targetX -= pointerChangeX * dragOutOfBoundsMultiplier(diff.x) * multiplier;\n        }\n        if (diff.y !== 0) {\n          targetY -= pointerChangeY * dragOutOfBoundsMultiplier(diff.y) * multiplier;\n        }\n      } else {\n        checkBounds(true);\n      }\n\n      callUpdateCallback();\n\n      pointerLastX = pointerCurrentX;\n      pointerLastY = pointerCurrentY;\n      ticking = false;\n    }\n\n    /**\n     * Returns a value from around 0.5 to 1, based on distance\n     * @param {Number} val\n     */\n    function dragOutOfBoundsMultiplier(val) {\n      return 0.000005 * Math.pow(val, 2) + 0.0001 * val + 0.55;\n    }\n\n    /**\n     * prevents animating faster than current framerate\n     */\n    function requestTick() {\n      if (!ticking) {\n        requestAnimFrame(updateAndRender);\n      }\n      ticking = true;\n    }\n\n    /**\n     * Determine position relative to bounds\n     * @param {Boolean} restrict Whether to restrict target to bounds\n     */\n    function checkBounds(restrict) {\n      let xDiff = 0;\n      let yDiff = 0;\n\n      if (boundXmin !== undefined && targetX < boundXmin) {\n        xDiff = boundXmin - targetX;\n      } else if (boundXmax !== undefined && targetX > boundXmax) {\n        xDiff = boundXmax - targetX;\n      }\n\n      if (boundYmin !== undefined && targetY < boundYmin) {\n        yDiff = boundYmin - targetY;\n      } else if (boundYmax !== undefined && targetY > boundYmax) {\n        yDiff = boundYmax - targetY;\n      }\n\n      if (restrict) {\n        if (xDiff !== 0) {\n          targetX = xDiff > 0 ? boundXmin : boundXmax;\n        }\n        if (yDiff !== 0) {\n          targetY = yDiff > 0 ? boundYmin : boundYmax;\n        }\n      }\n\n      return {\n        x: xDiff,\n        y: yDiff,\n        inBounds: xDiff === 0 && yDiff === 0\n      };\n    }\n\n    /**\n     * Initialize animation of values coming to a stop\n     */\n    function startDecelAnim() {\n      const firstPoint = trackingPoints[0];\n      const lastPoint = trackingPoints[trackingPoints.length - 1];\n\n      const xOffset = lastPoint.x - firstPoint.x;\n      const yOffset = lastPoint.y - firstPoint.y;\n      const timeOffset = lastPoint.time - firstPoint.time;\n\n      const D = timeOffset / 15 / multiplier;\n\n      decVelX = xOffset / D || 0; // prevent NaN\n      decVelY = yOffset / D || 0;\n\n      const diff = checkBounds();\n\n      if (Math.abs(decVelX) > 1 || Math.abs(decVelY) > 1 || !diff.inBounds) {\n        decelerating = true;\n        requestAnimFrame(stepDecelAnim);\n      } else if (stopCallback) {\n        stopCallback(sourceEl);\n      }\n    }\n\n    /**\n     * Animates values slowing down\n     */\n    function stepDecelAnim() {\n      if (!decelerating) {\n        return;\n      }\n\n      decVelX *= friction;\n      decVelY *= friction;\n\n      targetX += decVelX;\n      targetY += decVelY;\n\n      const diff = checkBounds();\n\n      if (\n        Math.abs(decVelX) > stopThreshold\n        || Math.abs(decVelY) > stopThreshold\n        || !diff.inBounds\n      ) {\n        if (bounce) {\n          const reboundAdjust = 2.5;\n\n          if (diff.x !== 0) {\n            if (diff.x * decVelX <= 0) {\n              decVelX += diff.x * bounceDeceleration;\n            } else {\n              const adjust = diff.x > 0 ? reboundAdjust : -reboundAdjust;\n              decVelX = (diff.x + adjust) * bounceAcceleration;\n            }\n          }\n          if (diff.y !== 0) {\n            if (diff.y * decVelY <= 0) {\n              decVelY += diff.y * bounceDeceleration;\n            } else {\n              const adjust = diff.y > 0 ? reboundAdjust : -reboundAdjust;\n              decVelY = (diff.y + adjust) * bounceAcceleration;\n            }\n          }\n        } else {\n          if (diff.x !== 0) {\n            if (diff.x > 0) {\n              targetX = boundXmin;\n            } else {\n              targetX = boundXmax;\n            }\n            decVelX = 0;\n          }\n          if (diff.y !== 0) {\n            if (diff.y > 0) {\n              targetY = boundYmin;\n            } else {\n              targetY = boundYmax;\n            }\n            decVelY = 0;\n          }\n        }\n\n        callUpdateCallback();\n\n        requestAnimFrame(stepDecelAnim);\n      } else {\n        decelerating = false;\n        if (stopCallback) {\n          stopCallback(sourceEl);\n        }\n      }\n    }\n  }\n}\n\n/**\n * @see http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/\n */\nconst requestAnimFrame = (function () {\n  return (\n    window.requestAnimationFrame\n    || window.webkitRequestAnimationFrame\n    || window.mozRequestAnimationFrame\n    || function (callback) {\n      window.setTimeout(callback, 1000 / 60);\n    }\n  );\n}());\n\nfunction getPassiveSupported() {\n  let passiveSupported = false;\n\n  try {\n    const options = Object.defineProperty({}, 'passive', {\n      get() {\n        passiveSupported = true;\n      }\n    });\n\n    window.addEventListener('test', null, options);\n  } catch (err) {}\n\n  getPassiveSupported = () => passiveSupported;\n  return passiveSupported;\n}\n","var rootPosition = { left: 0, top: 0 }\n\nexport default mouseEventOffset\nfunction mouseEventOffset (ev, target, out) {\n  target = target || ev.currentTarget || ev.srcElement\n  if (!Array.isArray(out)) {\n    out = [ 0, 0 ]\n  }\n  var cx = ev.clientX || 0\n  var cy = ev.clientY || 0\n  var rect = getBoundingClientOffset(target)\n  out[0] = cx - rect.left\n  out[1] = cy - rect.top\n  return out\n}\n\nfunction getBoundingClientOffset (element) {\n  if (element === window ||\n      element === document ||\n      element === document.body) {\n    return rootPosition\n  } else {\n    return element.getBoundingClientRect()\n  }\n}\n","import EventEmitter2 from 'eventemitter2';\nimport eventOffset from './mouse-event-offset';\n\nfunction distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1]\n  return Math.sqrt(x*x + y*y)\n}\n\nexport default touchPinch;\nfunction touchPinch (target) {\n  target = target || window\n\n  var emitter = new EventEmitter2()\n  var fingers = [ null, null ]\n  var activeCount = 0\n\n  var lastDistance = 0\n  var ended = false\n  var enabled = false\n\n  // some read-only values\n  Object.defineProperties(emitter, {\n    pinching(){\n      return activeCount === 2\n    },\n\n    fingers() {\n      return fingers\n    }\n  })\n\n  enable()\n  emitter.enable = enable\n  emitter.disable = disable\n  emitter.indexOfTouch = indexOfTouch\n  return emitter\n\n  function indexOfTouch (touch) {\n    var id = touch.identifier\n    for (var i = 0; i < fingers.length; i++) {\n      if (fingers[i] &&\n        fingers[i].touch &&\n        fingers[i].touch.identifier === id) {\n        return i\n      }\n    }\n    return -1\n  }\n\n  function enable () {\n    if (enabled) return\n    enabled = true\n    target.addEventListener('touchstart', onTouchStart, false)\n    target.addEventListener('touchmove', onTouchMove, false)\n    target.addEventListener('touchend', onTouchRemoved, false)\n    target.addEventListener('touchcancel', onTouchRemoved, false)\n  }\n\n  function disable () {\n    if (!enabled) return\n    enabled = false\n    activeCount = 0\n    fingers[0] = null\n    fingers[1] = null\n    lastDistance = 0\n    ended = false\n    target.removeEventListener('touchstart', onTouchStart, false)\n    target.removeEventListener('touchmove', onTouchMove, false)\n    target.removeEventListener('touchend', onTouchRemoved, false)\n    target.removeEventListener('touchcancel', onTouchRemoved, false)\n  }\n\n  function onTouchStart (ev) {\n    for (var i = 0; i < ev.changedTouches.length; i++) {\n      var newTouch = ev.changedTouches[i]\n      var id = newTouch.identifier\n      var idx = indexOfTouch(id)\n\n      if (idx === -1 && activeCount < 2) {\n        var first = activeCount === 0\n\n        // newest and previous finger (previous may be undefined)\n        var newIndex = fingers[0] ? 1 : 0\n        var oldIndex = fingers[0] ? 0 : 1\n        var newFinger = new Finger()\n\n        // add to stack\n        fingers[newIndex] = newFinger\n        activeCount++\n\n        // update touch event & position\n        newFinger.touch = newTouch\n        eventOffset(newTouch, target, newFinger.position)\n\n        var oldTouch = fingers[oldIndex] ? fingers[oldIndex].touch : undefined\n        emitter.emit('place', newTouch, oldTouch)\n\n        if (!first) {\n          var initialDistance = computeDistance()\n          ended = false\n          emitter.emit('start', initialDistance)\n          lastDistance = initialDistance\n        }\n      }\n    }\n  }\n\n  function onTouchMove (ev) {\n    var changed = false\n    for (var i = 0; i < ev.changedTouches.length; i++) {\n      var movedTouch = ev.changedTouches[i]\n      var idx = indexOfTouch(movedTouch)\n      if (idx !== -1) {\n        changed = true\n        fingers[idx].touch = movedTouch // avoid caching touches\n        eventOffset(movedTouch, target, fingers[idx].position)\n      }\n    }\n\n    if (activeCount === 2 && changed) {\n      var currentDistance = computeDistance()\n      emitter.emit('change', currentDistance, lastDistance)\n      lastDistance = currentDistance\n    }\n  }\n\n  function onTouchRemoved (ev) {\n    for (var i = 0; i < ev.changedTouches.length; i++) {\n      var removed = ev.changedTouches[i]\n      var idx = indexOfTouch(removed)\n\n      if (idx !== -1) {\n        fingers[idx] = null\n        activeCount--\n        var otherIdx = idx === 0 ? 1 : 0\n        var otherTouch = fingers[otherIdx] ? fingers[otherIdx].touch : undefined\n        emitter.emit('lift', removed, otherTouch)\n      }\n    }\n\n    if (!ended && activeCount !== 2) {\n      ended = true\n      emitter.emit('end')\n    }\n  }\n\n  function computeDistance () {\n    if (activeCount < 2) return 0\n    return distance(fingers[0].position, fingers[1].position)\n  }\n}\n\nfunction Finger () {\n  this.position = [0, 0]\n  this.touch = null\n}\n","function getPrefixed(name) {\n\treturn window['webkit' + name] || window['moz' + name] || window['ms' + name];\n}\n\nvar lastTime = 0;\n\n// fallback for IE 7-8\nfunction timeoutDefer(fn) {\n\tvar time = +new Date(),\n\t    timeToCall = Math.max(0, 16 - (time - lastTime));\n\n\tlastTime = time + timeToCall;\n\treturn window.setTimeout(fn, timeToCall);\n}\n\nexport function bind(fn, obj) {\n\tvar slice = Array.prototype.slice;\n\n\tif (fn.bind) {\n\t\treturn fn.bind.apply(fn, slice.call(arguments, 1));\n\t}\n\n\tvar args = slice.call(arguments, 2);\n\n\treturn function () {\n\t\treturn fn.apply(obj, args.length ? args.concat(slice.call(arguments)) : arguments);\n\t};\n}\n\nexport var requestFn = window.requestAnimationFrame || getPrefixed('RequestAnimationFrame') || timeoutDefer;\nexport var cancelFn = window.cancelAnimationFrame || getPrefixed('CancelAnimationFrame') ||\n\t\tgetPrefixed('CancelRequestAnimationFrame') || function (id) { window.clearTimeout(id); };\n\nconst raf = (fn, context, immediate) =>{\n\tif (immediate && requestFn === timeoutDefer) {\n\t\tfn.call(context);\n\t} else {\n\t\treturn requestFn.call(window, bind(fn, context));\n\t}\n} \n\nraf.cancel = (id) => {\n\tif (id) {\n\t\tcancelFn.call(window, id);\n\t}\n}\n\nexport default raf;","class MagicScroll {\n  constructor(target, speed = 80, smooth = 12, current = 0, passive = false) {\n    if (target === document) {\n      target = document.scrollingElement\n        || document.documentElement\n        || document.body.parentNode\n        || document.body;\n    } // cross browser support for document scrolling\n\n    this.speed = speed;\n    this.smooth = smooth;\n    this.moving = false;\n    this.scrollTop = current * 3000;\n    this.pos = this.scrollTop;\n    this.frame = target === document.body && document.documentElement ? document.documentElement : target; // safari is the new IE\n\n    target.addEventListener('wheel', scrolled, { passive });\n    target.addEventListener('DOMMouseScroll', scrolled, { passive });\n    const scope = this;\n    function scrolled(e) {\n      e.preventDefault(); // disable default scrolling\n\n      const delta = scope.normalizeWheelDelta(e);\n\n      scope.pos += -delta * scope.speed;\n      // scope.pos = Math.max(0, Math.min(scope.pos, 3000)); // limit scrolling\n\n      if (!scope.moving) scope.update(e);\n    }\n  }\n\n  normalizeWheelDelta(e) {\n    if (e.detail) {\n      if (e.wheelDelta) return (e.wheelDelta / e.detail / 40) * (e.detail > 0 ? 1 : -1);\n      // Opera\n      return -e.detail / 3; // Firefox\n    }\n    return e.wheelDelta / 120; // IE,Safari,Chrome\n  }\n\n  update(e) {\n    this.moving = true;\n\n    const delta = (this.pos - this.scrollTop) / this.smooth;\n\n    this.scrollTop += delta;\n\n    // this.scrollTop = Math.round(this.scrollTop);\n\n    if (this.onUpdate) {\n      this.onUpdate(delta, e);\n    }\n    const scope = this;\n    if (Math.abs(delta) > 1) {\n      requestFrame(() => {\n        scope.update();\n      });\n    } else this.moving = false;\n  }\n}\n\nexport default MagicScroll;\n\nvar requestFrame = (function () {\n  // requestAnimationFrame cross browser\n  return (\n    window.requestAnimationFrame\n    || window.webkitRequestAnimationFrame\n    || window.mozRequestAnimationFrame\n    || window.oRequestAnimationFrame\n    || window.msRequestAnimationFrame\n    || function (func) {\n      window.setTimeout(func, 1000);\n    }\n  );\n}());\n","import evPos from './ev-pos';\nimport Impetus from './impetus';\nimport touchPinch from './touch-pinch';\nimport raf from './raf';\nimport MagicScroll from './MagicScroll';\n\nconst panzoom = (target, cb) => {\n  if (target instanceof Function) {\n    cb = target;\n    target = document.documentElement || document.body;\n  }\n\n  if (typeof target === 'string') target = document.querySelector(target);\n\n  let cursor = {\n    x: 0,\n    y: 0\n  };\n\n  const hasPassive = () => {\n    let supported = false;\n\n    try {\n      const opts = Object.defineProperty({}, 'passive', {\n        get() {\n          supported = true;\n        }\n      });\n\n      window.addEventListener('test', null, opts);\n      window.removeEventListener('test', null, opts);\n    } catch (e) {\n      supported = false;\n    }\n\n    return supported;\n  };\n\n  let impetus;\n  let magicScroll;\n\n  let initX = 0;\n  let initY = 0;\n  let init = true;\n  const initFn = function(e) {\n    init = true;\n  };\n  target.addEventListener('mousedown', initFn);\n\n  const onMouseMove = e => {\n    cursor = evPos(e);\n  };\n\n  target.addEventListener('mousemove', onMouseMove);\n\n  const wheelListener = function(e) {\n    if (e) {\n      cursor = evPos(e);\n    }\n  };\n\n  target.addEventListener('wheel', wheelListener);\n  target.addEventListener('touchstart', initFn, hasPassive() ? { passive: true } : false);\n\n  target.addEventListener(\n    'contextmenu',\n    e => {\n      e.preventDefault();\n      return false;\n    },\n    false\n  );\n\n  let lastY = 0;\n  let lastX = 0;\n  impetus = new Impetus({\n    source: target,\n    update(x, y) {\n      if (init) {\n        init = false;\n        initX = cursor.x;\n        initY = cursor.y;\n      }\n\n      const e = {\n        target,\n        type: 'mouse',\n        dx: x - lastX,\n        dy: y - lastY,\n        dz: 0,\n        x: cursor.x,\n        y: cursor.y,\n        x0: initX,\n        y0: initY,\n        isRight: cursor.isRight\n      };\n\n      lastX = x;\n      lastY = y;\n\n      schedule(e);\n    },\n    stop() {\n      const ev = {\n        target,\n        type: 'mouse',\n        dx: 0,\n        dy: 0,\n        dz: 0,\n        x: cursor.x,\n        y: cursor.y,\n        x0: initX,\n        y0: initY\n      };\n      schedule(ev);\n    },\n    multiplier: 1,\n    friction: 0.75\n  });\n\n  magicScroll = new MagicScroll(target, 80, 12, 0);\n\n  magicScroll.onUpdate = (dy, e) => {\n    schedule({\n      target,\n      type: 'mouse',\n      dx: 0,\n      dy: 0,\n      dz: dy,\n      x: cursor.x,\n      y: cursor.y,\n      x0: cursor.x,\n      y0: cursor.y\n    });\n  };\n\n  // mobile pinch zoom\n  const pinch = touchPinch(target);\n  const mult = 2;\n  let initialCoords;\n\n  pinch.on('start', curr => {\n    const f1 = pinch.fingers[0];\n    const f2 = pinch.fingers[1];\n\n    initialCoords = [\n      f2.position[0] * 0.5 + f1.position[0] * 0.5,\n      f2.position[1] * 0.5 + f1.position[1] * 0.5\n    ];\n\n    impetus && impetus.pause();\n  });\n  pinch.on('end', () => {\n    if (!initialCoords) return;\n\n    initialCoords = null;\n\n    impetus && impetus.resume();\n  });\n  pinch.on('change', (curr, prev) => {\n    if (!pinch.pinching || !initialCoords) return;\n\n    schedule({\n      target,\n      type: 'touch',\n      dx: 0,\n      dy: 0,\n      dz: -(curr - prev) * mult,\n      x: initialCoords[0],\n      y: initialCoords[1],\n      x0: initialCoords[0],\n      y0: initialCoords[0]\n    });\n  });\n\n  // schedule function to current or next frame\n  let planned;\n  let frameId;\n  function schedule(ev) {\n    if (frameId != null) {\n      if (!planned) planned = ev;\n      else {\n        planned.dx += ev.dx;\n        planned.dy += ev.dy;\n        planned.dz += ev.dz;\n\n        planned.x = ev.x;\n        planned.y = ev.y;\n      }\n\n      return;\n    }\n\n    // Firefox sometimes does not clear webgl current drawing buffer\n    // so we have to schedule callback to the next frame, not the current\n    // cb(ev)\n\n    frameId = raf(() => {\n      cb(ev);\n      frameId = null;\n      if (planned) {\n        const arg = planned;\n        planned = null;\n        schedule(arg);\n      }\n    });\n  }\n\n  return function unpanzoom() {\n    target.removeEventListener('mousedown', initFn);\n    target.removeEventListener('mousemove', onMouseMove);\n    target.removeEventListener('touchstart', initFn);\n\n    impetus.destroy();\n\n    target.removeEventListener('wheel', wheelListener);\n\n    pinch.disable();\n\n    raf.cancel(frameId);\n  };\n};\n\nexport default panzoom;\n","import { Modes } from '../core/Constants';\n\nconst ModesMixin = superclass =>\n  class extends superclass {\n    /**\n     * MODES\n     */\n    setMode(mode) {\n      this.mode = mode;\n\n      switch (mode) {\n        case Modes.SELECT:\n          this.canvas.isDrawingMode = false;\n          this.canvas.interactive = true;\n          this.canvas.selection = true;\n          this.canvas.hoverCursor = 'default';\n          this.canvas.moveCursor = 'default';\n          break;\n        case Modes.GRAB:\n          this.canvas.isDrawingMode = false;\n          this.canvas.interactive = false;\n          this.canvas.selection = false;\n          this.canvas.discardActiveObject();\n          this.canvas.hoverCursor = 'move';\n          this.canvas.moveCursor = 'move';\n          break;\n        case Modes.MEASURE:\n          this.canvas.isDrawingMode = true;\n          this.canvas.freeDrawingBrush.color = 'transparent';\n          this.canvas.discardActiveObject();\n          break;\n        case Modes.DRAW:\n          this.canvas.isDrawingMode = true;\n          break;\n\n        default:\n          break;\n      }\n    }\n\n    setModeAsDraw() {\n      this.setMode(Modes.DRAW);\n    }\n\n    setModeAsSelect() {\n      this.setMode(Modes.SELECT);\n    }\n\n    setModeAsMeasure() {\n      this.setMode(Modes.MEASURE);\n    }\n\n    setModeAsGrab() {\n      this.setMode(Modes.GRAB);\n    }\n\n    isSelectMode() {\n      return this.mode === Modes.SELECT;\n    }\n\n    isGrabMode() {\n      return this.mode === Modes.GRAB;\n    }\n\n    isMeasureMode() {\n      return this.mode === Modes.MEASURE;\n    }\n\n    isDrawMode() {\n      return this.mode === Modes.DRAW;\n    }\n  };\n\nexport default ModesMixin;\n","import { Point } from '../geometry/Point';\n\nclass Measurer {\n  constructor(options) {\n    options = options || {};\n    options.hasBorders = false;\n    options.selectable = false;\n    options.hasControls = false;\n    // options.evented = false;\n    options.class = 'measurer';\n    options.scale = options.scale || 1;\n\n    // super([], options);\n\n    this.options = options || {};\n    this.start = this.options.start;\n    this.end = this.options.end;\n\n    this.canvas = this.options.map.canvas;\n\n    this.completed = false;\n\n    if (!this.start || !this.end) {\n      throw new Error('start must be defined');\n    }\n    this.draw();\n  }\n\n  clear() {\n    if (this.objects) {\n      this.objects.forEach((object) => {\n        this.canvas.remove(object);\n      });\n    }\n  }\n\n  draw() {\n    this.clear();\n\n    let { start, end } = this;\n    start = new Point(start);\n    end = new Point(end);\n\n    const center = start.add(end).multiply(0.5);\n\n    this.line = new fabric.Line([start.x, start.y, end.x, end.y], {\n      stroke: this.options.stroke || '#3e82ff',\n      hasControls: false,\n      hasBorders: false,\n      selectable: false,\n      evented: false,\n      strokeDashArray: [5, 5],\n    });\n\n    const lineEndOptions = {\n      left: start.x,\n      top: start.y,\n      strokeWidth: 1,\n      radius: this.options.radius || 1,\n      fill: this.options.fill || '#3e82ff',\n      stroke: this.options.stroke || '#3e82ff',\n      hasControls: false,\n      hasBorders: false,\n    };\n\n    const lineEndOptions2 = {\n      left: start.x,\n      top: start.y,\n      strokeWidth: 1,\n      radius: this.options.radius || 5,\n      fill: this.options.fill || '#3e82ff33',\n      stroke: this.options.stroke || '#3e82ff',\n      hasControls: false,\n      hasBorders: false,\n    };\n\n    this.circle1 = new fabric.Circle(lineEndOptions2);\n    this.circle2 = new fabric.Circle({\n      ...lineEndOptions2,\n      left: end.x,\n      top: end.y,\n    });\n\n    this.circle11 = new fabric.Circle(lineEndOptions);\n    this.circle22 = new fabric.Circle({\n      ...lineEndOptions,\n      left: end.x,\n      top: end.y,\n    });\n\n    let text = Math.round(start.distanceFrom(end));\n    text = `${text / 100} m`;\n    this.text = new fabric.Text(text, {\n      textBackgroundColor: 'black',\n      fill: 'white',\n      left: center.x,\n      top: center.y - 10,\n      fontSize: 12,\n      hasControls: false,\n      hasBorders: false,\n      selectable: false,\n      evented: false,\n    });\n\n    this.objects = [this.line, this.text, this.circle11, this.circle22, this.circle1, this.circle2];\n\n    this.objects.forEach((object) => {\n      this.canvas.add(object);\n    });\n\n    this.line.hasControls = false;\n    this.line.hasBorders = false;\n    this.line.selectable = false;\n    this.line.evented = false;\n\n    this.registerListeners();\n  }\n\n  setStart(start) {\n    this.start = start;\n    this.draw();\n  }\n\n  setEnd(end) {\n    this.end = end;\n    this.draw();\n  }\n\n  complete() {\n    this.completed = true;\n  }\n\n  registerListeners() {\n    this.circle2.on('moving', (e) => {\n      this.setEnd(e.pointer);\n    });\n\n    this.circle1.on('moving', (e) => {\n      this.setStart(e.pointer);\n    });\n  }\n\n  applyScale(scale) {\n    this.start.x *= scale;\n    this.start.y *= scale;\n    this.end.x *= scale;\n    this.end.y *= scale;\n    this.draw();\n  }\n}\nexport default Measurer;\n","import Measurer from './Measurer';\n\nclass Measurement {\n  constructor(map) {\n    this.map = map;\n    this.measurer = null;\n  }\n\n  onMouseMove(e) {\n    const point = {\n      x: e.absolutePointer.x,\n      y: e.absolutePointer.y,\n    };\n\n    if (this.measurer && !this.measurer.completed) {\n      this.measurer.setEnd(point);\n      this.map.canvas.requestRenderAll();\n    }\n  }\n\n  onClick(e) {\n    const point = {\n      x: e.absolutePointer.x,\n      y: e.absolutePointer.y,\n    };\n    if (!this.measurer) {\n      this.measurer = new Measurer({\n        start: point,\n        end: point,\n        map: this.map,\n      });\n\n      // this.map.canvas.add(this.measurer);\n    } else if (!this.measurer.completed) {\n      this.measurer.setEnd(point);\n      this.measurer.complete();\n    }\n  }\n}\n\nexport default Measurement;\n","'use strict';\n\n// used by apply() and isApplicationOf()\nconst _appliedMixin = '__mixwith_appliedMixin';\n\n/**\n * A function that returns a subclass of its argument.\n *\n * @example\n * const M = (superclass) => class extends superclass {\n *   getMessage() {\n *     return \"Hello\";\n *   }\n * }\n *\n * @typedef {Function} MixinFunction\n * @param {Function} superclass\n * @return {Function} A subclass of `superclass`\n */\n\n/**\n * Applies `mixin` to `superclass`.\n *\n * `apply` stores a reference from the mixin application to the unwrapped mixin\n * to make `isApplicationOf` and `hasMixin` work.\n *\n * This function is usefull for mixin wrappers that want to automatically enable\n * {@link hasMixin} support.\n *\n * @example\n * const Applier = (mixin) => wrap(mixin, (superclass) => apply(superclass, mixin));\n *\n * // M now works with `hasMixin` and `isApplicationOf`\n * const M = Applier((superclass) => class extends superclass {});\n *\n * class C extends M(Object) {}\n * let i = new C();\n * hasMixin(i, M); // true\n *\n * @function\n * @param {Function} superclass A class or constructor function\n * @param {MixinFunction} mixin The mixin to apply\n * @return {Function} A subclass of `superclass` produced by `mixin`\n */\nexport const apply = (superclass, mixin) => {\n  let application = mixin(superclass);\n  application.prototype[_appliedMixin] = unwrap(mixin);\n  return application;\n};\n\n/**\n * Returns `true` iff `proto` is a prototype created by the application of\n * `mixin` to a superclass.\n *\n * `isApplicationOf` works by checking that `proto` has a reference to `mixin`\n * as created by `apply`.\n *\n * @function\n * @param {Object} proto A prototype object created by {@link apply}.\n * @param {MixinFunction} mixin A mixin function used with {@link apply}.\n * @return {boolean} whether `proto` is a prototype created by the application of\n * `mixin` to a superclass\n */\nexport const isApplicationOf = (proto, mixin) =>\n  proto.hasOwnProperty(_appliedMixin) && proto[_appliedMixin] === unwrap(mixin);\n\n/**\n * Returns `true` iff `o` has an application of `mixin` on its prototype\n * chain.\n *\n * @function\n * @param {Object} o An object\n * @param {MixinFunction} mixin A mixin applied with {@link apply}\n * @return {boolean} whether `o` has an application of `mixin` on its prototype\n * chain\n */\nexport const hasMixin = (o, mixin) => {\n  while (o != null) {\n    if (isApplicationOf(o, mixin)) return true;\n    o = Object.getPrototypeOf(o);\n  }\n  return false;\n}\n\n\n// used by wrap() and unwrap()\nconst _wrappedMixin = '__mixwith_wrappedMixin';\n\n/**\n * Sets up the function `mixin` to be wrapped by the function `wrapper`, while\n * allowing properties on `mixin` to be available via `wrapper`, and allowing\n * `wrapper` to be unwrapped to get to the original function.\n *\n * `wrap` does two things:\n *   1. Sets the prototype of `mixin` to `wrapper` so that properties set on\n *      `mixin` inherited by `wrapper`.\n *   2. Sets a special property on `mixin` that points back to `mixin` so that\n *      it can be retreived from `wrapper`\n *\n * @function\n * @param {MixinFunction} mixin A mixin function\n * @param {MixinFunction} wrapper A function that wraps {@link mixin}\n * @return {MixinFunction} `wrapper`\n */\nexport const wrap = (mixin, wrapper) => {\n  Object.setPrototypeOf(wrapper, mixin);\n  if (!mixin[_wrappedMixin]) {\n    mixin[_wrappedMixin] = mixin;\n  }\n  return wrapper;\n};\n\n/**\n * Unwraps the function `wrapper` to return the original function wrapped by\n * one or more calls to `wrap`. Returns `wrapper` if it's not a wrapped\n * function.\n *\n * @function\n * @param {MixinFunction} wrapper A wrapped mixin produced by {@link wrap}\n * @return {MixinFunction} The originally wrapped mixin\n */\nexport const unwrap = (wrapper) => wrapper[_wrappedMixin] || wrapper;\n\nconst _cachedApplications = '__mixwith_cachedApplications';\n\n/**\n * Decorates `mixin` so that it caches its applications. When applied multiple\n * times to the same superclass, `mixin` will only create one subclass, memoize\n * it and return it for each application.\n *\n * Note: If `mixin` somehow stores properties its classes constructor (static\n * properties), or on its classes prototype, it will be shared across all\n * applications of `mixin` to a super class. It's reccomended that `mixin` only\n * access instance state.\n *\n * @function\n * @param {MixinFunction} mixin The mixin to wrap with caching behavior\n * @return {MixinFunction} a new mixin function\n */\nexport const Cached = (mixin) => wrap(mixin, (superclass) => {\n  // Get or create a symbol used to look up a previous application of mixin\n  // to the class. This symbol is unique per mixin definition, so a class will have N\n  // applicationRefs if it has had N mixins applied to it. A mixin will have\n  // exactly one _cachedApplicationRef used to store its applications.\n\n  let cachedApplications = superclass[_cachedApplications];\n  if (!cachedApplications) {\n    cachedApplications = superclass[_cachedApplications] = new Map();\n  }\n\n  let application = cachedApplications.get(mixin);\n  if (!application) {\n    application = mixin(superclass);\n    cachedApplications.set(mixin, application);\n  }\n\n  return application;\n});\n\n/**\n * Decorates `mixin` so that it only applies if it's not already on the\n * prototype chain.\n *\n * @function\n * @param {MixinFunction} mixin The mixin to wrap with deduplication behavior\n * @return {MixinFunction} a new mixin function\n */\nexport const DeDupe = (mixin) => wrap(mixin, (superclass) =>\n    (hasMixin(superclass.prototype, mixin))\n      ? superclass\n      : mixin(superclass));\n\n/**\n * Adds [Symbol.hasInstance] (ES2015 custom instanceof support) to `mixin`.\n *\n * @function\n * @param {MixinFunction} mixin The mixin to add [Symbol.hasInstance] to\n * @return {MixinFunction} the given mixin function\n */\nexport const HasInstance = (mixin) => {\n  if (Symbol && Symbol.hasInstance && !mixin[Symbol.hasInstance]) {\n    Object.defineProperty(mixin, Symbol.hasInstance, {\n      value(o) {\n        return hasMixin(o, mixin);\n      },\n    });\n  }\n  return mixin;\n};\n\n/**\n * A basic mixin decorator that applies the mixin with {@link apply} so that it\n * can be used with {@link isApplicationOf}, {@link hasMixin} and the other\n * mixin decorator functions.\n *\n * @function\n * @param {MixinFunction} mixin The mixin to wrap\n * @return {MixinFunction} a new mixin function\n */\nexport const BareMixin = (mixin) => wrap(mixin, (s) => apply(s, mixin));\n\n/**\n * Decorates a mixin function to add deduplication, application caching and\n * instanceof support.\n *\n * @function\n * @param {MixinFunction} mixin The mixin to wrap\n * @return {MixinFunction} a new mixin function\n */\nexport const Mixin = (mixin) => DeDupe(Cached(BareMixin(mixin)));\n\n/**\n * A fluent interface to apply a list of mixins to a superclass.\n *\n * ```javascript\n * class X extends mix(Object).with(A, B, C) {}\n * ```\n *\n * The mixins are applied in order to the superclass, so the prototype chain\n * will be: X->C'->B'->A'->Object.\n *\n * This is purely a convenience function. The above example is equivalent to:\n *\n * ```javascript\n * class X extends C(B(A(Object))) {}\n * ```\n *\n * @function\n * @param {Function} [superclass=Object]\n * @return {MixinBuilder}\n */\nexport const mix = (superclass) => new MixinBuilder(superclass);\n\nclass MixinBuilder {\n\n  constructor(superclass) {\n    this.superclass = superclass || class {};\n  }\n\n  /**\n   * Applies `mixins` in order to the superclass given to `mix()`.\n   *\n   * @param {Array.<Mixin>} mixins\n   * @return {Function} a subclass of `superclass` with `mixins` applied\n   */\n  with(...mixins) {\n    return mixins.reduce((c, m) => m(c), this.superclass);\n  }\n}","import panzoom from '../lib/panzoom';\nimport { clamp } from '../lib/mumath/index';\n\nimport Base from '../core/Base';\nimport { MAP, Modes } from '../core/Constants';\nimport Grid from '../grid/Grid';\nimport { Point } from '../geometry/Point';\nimport ModesMixin from './ModesMixin';\nimport Measurement from '../measurement/Measurement';\nimport { mix } from '../lib/mix';\n\n/**\n * CoordinatePlane (formerly Map)\n *\n * Main container component that provides a canvas with a coordinate system,\n * grid management, and layer management capabilities.\n *\n * @class\n * @extends {Base}\n * @mixes {ModesMixin}\n */\nexport class Map extends mix(Base).with(ModesMixin) {\n  /**\n   * Create a new coordinate plane\n   *\n   * @param {HTMLElement} container - The DOM element to contain the canvas\n   * @param {Object} options - Configuration options\n   * @param {Point} [options.center] - Center point of the coordinate plane\n   * @param {number} [options.zoom=1] - Initial zoom level\n   * @param {number} [options.minZoom=0] - Minimum allowed zoom level\n   * @param {number} [options.maxZoom=20] - Maximum allowed zoom level\n   * @param {boolean} [options.gridEnabled=true] - Whether to display the grid\n   * @param {boolean} [options.zoomEnabled=true] - Whether zooming is enabled\n   * @param {boolean} [options.selectEnabled=true] - Whether selection is enabled\n   * @param {string} [options.mode=Modes.SELECT] - Initial interaction mode\n   */\n  constructor(container, options) {\n    super(options);\n\n    this.defaults = Object.assign({}, MAP);\n\n    // set defaults\n    Object.assign(this, this.defaults);\n\n    // overwrite options\n    Object.assign(this, this._options);\n\n    this.center = new Point(this.center);\n\n    this.container = container || document.body;\n\n    const canvas = document.createElement('canvas');\n    this.container.appendChild(canvas);\n    canvas.setAttribute('id', 'fabric-layers-canvas');\n\n    canvas.width = this.width || this.container.clientWidth;\n    canvas.height = this.height || this.container.clientHeight;\n\n    this.canvas = new fabric.Canvas(canvas, {\n      preserveObjectStacking: true,\n      renderOnAddRemove: true\n    });\n    this.context = this.canvas.getContext('2d');\n\n    this.on('render', () => {\n      if (this.autostart) this.clear();\n    });\n\n    this.originX = -this.canvas.width / 2;\n    this.originY = -this.canvas.height / 2;\n\n    this.canvas.absolutePan({\n      x: this.originX,\n      y: this.originY\n    });\n\n    // this.center = {\n    //   x: this.canvas.width / 2.0,\n    //   y: this.canvas.height / 2.0\n    // };\n\n    this.x = this.center.x;\n    this.y = this.center.y;\n    this.dx = 0;\n    this.dy = 0;\n\n    try {\n      this.addFloorPlan();\n    } catch (e) {\n      console.error(e);\n    }\n\n    if (this.showGrid) {\n      this.addGrid();\n    }\n\n    this.setMode(this.mode || Modes.GRAB);\n\n    const vm = this;\n    panzoom(this.container, e => {\n      vm.panzoom(e);\n    });\n\n    this.registerListeners();\n\n    setTimeout(() => {\n      this.emit('ready', this);\n    }, 300);\n\n    this.measurement = new Measurement(this);\n  }\n\n  addBaseLayer() {\n    if (!this.baseLayer) return;\n    const vm = this;\n    this.baseLayer.on('load', img => {\n      vm.addLayer(img);\n    });\n  }\n\n  addLayer(layer) {\n    // this.canvas.renderOnAddRemove = false;\n    if (!layer.shape) {\n      console.error('shape is undefined');\n      return;\n    }\n    this.canvas.add(layer.shape);\n    this.canvas._objects.sort((o1, o2) => o1.zIndex - o2.zIndex);\n\n    if (layer.shape.keepOnZoom) {\n      const scale = 1.0 / this.zoom;\n      layer.shape.set('scaleX', scale);\n      layer.shape.set('scaleY', scale);\n      layer.shape.setCoords();\n      this.emit(`${layer.class}scaling`, layer);\n    }\n    if (layer.class) {\n      this.emit(`${layer.class}:added`, layer);\n    }\n\n    // this.canvas.renderOnAddRemove = true;\n\n    // this.update();\n    this.canvas.requestRenderAll();\n  }\n\n  removeLayer(layer) {\n    if (!layer || !layer.shape) return;\n    if (layer.class) {\n      this.emit(`${layer.class}:removed`, layer);\n    }\n    this.canvas.remove(layer.shape);\n  }\n\n  addGrid() {\n    this.gridCanvas = this.cloneCanvas();\n    this.gridCanvas.setAttribute('id', 'fabric-layers-grid-canvas');\n    this.grid = new Grid(this.gridCanvas, this);\n    this.grid.draw();\n  }\n\n  moveTo(obj, index) {\n    if (index !== undefined) {\n      obj.zIndex = index;\n    }\n    this.canvas.moveTo(obj.shape, obj.zIndex);\n  }\n\n  cloneCanvas(canvas) {\n    canvas = canvas || this.canvas;\n    const clone = document.createElement('canvas');\n    clone.width = canvas.width;\n    clone.height = canvas.height;\n    canvas.wrapperEl.appendChild(clone);\n    return clone;\n  }\n\n  setZoom(zoom) {\n    const { width, height } = this.canvas;\n    this.zoom = clamp(zoom, this.minZoom, this.maxZoom);\n    this.dx = 0;\n    this.dy = 0;\n    this.x = width / 2.0;\n    this.y = height / 2.0;\n    this.update();\n    process.nextTick(() => {\n      this.update();\n    });\n  }\n\n  getBounds() {\n    let minX = Infinity;\n    let maxX = -Infinity;\n    let minY = Infinity;\n    let maxY = -Infinity;\n\n    this.canvas.forEachObject(obj => {\n      const coords = obj.getBounds();\n\n      coords.forEach(point => {\n        minX = Math.min(minX, point.x);\n        maxX = Math.max(maxX, point.x);\n        minY = Math.min(minY, point.y);\n        maxY = Math.max(maxY, point.y);\n      });\n    });\n\n    return [new Point(minX, minY), new Point(maxX, maxY)];\n  }\n\n  fitBounds(padding = 100) {\n    this.onResize();\n\n    const { width, height } = this.canvas;\n\n    this.originX = -this.canvas.width / 2;\n    this.originY = -this.canvas.height / 2;\n\n    const bounds = this.getBounds();\n\n    this.center.x = (bounds[0].x + bounds[1].x) / 2.0;\n    this.center.y = -(bounds[0].y + bounds[1].y) / 2.0;\n\n    const boundWidth = Math.abs(bounds[0].x - bounds[1].x) + padding;\n    const boundHeight = Math.abs(bounds[0].y - bounds[1].y) + padding;\n    const scaleX = width / boundWidth;\n    const scaleY = height / boundHeight;\n\n    this.zoom = Math.min(scaleX, scaleY);\n\n    this.canvas.setZoom(this.zoom);\n\n    this.canvas.absolutePan({\n      x: this.originX + this.center.x * this.zoom,\n      y: this.originY - this.center.y * this.zoom\n    });\n\n    this.update();\n    process.nextTick(() => {\n      this.update();\n    });\n  }\n\n  setCursor(cursor) {\n    this.container.style.cursor = cursor;\n  }\n\n  reset() {\n    const { width, height } = this.canvas;\n    this.zoom = this._options.zoom || 1;\n    this.center = new Point();\n    this.originX = -this.canvas.width / 2;\n    this.originY = -this.canvas.height / 2;\n    this.canvas.absolutePan({\n      x: this.originX,\n      y: this.originY\n    });\n    this.x = width / 2.0;\n    this.y = height / 2.0;\n    this.update();\n    process.nextTick(() => {\n      this.update();\n    });\n  }\n\n  onResize(width, height) {\n    const oldWidth = this.canvas.width;\n    const oldHeight = this.canvas.height;\n\n    width = width || this.container.clientWidth;\n    height = height || this.container.clientHeight;\n\n    this.canvas.setWidth(width);\n    this.canvas.setHeight(height);\n\n    if (this.grid) {\n      this.grid.setSize(width, height);\n    }\n\n    const dx = width / 2.0 - oldWidth / 2.0;\n    const dy = height / 2.0 - oldHeight / 2.0;\n\n    this.canvas.relativePan({\n      x: dx,\n      y: dy\n    });\n\n    this.update();\n  }\n\n  update() {\n    const canvas = this.canvas;\n\n    if (this.grid) {\n      this.grid.update2({\n        x: this.center.x,\n        y: this.center.y,\n        zoom: this.zoom\n      });\n    }\n    this.emit('update', this);\n    if (this.grid) {\n      this.grid.render();\n    }\n\n    canvas.zoomToPoint(new Point(this.x, this.y), this.zoom);\n\n    if (this.isGrabMode() || this.isRight) {\n      canvas.relativePan(new Point(this.dx, this.dy));\n      this.emit('panning');\n      this.setCursor('grab');\n    } else {\n      this.setCursor('pointer');\n    }\n\n    const now = Date.now();\n    if (!this.lastUpdatedTime && Math.abs(this.lastUpdatedTime - now) < 100) {\n      return;\n    }\n    this.lastUpdatedTime = now;\n\n    const objects = canvas.getObjects();\n    let hasKeepZoom = false;\n    for (let i = 0; i < objects.length; i += 1) {\n      const object = objects[i];\n      if (object.keepOnZoom) {\n        object.set('scaleX', 1.0 / this.zoom);\n        object.set('scaleY', 1.0 / this.zoom);\n        object.setCoords();\n        hasKeepZoom = true;\n        this.emit(`${object.class}scaling`, object);\n      }\n    }\n    if (hasKeepZoom) canvas.requestRenderAll();\n  }\n\n  panzoom(e) {\n    // enable interactions\n    const { width, height } = this.canvas;\n    // shift start\n    const zoom = clamp(-e.dz, -height * 0.75, height * 0.75) / height;\n\n    const prevZoom = 1 / this.zoom;\n    let curZoom = prevZoom * (1 - zoom);\n    curZoom = clamp(curZoom, this.minZoom, this.maxZoom);\n\n    let { x, y } = this.center;\n\n    // pan\n    const oX = 0.5;\n    const oY = 0.5;\n    if (this.isGrabMode() || e.isRight) {\n      x -= prevZoom * e.dx;\n      y += prevZoom * e.dy;\n      this.setCursor('grab');\n    } else {\n      this.setCursor('pointer');\n    }\n\n    if (this.zoomEnabled) {\n      const tx = e.x / width - oX;\n      x -= width * (curZoom - prevZoom) * tx;\n      const ty = oY - e.y / height;\n      y -= height * (curZoom - prevZoom) * ty;\n    }\n    this.center.setX(x);\n    this.center.setY(y);\n    this.zoom = 1 / curZoom;\n    this.dx = e.dx;\n    this.dy = e.dy;\n    this.x = e.x0;\n    this.y = e.y0;\n    this.isRight = e.isRight;\n    this.isRight = e.isRight;\n    this.update();\n  }\n\n  setView(view) {\n    this.dx = 0;\n    this.dy = 0;\n    this.x = 0;\n    this.y = 0;\n    view.y *= -1;\n\n    const dx = this.center.x - view.x;\n    const dy = -this.center.y + view.y;\n\n    this.center.copy(view);\n\n    this.canvas.relativePan(new Point(dx * this.zoom, dy * this.zoom));\n\n    this.canvas.renderAll();\n\n    this.update();\n\n    process.nextTick(() => {\n      this.update();\n    });\n  }\n\n  registerListeners() {\n    const vm = this;\n\n    this.canvas.on('object:scaling', e => {\n      if (e.target.class) {\n        vm.emit(`${e.target.class}:scaling`, e.target.parent);\n        e.target.parent.emit('scaling', e.target.parent);\n        return;\n      }\n      const group = e.target;\n      if (!group.getObjects) return;\n\n      const objects = group.getObjects();\n      group.removeWithUpdate();\n      for (let i = 0; i < objects.length; i += 1) {\n        const object = objects[i];\n        object.orgYaw = object.parent.yaw || 0;\n        object.fire('moving', object.parent);\n        vm.emit(`${object.class}:moving`, object.parent);\n      }\n      vm.update();\n      vm.canvas.requestRenderAll();\n    });\n\n    this.canvas.on('object:rotating', e => {\n      if (e.target.class) {\n        vm.emit(`${e.target.class}:rotating`, e.target.parent, e.target.angle);\n        e.target.parent.emit('rotating', e.target.parent, e.target.angle);\n        return;\n      }\n      const group = e.target;\n      if (!group.getObjects) return;\n      const objects = group.getObjects();\n      for (let i = 0; i < objects.length; i += 1) {\n        const object = objects[i];\n        if (object.class === 'marker') {\n          object._set('angle', -group.angle);\n          object.parent.yaw = -group.angle + (object.orgYaw || 0);\n          // object.orgYaw = object.parent.yaw;\n          object.fire('moving', object.parent);\n          vm.emit(`${object.class}:moving`, object.parent);\n          object.fire('rotating', object.parent);\n          vm.emit(`${object.class}:rotating`, object.parent);\n        }\n      }\n      this.update();\n    });\n\n    this.canvas.on('object:moving', e => {\n      if (e.target.class) {\n        vm.emit(`${e.target.class}:moving`, e.target.parent);\n        e.target.parent.emit('moving', e.target.parent);\n        return;\n      }\n      const group = e.target;\n      if (!group.getObjects) return;\n      const objects = group.getObjects();\n      for (let i = 0; i < objects.length; i += 1) {\n        const object = objects[i];\n        if (object.class) {\n          object.fire('moving', object.parent);\n          vm.emit(`${object.class}:moving`, object.parent);\n        }\n      }\n      this.update();\n    });\n\n    this.canvas.on('object:moved', e => {\n      if (e.target.class) {\n        vm.emit(`${e.target.class}dragend`, e);\n        vm.emit(`${e.target.class}:moved`, e.target.parent);\n        e.target.parent.emit('moved', e.target.parent);\n        this.update();\n        return;\n      }\n      const group = e.target;\n      if (!group.getObjects) return;\n      const objects = group.getObjects();\n      for (let i = 0; i < objects.length; i += 1) {\n        const object = objects[i];\n        if (object.class) {\n          object.fire('moved', object.parent);\n          vm.emit(`${object.class}:moved`, object.parent);\n        }\n      }\n      this.update();\n    });\n\n    this.canvas.on('selection:cleared', e => {\n      const objects = e.deselected;\n      if (!objects || !objects.length) return;\n      for (let i = 0; i < objects.length; i += 1) {\n        const object = objects[i];\n        if (object.class === 'marker') {\n          object._set('angle', 0);\n          object._set('scaleX', 1 / vm.zoom);\n          object._set('scaleY', 1 / vm.zoom);\n          if (object.parent) {\n            object.parent.inGroup = false;\n          }\n          object.fire('moving', object.parent);\n        }\n      }\n    });\n    this.canvas.on('selection:created', e => {\n      const objects = e.selected;\n      if (!objects || objects.length < 2) return;\n      for (let i = 0; i < objects.length; i += 1) {\n        const object = objects[i];\n        if (object.class && object.parent) {\n          object.parent.inGroup = true;\n          object.orgYaw = object.parent.yaw || 0;\n        }\n      }\n    });\n    this.canvas.on('selection:updated', e => {\n      const objects = e.selected;\n      if (!objects || objects.length < 2) return;\n      for (let i = 0; i < objects.length; i += 1) {\n        const object = objects[i];\n        if (object.class && object.parent) {\n          object.parent.inGroup = true;\n          object.orgYaw = object.parent.yaw || 0;\n        }\n      }\n    });\n\n    this.canvas.on('mouse:down', e => {\n      vm.dragObject = e.target;\n    });\n\n    this.canvas.on('mouse:move', e => {\n      if (this.isMeasureMode()) {\n        this.measurement.onMouseMove(e);\n      }\n      if (vm.dragObject && vm.dragObject.clickable) {\n        if (vm.dragObject === e.target) {\n          vm.dragObject.dragging = true;\n        } else {\n          vm.dragObject.dragging = false;\n        }\n      }\n      this.isRight = false;\n      if ('which' in e.e) {\n        // Gecko (Firefox), WebKit (Safari/Chrome) & Opera\n        this.isRight = e.e.which === 3;\n      } else if ('button' in e.e) {\n        // IE, Opera\n        this.isRight = e.e.button === 2;\n      }\n\n      vm.emit('mouse:move', e);\n    });\n\n    this.canvas.on('mouse:up', e => {\n      if (this.isMeasureMode()) {\n        this.measurement.onClick(e);\n      }\n\n      this.isRight = false;\n      this.dx = 0;\n      this.dy = 0;\n\n      if (!vm.dragObject || !e.target || !e.target.selectable) {\n        e.target = null;\n        vm.emit('mouse:click', e);\n      }\n      if (vm.dragObject && vm.dragObject.clickable) {\n        if (vm.dragObject !== e.target) return;\n        if (!vm.dragObject.dragging && !vm.modeToggleByKey) {\n          vm.emit(`${vm.dragObject.class}:click`, vm.dragObject.parent);\n        }\n        vm.dragObject.dragging = false;\n      }\n      vm.dragObject = null;\n    });\n\n    window.addEventListener('resize', () => {\n      vm.onResize();\n    });\n\n    // document.addEventListener('keyup', () => {\n    //   if (this.modeToggleByKey && this.isGrabMode()) {\n    //     this.setModeAsSelect();\n    //     this.modeToggleByKey = false;\n    //   }\n    // });\n\n    // document.addEventListener('keydown', event => {\n    //   if (event.ctrlKey || event.metaKey) {\n    //     if (this.isSelectMode()) {\n    //       this.setModeAsGrab();\n    //     }\n    //     this.modeToggleByKey = true;\n    //   }\n    // });\n  }\n\n  unregisterListeners() {\n    this.canvas.off('object:moving');\n    this.canvas.off('object:moved');\n  }\n\n  getMarkerById(id) {\n    const objects = this.canvas.getObjects();\n    for (let i = 0; i < objects.length; i += 1) {\n      const obj = objects[i];\n      if (obj.class === 'marker' && obj.id === id) {\n        return obj.parent;\n      }\n    }\n    return null;\n  }\n\n  getMarkers() {\n    const list = [];\n    const objects = this.canvas.getObjects();\n    for (let i = 0; i < objects.length; i += 1) {\n      const obj = objects[i];\n      if (obj.class === 'marker') {\n        list.push(obj.parent);\n      }\n    }\n    return list;\n  }\n}\n\nexport const map = (container, options) => new Map(container, options);\n","import { Point } from '../geometry/Point';\nimport { Group } from '../layer/Group';\nimport { Layer } from '../layer/Layer';\n\n/**\n * ImageLayer - A layer for displaying and manipulating images\n *\n * This component provides functionality for loading and managing images\n * within the coordinate plane. It supports image loading, positioning,\n * scaling, and other transformations.\n *\n * @class\n * @extends {Layer}\n */\nexport class ImageLayer extends Layer {\n  /**\n   * Create a new ImageLayer\n   *\n   * @param {Object} options - Configuration options\n   * @param {string} options.url - URL of the image to load\n   * @param {Point|Object} [options.position] - Position of the image (x,y coordinates)\n   * @param {number} [options.width=-1] - Width of the image (-1 for auto)\n   * @param {number} [options.height=-1] - Height of the image (-1 for auto)\n   * @param {number} [options.opacity=1] - Opacity of the image (0-1)\n   * @param {boolean} [options.draggable=false] - Whether the image can be dragged\n   * @param {number} [options.zIndex=1] - Z-index for layer stacking order\n   * @param {string} [options.id] - Unique identifier for the layer\n   */\n  constructor(options) {\n    super(options);\n\n    this.width = this.width || -1;\n    this.height = this.height || -1;\n\n    this.position = new Point(this.position);\n\n    this.class = 'image-layer';\n\n    this.load();\n  }\n\n  /**\n   * Load the image from the provided URL\n   *\n   * Creates a fabric.js Image object from the URL and sets up event handlers\n   * for when the image is loaded. Auto-scales the image if width/height are not specified.\n   *\n   * @returns {void}\n   */\n  load() {\n    const vm = this;\n    const index = this.url.lastIndexOf('.');\n    const ext = index > 0 ? this.url.substring(index + 1) : '';\n\n    if (ext === 'svg') {\n      fabric.loadSVGFromURL(this.url, (objects, options) => {\n        const shape = fabric.util.groupSVGElements(objects, options);\n        vm.onLoad(shape);\n      });\n    } else {\n      fabric.Image.fromURL(this.url, img => {\n        vm.onLoad(img);\n      });\n    }\n\n    return this;\n  }\n\n  /**\n   * Handles the loaded image\n   * @param {Object} shape The loaded image object\n   */\n  onLoad(shape) {\n    const group = new Group({\n      label: this.label,\n      zIndex: this.zIndex,\n      selectable: false,\n      subTargetCheck: true,\n      width: shape.width || 0,\n      height: shape.height || 0\n    });\n\n    group.add(shape);\n\n    if (this.width < 0) {\n      this.width = shape.width || 0;\n    }\n\n    if (this.height < 0) {\n      this.height = shape.height || 0;\n    }\n\n    this.width = parseFloat(this.width);\n    this.height = parseFloat(this.height);\n\n    if (this.width > 0 && this.height > 0) {\n      if (this.keepRatio) {\n        const widthScale = this.width / shape.width;\n        const heightScale = this.height / shape.height;\n\n        const minScale = Math.min(widthScale, heightScale);\n\n        shape.scale(minScale);\n      } else {\n        shape.scaleToWidth(this.width);\n        shape.scaleToHeight(this.height);\n      }\n\n      this.width = shape.getScaledWidth();\n      this.height = shape.getScaledHeight();\n    } else {\n      this.width = shape.width;\n      this.height = shape.height;\n    }\n\n    this.shape = shape;\n    this.group = group;\n\n    shape.lockMovementX = true;\n    shape.lockMovementY = true;\n    shape.hoverCursor = 'default';\n\n    this.canvas = shape.canvas;\n\n    this.bindEvents();\n\n    this.fire('load', this);\n  }\n\n  /**\n   * Bind events to the image\n   */\n  bindEvents() {\n    const vm = this;\n\n    this.shape.on('mousedown', e => {\n      vm.fire('mousedown', e);\n    });\n\n    this.shape.on('mousemove', e => {\n      vm.fire('mousemove', e);\n    });\n\n    this.shape.on('mouseup', e => {\n      vm.fire('mouseup', e);\n    });\n\n    this.shape.on('mouseover', e => {\n      vm.fire('mouseover', e);\n    });\n\n    this.shape.on('mouseout', e => {\n      vm.fire('mouseout', e);\n    });\n  }\n\n  /**\n   * Get the bounds of the image\n   * @returns {Object} The bounds of the image\n   */\n  getBounds() {\n    return {\n      width: this.width,\n      height: this.height\n    };\n  }\n}\n\n/**\n * Factory function to create an ImageLayer\n * @param {Object} options Configuration options\n * @returns {ImageLayer} A new ImageLayer instance\n */\nexport const imageLayer = options => new ImageLayer(options);\n","/**\n * fabric-layers-react\n * A fabric.js coordinate-plane (grid) & layers library for React\n */\n\nimport fabric from 'fabric-pure-browser';\nimport { version } from '../package.json';\nimport Grid from './grid/Grid';\n// Import but don't re-export legacy renamed components to avoid naming conflicts\nimport './floorplan/index';\n\n// Log version information in development only\nif (process.env.NODE_ENV !== 'production') {\n  console.log('fabric-layers-react', version);\n  console.log('fabric.js', fabric.version);\n}\n\n/**\n * Library Version\n */\nexport { version };\n\n/**\n * Core Components and Constants\n */\nexport * from './core/index';\n\n/**\n * Geometry Utilities\n */\nexport * from './geometry/index';\n\n/**\n * Grid System\n * @deprecated Use GridSystem instead of Grid for new projects\n */\nexport * from './grid/index';\nexport { Grid as GridSystem };\n\n/**\n * Layer System\n */\nexport * from './layer/index';\n\n/**\n * Canvas Utilities\n */\nexport * from './paint/index';\n\n/**\n * Coordinate Plane (formerly Map)\n * @deprecated Use CoordinatePlane instead of Map for new projects\n */\nexport { Map as CoordinatePlane } from './map/Map';\n\n/**\n * Measurement Tools\n */\nexport * from './measurement/index';\n\n/**\n * Image Handling\n */\nexport * from './image/index';\n\n/**\n * Legacy Components\n * @deprecated These will be removed in a future version\n */\nexport * from './map/index';\n"],"names":["global","self","window","defaultSetTimout","Error","defaultClearTimeout","cachedSetTimeout","cachedClearTimeout","setTimeout","clearTimeout","runTimeout","fun","e","call","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","length","concat","drainQueue","timeout","len","run","nextTick","args","Array","arguments","i","push","Item","array","prototype","apply","performance","performanceNow","now","mozNow","msNow","oNow","webkitNow","Date","getTime","alpha","color","value","obj","replace","split","join","Base","_EventEmitter","options","_this","_classCallCheck","_callSuper","_options","Object","assign","_inherits","_createClass","EventEmitter2","clamp","a","min","max","Math","b","sqrt","abs","almostEqual","absoluteError","relativeError","d","DBL_EPSILON","FLT_EPSILON","range","start","stop","step","toReturn","increasing","log10","log","isMultiple","eps","remainder","almost","minStep","srcSteps","power","floor","lg","order","pow","steps","map","v","str","out","String","num","parseFloat","match","PIXELS_PER_INCH","defaults","toPX","parts","parseUnit","isNaN","px","toString","getPrototypeOf","gridStyle","distance","unit","lines","state","coord","coordinate","scale","zoom","offset","ceil","lineColor","light","heavy","tenStep","nextStep","colors","ticks","tickWidth","axisWidth","labels","orientation","Number","toFixed","format","Axis","key","getCoords","values","coords","t","getRatio","getRange","width","height","setOffset","update","Point","_fabric$Point","x","y","_len","params","_key","hasOwnProperty","_params$","_slicedToArray","console","error","setX","setY","copy","point","getArray","fabric","_len2","_key2","_construct","Grid","_Base","canvas","opts","context","getContext","setDefaults","render","draw","getCenterCoords","_state$shape","shape","_state$padding","padding","pt","pr","pb","pl","axisCoords","opposite","axisOrigin","_state$shape2","_state$padding2","setSize","setWidth","setHeight","calcCoordinate","axisX","axisY","emit","update2","center","grid","MAX_VALUE","axisColor","lineWidth","tickAlign","labelColor","fill","Function","fontSize","units","toPx","fontFamily","lineColors","isArray","tick","isObj","keys","forEach","label","pixelRatio","devicePixelRatio","autostart","interactions","type","name","minZoom","Infinity","maxZoom","origin","zoomEnabled","panEnabled","style","axis","clearRect","drawLines","ctx","_state$shape3","left","top","_state$padding3","axisRatio","j","strokeStyle","beginPath","x1","y1","x2","y2","moveTo","lineTo","stroke","closePath","normals","xDif","yDif","dist","tickCoords","labelCoords","k","drawLabels","_state$shape4","_state$padding4","font","fillStyle","textBaseline","textHeight","indent","textOffset","isOpp","disabled","textWidth","measureText","textLeft","textTop","fillText","Group","_fabric$Group","objects","getBounds","Layer","undefined","draggable","zIndex","opacity","keepOnZoom","clickable","hoverCursor","moveCursor","class","parent","id","hasControls","hasBorders","lockMovementX","lockMovementY","evented","selectable","setOptions","_this2","set","renderAll","addTo","_map","removeLayer","addLayer","Modes","SELECT","GRAB","MEASURE","DRAW","MAP","gridEnabled","selectEnabled","mode","showGrid","MARKER","position","ICON","url","size","anchor","originX","originY","lockUniScaling","lockScalingFlip","transparentCorners","centeredScaling","cornerColor","borderColor","borderOpacity","cornerOpacity","cornerStrokeColor","objectCaching","selectionBackgroundColor","borderDashArray","GridManager","_coordinatePlane","coordinatePlane","_canvas","_grid","_visible","visible","_spacing","spacing","_color","_opacity","_axisColor","_showLabels","showLabels","initGrid","setVisible","fire","setSpacing","setColor","setOpacity","setShowLabels","show","setCanvas","setCoordinatePlane","gridCanvas","redraw","getGrid","getSettings","CanvasLayer","_Layer","props","canvasRef","React","createRef","initCanvas","current","clearCanvas","resizeCanvas","parentElement","clientWidth","clientHeight","componentDidMount","_superPropGet","addEventListener","bind","componentWillUnmount","removeEventListener","_this$props","className","otherProps","_objectWithoutProperties","_excluded","createElement","_objectSpread","ref","display","Line","_fabric$Line","points","strokeWidth","_strokeWidth","_renderStroke","getZoom","setCoords","line","Connector","end","_possibleConstructorReturn","registerListeners","vm","on","setStart","setEnd","setStrokeWidth","Tooltip","content","textColor","textObj","Text","init","process","LayerManager","layers","layersMap","Map","layer","random","group","add","sortLayers","layerId","layerObj","get","filter","l","delete","remove","getLayer","sort","bringToFront","showAllLayers","hideAllLayers","Marker","rotation","yaw","text","angle","icon","Image","fromURL","image","scaleToWidth","circle","Circle","radius","links","addLinks","onShapeDrag","onShapeMouseDown","onShapeMouseMove","onShapeMouseUp","setPosition","setRotation","_this3","setTextColor","setStroke","setText","setLinks","setRadius","_this4","connectors","link","connector","addConnectors","onAdded","matrix","calcTransformMatrix","_matrix","dragStart","pointer","distanceFrom","dragging","Icon","_fabric$Image","Polyline","_points","lineOptions","setPoints","addPoint","p1","p2","addWithUpdate","removeLines","polyline","_fabric$Circle","Rect","_fabric$Rect","rect","MarkerGroup","bounds","setBounds","markerGroup","ArrowHead","_fabric$Triangle","headLength","dx","dy","atan2","PI","lastAngle","Triangle","Arrow","pointArray","head","strokeLineJoin","lastPoints","getLastPoints","dis","addTempPoint","lastPoint","point1","point2","_objects","DRAWING","ARROW","TEXT","Canvas","container","document","appendChild","setAttribute","currentColor","freeDrawingCursor","freeDrawingLineWidth","arrows","setLineWidth","addCursor","addListeners","setModeAsArrow","setModeAsDrawing","isDrawingMode","selection","onModeChanged","setModeAsSelect","isSelectMode","isArrowMode","setModeAsText","isTextMode","updateCursor","evt","mouse","getPointer","mousecursor","activeArrow","requestRenderAll","cursor","event","mouseDown","target","IText","setActiveObject","removeSelected","getActiveObject","getActiveObjects","discardActiveObject","cursorOpacity","freeDrawingBrush","Path","scaleX","scaleY","defaultCursor","cursorCanvas","wrapperEl","pointerEvents","StaticCanvas","setFontFamily","family","clear","isNum","val","ev","toElement","currentTarget","toElementBoundingRect","getBoundingClientRect","orgEv","originalEvent","hasTouches","touches","pageX","pageY","clientX","clientY","currentPoint","isRight","which","button","stopThresholdDefault","bounceDeceleration","bounceAcceleration","Impetus","_ref","_ref$source","source","sourceEl","updateCallback","stopCallback","_ref$multiplier","multiplier","_ref$friction","friction","initialValues","boundX","boundY","_ref$bounce","bounce","boundXmin","boundXmax","boundYmin","boundYmax","pointerLastX","pointerLastY","pointerCurrentX","pointerCurrentY","pointerId","decVelX","decVelY","targetX","targetY","stopThreshold","ticking","pointerActive","paused","decelerating","trackingPoints","querySelector","callUpdateCallback","onDown","destroy","cleanUpRuntimeEvents","pause","resume","setValues","setMultiplier","setBoundX","setBoundY","onMove","getPassiveSupported","passive","onUp","stopTracking","addRuntimeEvents","normalizeEvent","touch","targetTouches","changedTouches","identifier","addTrackingPoint","preventDefault","requestTick","startDecelAnim","time","shift","updateAndRender","pointerChangeX","pointerChangeY","diff","checkBounds","dragOutOfBoundsMultiplier","requestAnimFrame","restrict","xDiff","yDiff","inBounds","firstPoint","xOffset","yOffset","timeOffset","D","stepDecelAnim","reboundAdjust","adjust","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","callback","passiveSupported","defineProperty","err","rootPosition","mouseEventOffset","srcElement","cx","cy","getBoundingClientOffset","element","body","touchPinch","emitter","fingers","activeCount","lastDistance","ended","enabled","defineProperties","pinching","enable","disable","indexOfTouch","onTouchStart","onTouchMove","onTouchRemoved","newTouch","idx","first","newIndex","oldIndex","newFinger","Finger","eventOffset","oldTouch","initialDistance","computeDistance","changed","movedTouch","currentDistance","removed","otherIdx","otherTouch","getPrefixed","lastTime","timeoutDefer","fn","timeToCall","slice","requestFn","cancelFn","cancelAnimationFrame","raf","immediate","cancel","MagicScroll","speed","smooth","scrollingElement","documentElement","parentNode","moving","scrollTop","pos","frame","scrolled","scope","delta","normalizeWheelDelta","detail","wheelDelta","onUpdate","requestFrame","oRequestAnimationFrame","msRequestAnimationFrame","func","panzoom","cb","hasPassive","supported","impetus","magicScroll","initX","initY","initFn","onMouseMove","evPos","wheelListener","lastY","lastX","dz","x0","y0","schedule","pinch","mult","initialCoords","curr","f1","f2","prev","planned","frameId","arg","unpanzoom","ModesMixin","superclass","_superclass","_class","setMode","interactive","setModeAsDraw","setModeAsMeasure","setModeAsGrab","isGrabMode","isMeasureMode","isDrawMode","Measurer","completed","object","multiply","strokeDashArray","lineEndOptions","lineEndOptions2","circle1","circle2","circle11","circle22","round","textBackgroundColor","complete","applyScale","Measurement","measurer","absolutePointer","onClick","mix","MixinBuilder","with","mixins","reduce","c","m","_mix$with","preserveObjectStacking","renderOnAddRemove","absolutePan","addFloorPlan","addGrid","measurement","addBaseLayer","baseLayer","img","o1","o2","cloneCanvas","index","clone","setZoom","_this$canvas","minX","maxX","minY","maxY","forEachObject","fitBounds","onResize","_this$canvas2","boundWidth","boundHeight","setCursor","reset","_this$canvas3","oldWidth","oldHeight","relativePan","zoomToPoint","lastUpdatedTime","getObjects","hasKeepZoom","_this$canvas4","prevZoom","curZoom","_this$center","oX","oY","tx","ty","setView","view","_this5","_this6","removeWithUpdate","orgYaw","_set","deselected","inGroup","selected","dragObject","modeToggleByKey","unregisterListeners","off","getMarkerById","getMarkers","list","ImageLayer","load","lastIndexOf","ext","substring","loadSVGFromURL","util","groupSVGElements","onLoad","subTargetCheck","keepRatio","widthScale","heightScale","minScale","scaleToHeight","getScaledWidth","getScaledHeight","bindEvents","imageLayer","version"],"mappings":"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"}